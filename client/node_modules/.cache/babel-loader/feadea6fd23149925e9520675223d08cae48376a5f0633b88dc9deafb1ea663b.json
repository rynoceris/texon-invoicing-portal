{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import InvoiceDashboard from'./InvoiceDashboard';import'./InvoiceDashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE='/texon-invoicing-portal/api';// Login Component\nfunction Login(_ref){let{onLogin}=_ref;const[credentials,setCredentials]=useState({username:'',password:''});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});const data=await response.json();if(response.ok){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));onLogin(data.user,data.token);}else{setError(data.error||'Login failed');}}catch(error){setError('Network error. Please try again.');}setIsLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to access the invoicing management system\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:credentials.username,onChange:e=>setCredentials({...credentials,username:e.target.value}),required:true,autoComplete:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:credentials.password,onChange:e=>setCredentials({...credentials,password:e.target.value}),required:true,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"btn-primary\",children:isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Default Admin Credentials:\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"code\",{children:\"admin\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Password: \",/*#__PURE__*/_jsx(\"code\",{children:\"changeme123\"})]}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u26A0\\uFE0F Change these after first login!\"})]})]})});}// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard(_ref2){let{token}=_ref2;return/*#__PURE__*/_jsx(InvoiceDashboard,{token:token});}// Enhanced Settings Component - Replace your existing Settings component with this:\nfunction Settings(_ref3){let{token,user}=_ref3;const[settings,setSettings]=useState({});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[orderStatuses,setOrderStatuses]=useState([]);const[loadingOrderStatuses,setLoadingOrderStatuses]=useState(false);// Default settings structure - only what we need for this app\nconst defaultSettings={// Order Status Filter Settings\nignored_order_statuses:''};useEffect(()=>{loadSettings();loadOrderStatuses();},[]);const loadSettings=async()=>{try{const response=await fetch(`${API_BASE}/settings`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Merge with defaults to ensure all settings exist\nsetSettings({...defaultSettings,...data});}catch(error){console.error('Error loading settings:',error);setSettings(defaultSettings);}finally{setLoading(false);}};const loadOrderStatuses=async()=>{if(user.role!=='admin')return;setLoadingOrderStatuses(true);try{const response=await fetch(`${API_BASE}/order-statuses`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(data.success){setOrderStatuses(data.data);}else{console.error('Error loading order statuses:',data.error);}}catch(error){console.error('Error loading order statuses:',error);}finally{setLoadingOrderStatuses(false);}};const saveSettings=async()=>{setSaving(true);try{console.log('🔧 Saving settings:',settings);console.log('🔧 Settings JSON length:',JSON.stringify(settings).length);console.log('🔐 Using token:',token?'Present':'Missing');console.log('🌐 API URL:',`${API_BASE}/settings`);// Only send the settings we actually want to save (not old cached ones)\nconst settingsToSave={ignored_order_statuses:settings.ignored_order_statuses||''};console.log('🔧 Filtered settings to save:',settingsToSave);const response=await fetch(`${API_BASE}/settings`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(settingsToSave)});console.log('📡 Response status:',response.status);console.log('📡 Response ok:',response.ok);if(!response.ok){console.log('❌ Response not ok, status:',response.status);}const data=await response.json();console.log('📨 Response data:',data);if(response.ok&&data.success){alert('Settings saved successfully!');}else{throw new Error(data.error||'Failed to save settings');}}catch(error){console.error('❌ Error saving settings:',error);console.log('❌ Error type:',error.constructor.name);console.log('❌ Error message:',error.message);alert(`Error saving settings: ${error.message}`);}finally{setSaving(false);}};const updateSetting=(key,value)=>{setSettings(prev=>({...prev,[key]:value}));};if(user.role!=='admin'){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"access-denied\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F Admin access required to modify system settings.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Contact your system administrator if you need to change settings.\"})]})]});}if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading settings...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving...':'💾 Save Settings'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB Order Status Filtering\"}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-group\",children:loadingOrderStatuses?/*#__PURE__*/_jsx(\"p\",{children:\"Loading order statuses...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Ignored Order Statuses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"order-status-selection\",children:orderStatuses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'10px',margin:'10px 0'},children:orderStatuses.map(status=>{const isIgnored=settings.ignored_order_statuses?settings.ignored_order_statuses.split(',').map(s=>s.trim()).includes(status.statusid.toString()):false;return/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item\",style:{display:'flex',alignItems:'center',padding:'8px',border:'1px solid #ddd',borderRadius:'4px',backgroundColor:isIgnored?'#fff3cd':'white'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isIgnored,onChange:e=>{const statusIds=settings.ignored_order_statuses?settings.ignored_order_statuses.split(',').map(s=>s.trim()).filter(s=>s):[];if(e.target.checked){statusIds.push(status.statusid.toString());}else{const index=statusIds.indexOf(status.statusid.toString());if(index>-1)statusIds.splice(index,1);}updateSetting('ignored_order_statuses',statusIds.join(','));},style:{marginRight:'8px'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:status.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.9em',color:'#666'},children:[\"ID: \",status.statusid]})]})]},status.statusid);})}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontStyle:'italic'},children:\"No order statuses found. Check your Brightpearl connection.\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Orders with the selected statuses will be excluded from all dashboard reporting. This is useful to ignore orders in statuses like 'Quote', 'On Hold', or 'Cancelled' that shouldn't be included in revenue calculations.\"}),settings.ignored_order_statuses&&settings.ignored_order_statuses.trim()&&/*#__PURE__*/_jsxs(\"div\",{className:\"ignored-statuses-preview\",style:{background:'#f8f9fa',padding:'15px',borderRadius:'6px',marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Currently ignored order statuses:\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px'},children:settings.ignored_order_statuses.split(',').map(statusId=>{const status=orderStatuses.find(s=>s.statusid.toString()===statusId.trim());return status?/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',background:'#dc3545',color:'white',padding:'4px 8px',borderRadius:'4px',margin:'2px',fontSize:'0.85em'},children:status.name},statusId.trim()):null;})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving Settings...':'💾 Save Settings'}),/*#__PURE__*/_jsx(\"p\",{className:\"save-note\",children:\"Changes take effect immediately when you save.\"})]})]});}// Replace the Reports component in your client/src/App.js with this enhanced version:\nfunction Reports(_ref4){let{token,user}=_ref4;const[reports,setReports]=useState([]);const[loading,setLoading]=useState(true);const[expandedReports,setExpandedReports]=useState(new Set());const[pagination,setPagination]=useState({});// Track pagination for each report\nconst[downloadingReports,setDownloadingReports]=useState(new Set());const[deletingReports,setDeletingReports]=useState(new Set());const[deletingAll,setDeletingAll]=useState(false);useEffect(()=>{loadReports();},[]);const loadReports=async()=>{try{const response=await fetch(`${API_BASE}/reports`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Parse discrepancies for each report\nconst parsedReports=data.map(report=>({...report,discrepancies:(()=>{try{if(typeof report.discrepancies==='string'){return JSON.parse(report.discrepancies);}else if(Array.isArray(report.discrepancies)){return report.discrepancies;}else{return[];}}catch(e){console.error('Error parsing discrepancies for report:',report.id,e);return[];}})()}));setReports(parsedReports);// Initialize pagination for each report (start with page 1)\nconst initialPagination={};parsedReports.forEach(report=>{initialPagination[report.id]={currentPage:1,itemsPerPage:25};});setPagination(initialPagination);}catch(error){console.error('Error loading reports:',error);}finally{setLoading(false);}};const deleteReport=async report=>{const confirmMessage=`Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}const reportId=report.id;setDeletingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){// Remove the report from the local state\nsetReports(prev=>prev.filter(r=>r.id!==reportId));// Also remove from expanded reports if it was expanded\nsetExpandedReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});alert(`Report from ${report.date} has been deleted successfully.`);}else{throw new Error(data.error||'Failed to delete report');}}catch(error){console.error('Error deleting report:',error);alert(`Failed to delete report: ${error.message}`);}finally{setDeletingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const deleteAllReports=async()=>{if(reports.length===0){alert('No reports to delete.');return;}const confirmMessage=`Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;if(!window.confirm(confirmMessage)){return;}// Double confirmation for such a destructive action\nconst doubleConfirm=window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);if(!doubleConfirm){return;}setDeletingAll(true);try{let deletedCount=0;let failedCount=0;const totalReports=reports.length;// Delete reports one by one to handle any individual failures\nfor(const report of reports){try{const response=await fetch(`${API_BASE}/reports/${report.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){deletedCount++;}else{failedCount++;console.error(`Failed to delete report ${report.id}:`,data.error);}}catch(error){failedCount++;console.error(`Error deleting report ${report.id}:`,error);}}// Refresh the reports list\nawait loadReports();// Show results\nif(deletedCount===totalReports){alert(`Successfully deleted all ${deletedCount} reports.`);}else if(deletedCount>0){alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);}else{alert(`Failed to delete any reports. Please try again or contact support.`);}}catch(error){console.error('Error during bulk deletion:',error);alert(`Error during deletion: ${error.message}`);// Refresh the list to see current state\nawait loadReports();}finally{setDeletingAll(false);}};const toggleReportExpansion=reportId=>{const newExpanded=new Set(expandedReports);if(newExpanded.has(reportId)){newExpanded.delete(reportId);}else{newExpanded.add(reportId);}setExpandedReports(newExpanded);};const changePage=(reportId,newPage)=>{setPagination(prev=>({...prev,[reportId]:{...prev[reportId],currentPage:newPage}}));};const getPaginatedDiscrepancies=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};const startIndex=(pageInfo.currentPage-1)*pageInfo.itemsPerPage;const endIndex=startIndex+pageInfo.itemsPerPage;return discrepancies.slice(startIndex,endIndex);};const getTotalPages=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};return Math.ceil(discrepancies.length/pageInfo.itemsPerPage);};const downloadExcelReport=async report=>{const reportId=report.id;setDownloadingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}/excel`,{method:'GET',headers:{'Authorization':`Bearer ${token}`}});if(!response.ok){throw new Error(`Failed to download report: ${response.statusText}`);}// Get the blob data\nconst blob=await response.blob();// Create download link\nconst url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=`inventory-report-${report.date}-${reportId}.xlsx`;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error downloading Excel report:',error);alert(`Failed to download report: ${error.message}`);}finally{setDownloadingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const renderPagination=(discrepancies,reportId)=>{var _pagination$reportId;const totalPages=getTotalPages(discrepancies,reportId);const currentPage=((_pagination$reportId=pagination[reportId])===null||_pagination$reportId===void 0?void 0:_pagination$reportId.currentPage)||1;if(totalPages<=1)return null;const pages=[];const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);// Adjust start page if we're near the end\nif(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}return/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",style:{margin:'20px 0',display:'flex',justifyContent:'center',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage-1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"Previous\"}),Array.from({length:endPage-startPage+1},(_,i)=>startPage+i).map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,page),style:{padding:'8px 12px',border:'1px solid #ddd',background:page===currentPage?'#007bff':'white',color:page===currentPage?'white':'black',cursor:'pointer'},children:page},page)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage+1),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,totalPages),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Last\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'20px',fontSize:'14px',color:'#666'},children:[\"Page \",currentPage,\" of \",totalPages,\" (\",discrepancies.length,\" total discrepancies)\"]})]});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading reports...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"reports\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reports History (Last 30 Days)\"}),user&&user.role==='admin'&&reports.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:deleteAllReports,disabled:deletingAll,style:{padding:'10px 20px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingAll?'not-allowed':'pointer',fontSize:'14px',fontWeight:'bold',opacity:deletingAll?0.6:1},children:deletingAll?'🗑️ Deleting All...':`🗑️ Delete All Reports (${reports.length})`})]}),reports.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No reports available yet. Run your first comparison!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"reports-list\",children:reports.map((report,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"report-date\",children:report.date}),/*#__PURE__*/_jsxs(\"span\",{className:`discrepancies-badge ${report.total_discrepancies>0?'has-discrepancies':'no-discrepancies'}`,children:[report.total_discrepancies,\" discrepancies\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"report-time\",children:new Date(report.created_at).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadExcelReport(report),disabled:downloadingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:downloadingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:downloadingReports.has(report.id)?0.6:1},children:downloadingReports.has(report.id)?'📥 Downloading...':'📊 Download Excel'}),report.total_discrepancies>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleReportExpansion(report.id),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:expandedReports.has(report.id)?'▼ Hide Details':'▶ View Details'}),user&&user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteReport(report),disabled:deletingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:deletingReports.has(report.id)?0.6:1},children:deletingReports.has(report.id)?'🗑️ Deleting...':'🗑️ Delete'})]})]}),report.total_discrepancies>0&&expandedReports.has(report.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"report-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"discrepancies-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Inventory Discrepancies\"}),renderPagination(report.discrepancies,report.id),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',margin:'10px 0'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Brightpearl\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Infoplus\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Difference\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"% Diff\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:getPaginatedDiscrepancies(report.discrepancies,report.id).map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:itemIndex%2===0?'white':'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',fontWeight:'bold'},children:item.sku}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px'},children:item.productName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.brightpearl_stock}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.infoplus_stock}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right',color:item.difference<0?'red':'green',fontWeight:'bold'},children:[item.difference>0?'+':'',item.difference]}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.percentage_diff?`${item.percentage_diff}%`:'N/A'})]},itemIndex))})]}),renderPagination(report.discrepancies,report.id)]})})]},report.id||index))})]});}// Enhanced Users Component - Replace your existing Users component with this:\nfunction Users(_ref5){let{token,user}=_ref5;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[editingUser,setEditingUser]=useState(null);const[showAddUser,setShowAddUser]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);useEffect(()=>{if(user.role==='admin'){loadUsers();}},[user.role]);const loadUsers=async()=>{try{const response=await fetch(`${API_BASE}/users`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setUsers(data);}catch(error){console.error('Error loading users:',error);}finally{setLoading(false);}};const handleEditUser=userToEdit=>{setEditingUser({id:userToEdit.id,username:userToEdit.username,email:userToEdit.email||'',first_name:userToEdit.first_name||'',last_name:userToEdit.last_name||'',role:userToEdit.role,is_active:userToEdit.is_active,password:'',// Always start with empty password\nconfirmPassword:''});};const handleAddUser=()=>{setShowAddUser(true);setEditingUser({username:'',email:'',first_name:'',last_name:'',role:'user',is_active:true,password:'',confirmPassword:''});};const handleSaveUser=async e=>{e.preventDefault();setIsSubmitting(true);try{// Validation\nif(!editingUser.username.trim()){alert('Username is required');return;}if(!editingUser.email.trim()){alert('Email is required');return;}if(!editingUser.first_name.trim()){alert('First name is required');return;}if(!editingUser.last_name.trim()){alert('Last name is required');return;}// For new users, password is required\nif(showAddUser&&!editingUser.password){alert('Password is required for new users');return;}// If password is being changed, validate it\nif(editingUser.password){if(editingUser.password.length<6){alert('Password must be at least 6 characters long');return;}if(editingUser.password!==editingUser.confirmPassword){alert('Passwords do not match');return;}}const userData={username:editingUser.username.trim(),email:editingUser.email.trim(),first_name:editingUser.first_name.trim(),last_name:editingUser.last_name.trim(),role:editingUser.role,is_active:editingUser.is_active};// Only include password if it's being set\nif(editingUser.password){userData.password=editingUser.password;}const url=showAddUser?`${API_BASE}/users`:`${API_BASE}/users/${editingUser.id}`;const method=showAddUser?'POST':'PUT';const response=await fetch(url,{method:method,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();if(response.ok&&data.success){alert(showAddUser?'User created successfully!':'User updated successfully!');setEditingUser(null);setShowAddUser(false);await loadUsers();// Refresh the list\n}else{throw new Error(data.error||'Failed to save user');}}catch(error){console.error('Error saving user:',error);alert(`Error: ${error.message}`);}finally{setIsSubmitting(false);}};const handleDeleteUser=async userToDelete=>{if(userToDelete.id===user.id){alert('You cannot delete your own account');return;}const confirmMessage=`Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}try{const response=await fetch(`${API_BASE}/users/${userToDelete.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){alert('User deleted successfully');await loadUsers();}else{throw new Error(data.error||'Failed to delete user');}}catch(error){console.error('Error deleting user:',error);alert(`Error: ${error.message}`);}};const cancelEdit=()=>{setEditingUser(null);setShowAddUser(false);};if(user.role!=='admin'){return/*#__PURE__*/_jsx(\"div\",{children:\"Access denied. Admin privileges required.\"});}if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"users\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUser,style:{padding:'10px 20px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'14px',fontWeight:'bold'},children:\"\\u2795 Add New User\"})]}),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"user-form-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:showAddUser?'Add New User':`Edit User: ${editingUser.username}`}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.username,onChange:e=>setEditingUser({...editingUser,username:e.target.value}),required:true,disabled:!showAddUser// Username can't be changed for existing users\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editingUser.email,onChange:e=>setEditingUser({...editingUser,email:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.first_name,onChange:e=>setEditingUser({...editingUser,first_name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.last_name,onChange:e=>setEditingUser({...editingUser,last_name:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.role,onChange:e=>setEditingUser({...editingUser,role:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.is_active,onChange:e=>setEditingUser({...editingUser,is_active:e.target.value==='true'}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:showAddUser?'Password *':'New Password (leave blank to keep current)'}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.password,onChange:e=>setEditingUser({...editingUser,password:e.target.value}),required:showAddUser,minLength:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.confirmPassword,onChange:e=>setEditingUser({...editingUser,confirmPassword:e.target.value}),required:showAddUser||editingUser.password})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelEdit,disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#6c757d',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',marginRight:'10px'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:isSubmitting?'Saving...':showAddUser?'Create User':'Update User'})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users.map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-header\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[u.first_name,\" \",u.last_name]}),/*#__PURE__*/_jsx(\"span\",{className:`user-role ${u.role}`,children:u.role}),!u.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"user-status inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",u.username]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",u.email||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last login:\"}),\" \",u.last_login?new Date(u.last_login).toLocaleString():'Never']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(u.created_at).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditUser(u),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px',marginRight:'8px'},children:\"\\u270F\\uFE0F Edit\"}),u.id!==user.id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(u),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]},u.id))})]});}// Main App Component\nfunction App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[currentTab,setCurrentTab]=useState('dashboard');const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Check for existing authentication\nconst savedToken=localStorage.getItem('token');const savedUser=localStorage.getItem('user');if(savedToken&&savedUser){try{const userData=JSON.parse(savedUser);setToken(savedToken);setUser(userData);setIsAuthenticated(true);}catch(error){// If there's an error parsing the saved user data, clear it\nlocalStorage.removeItem('token');localStorage.removeItem('user');}}setIsLoading(false);},[]);const handleLogin=(userData,userToken)=>{setUser(userData);setToken(userToken);setIsAuthenticated(true);// Update localStorage with the new user data structure\nlocalStorage.setItem('user',JSON.stringify(userData));localStorage.setItem('token',userToken);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsAuthenticated(false);setUser(null);setToken(null);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user.first_name||user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn-logout\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{className:currentTab==='dashboard'?'active':'',onClick:()=>setCurrentTab('dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='settings'?'active':'',onClick:()=>setCurrentTab('settings'),children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='reports'?'active':'',onClick:()=>setCurrentTab('reports'),children:\"Reports\"}),user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{className:currentTab==='users'?'active':'',onClick:()=>setCurrentTab('users'),children:\"Users\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[currentTab==='dashboard'&&/*#__PURE__*/_jsx(Dashboard,{token:token}),currentTab==='settings'&&/*#__PURE__*/_jsx(Settings,{token:token,user:user}),currentTab==='reports'&&/*#__PURE__*/_jsx(Reports,{token:token,user:user}),currentTab==='users'&&/*#__PURE__*/_jsx(Users,{token:token,user:user})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","InvoiceDashboard","jsx","_jsx","jsxs","_jsxs","API_BASE","Login","_ref","onLogin","credentials","setCredentials","username","password","isLoading","setIsLoading","error","setError","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","user","className","children","onSubmit","type","value","onChange","target","required","autoComplete","disabled","Dashboard","_ref2","Settings","_ref3","settings","setSettings","loading","setLoading","saving","setSaving","orderStatuses","setOrderStatuses","loadingOrderStatuses","setLoadingOrderStatuses","defaultSettings","ignored_order_statuses","loadSettings","loadOrderStatuses","console","role","success","saveSettings","log","length","settingsToSave","status","alert","Error","constructor","name","message","updateSetting","key","prev","onClick","style","display","gridTemplateColumns","gap","margin","map","isIgnored","split","s","trim","includes","statusid","toString","alignItems","padding","border","borderRadius","backgroundColor","checked","statusIds","filter","push","index","indexOf","splice","join","marginRight","fontWeight","fontSize","color","fontStyle","background","marginTop","statusId","find","Reports","_ref4","reports","setReports","expandedReports","setExpandedReports","Set","pagination","setPagination","downloadingReports","setDownloadingReports","deletingReports","setDeletingReports","deletingAll","setDeletingAll","loadReports","parsedReports","report","discrepancies","parse","Array","isArray","id","initialPagination","forEach","currentPage","itemsPerPage","deleteReport","confirmMessage","date","window","confirm","reportId","add","r","newSet","delete","deleteAllReports","doubleConfirm","deletedCount","failedCount","totalReports","toggleReportExpansion","newExpanded","has","changePage","newPage","getPaginatedDiscrepancies","pageInfo","startIndex","endIndex","slice","getTotalPages","Math","ceil","downloadExcelReport","statusText","blob","url","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","renderPagination","_pagination$reportId","totalPages","pages","maxVisiblePages","startPage","max","floor","endPage","min","justifyContent","cursor","from","_","i","page","marginLeft","marginBottom","opacity","total_discrepancies","Date","created_at","toLocaleString","width","borderCollapse","textAlign","item","itemIndex","sku","productName","brightpearl_stock","infoplus_stock","difference","percentage_diff","Users","_ref5","users","setUsers","editingUser","setEditingUser","showAddUser","setShowAddUser","isSubmitting","setIsSubmitting","loadUsers","handleEditUser","userToEdit","email","first_name","last_name","is_active","confirmPassword","handleAddUser","handleSaveUser","userData","handleDeleteUser","userToDelete","cancelEdit","minLength","u","last_login","toLocaleDateString","App","isAuthenticated","setIsAuthenticated","setUser","setToken","currentTab","setCurrentTab","savedToken","getItem","savedUser","removeItem","handleLogin","userToken","handleLogout"],"sources":["/home/collegesportsdir/public_html/texon-invoicing-portal/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport InvoiceDashboard from './InvoiceDashboard';\nimport './InvoiceDashboard.css';\n\nconst API_BASE = '/texon-invoicing-portal/api';\n\n// Login Component\nfunction Login({ onLogin }) {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_BASE}/auth/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials)\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        onLogin(data.user, data.token);\n      } else {\n        setError(data.error || 'Login failed');\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h1>Texon Invoicing Portal</h1>\n        <p>Please log in to access the invoicing management system</p>\n        \n        {error && <div className=\"error-message\">{error}</div>}\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>Username:</label>\n            <input\n              type=\"text\"\n              value={credentials.username}\n              onChange={(e) => setCredentials({...credentials, username: e.target.value})}\n              required\n              autoComplete=\"username\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              value={credentials.password}\n              onChange={(e) => setCredentials({...credentials, password: e.target.value})}\n              required\n              autoComplete=\"current-password\"\n            />\n          </div>\n          \n          <button type=\"submit\" disabled={isLoading} className=\"btn-primary\">\n            {isLoading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        \n        <div className=\"login-help\">\n          <p><strong>Default Admin Credentials:</strong></p>\n          <p>Username: <code>admin</code></p>\n          <p>Password: <code>changeme123</code></p>\n          <small>⚠️ Change these after first login!</small>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard({ token }) {\n  return <InvoiceDashboard token={token} />;\n}\n\n// Enhanced Settings Component - Replace your existing Settings component with this:\n\nfunction Settings({ token, user }) {\n  const [settings, setSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [orderStatuses, setOrderStatuses] = useState([]);\n  const [loadingOrderStatuses, setLoadingOrderStatuses] = useState(false);\n\n  // Default settings structure - only what we need for this app\n  const defaultSettings = {\n    // Order Status Filter Settings\n    ignored_order_statuses: ''\n  };\n\n  useEffect(() => {\n    loadSettings();\n    loadOrderStatuses();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/settings`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Merge with defaults to ensure all settings exist\n      setSettings({ ...defaultSettings, ...data });\n    } catch (error) {\n      console.error('Error loading settings:', error);\n      setSettings(defaultSettings);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadOrderStatuses = async () => {\n    if (user.role !== 'admin') return;\n    \n    setLoadingOrderStatuses(true);\n    try {\n      const response = await fetch(`${API_BASE}/order-statuses`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      if (data.success) {\n        setOrderStatuses(data.data);\n      } else {\n        console.error('Error loading order statuses:', data.error);\n      }\n    } catch (error) {\n      console.error('Error loading order statuses:', error);\n    } finally {\n      setLoadingOrderStatuses(false);\n    }\n  };\n\n  const saveSettings = async () => {\n    setSaving(true);\n    try {\n      console.log('🔧 Saving settings:', settings);\n      console.log('🔧 Settings JSON length:', JSON.stringify(settings).length);\n      console.log('🔐 Using token:', token ? 'Present' : 'Missing');\n      console.log('🌐 API URL:', `${API_BASE}/settings`);\n      \n      // Only send the settings we actually want to save (not old cached ones)\n      const settingsToSave = {\n        ignored_order_statuses: settings.ignored_order_statuses || ''\n      };\n      \n      console.log('🔧 Filtered settings to save:', settingsToSave);\n      \n      const response = await fetch(`${API_BASE}/settings`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(settingsToSave)\n      });\n\n      console.log('📡 Response status:', response.status);\n      console.log('📡 Response ok:', response.ok);\n      \n      if (!response.ok) {\n        console.log('❌ Response not ok, status:', response.status);\n      }\n\n      const data = await response.json();\n      console.log('📨 Response data:', data);\n\n      if (response.ok && data.success) {\n        alert('Settings saved successfully!');\n      } else {\n        throw new Error(data.error || 'Failed to save settings');\n      }\n    } catch (error) {\n      console.error('❌ Error saving settings:', error);\n      console.log('❌ Error type:', error.constructor.name);\n      console.log('❌ Error message:', error.message);\n      alert(`Error saving settings: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const updateSetting = (key, value) => {\n    setSettings(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  if (user.role !== 'admin') {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <div className=\"access-denied\">\n          <p>⚠️ Admin access required to modify system settings.</p>\n          <p>Contact your system administrator if you need to change settings.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <p>Loading settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings\">\n      <div className=\"settings-header\">\n        <h2>Settings</h2>\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving...' : '💾 Save Settings'}\n        </button>\n      </div>\n\n      {/* Order Status Filter Settings */}\n      <div className=\"settings-section\">\n        <h3>📋 Order Status Filtering</h3>\n        <div className=\"setting-group\">\n          {loadingOrderStatuses ? (\n            <p>Loading order statuses...</p>\n          ) : (\n            <div className=\"setting-item\">\n              <label className=\"setting-label\">Ignored Order Statuses</label>\n              <div className=\"order-status-selection\">\n                {orderStatuses.length > 0 ? (\n                  <div className=\"checkbox-grid\" style={{\n                    display: 'grid', \n                    gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', \n                    gap: '10px', \n                    margin: '10px 0'\n                  }}>\n                    {orderStatuses.map((status) => {\n                      const isIgnored = settings.ignored_order_statuses ? \n                        settings.ignored_order_statuses.split(',').map(s => s.trim()).includes(status.statusid.toString()) : \n                        false;\n                      \n                      return (\n                        <label key={status.statusid} className=\"checkbox-item\" style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          padding: '8px',\n                          border: '1px solid #ddd',\n                          borderRadius: '4px',\n                          backgroundColor: isIgnored ? '#fff3cd' : 'white'\n                        }}>\n                          <input\n                            type=\"checkbox\"\n                            checked={isIgnored}\n                            onChange={(e) => {\n                              const statusIds = settings.ignored_order_statuses ? \n                                settings.ignored_order_statuses.split(',').map(s => s.trim()).filter(s => s) : \n                                [];\n                              \n                              if (e.target.checked) {\n                                statusIds.push(status.statusid.toString());\n                              } else {\n                                const index = statusIds.indexOf(status.statusid.toString());\n                                if (index > -1) statusIds.splice(index, 1);\n                              }\n                              \n                              updateSetting('ignored_order_statuses', statusIds.join(','));\n                            }}\n                            style={{ marginRight: '8px' }}\n                          />\n                          <div>\n                            <div style={{ fontWeight: 'bold' }}>{status.name}</div>\n                            <div style={{ fontSize: '0.9em', color: '#666' }}>ID: {status.statusid}</div>\n                          </div>\n                        </label>\n                      );\n                    })}\n                  </div>\n                ) : (\n                  <p style={{color: '#666', fontStyle: 'italic'}}>\n                    No order statuses found. Check your Brightpearl connection.\n                  </p>\n                )}\n              </div>\n              <p className=\"setting-description\">\n                Orders with the selected statuses will be excluded from all dashboard reporting. \n                This is useful to ignore orders in statuses like 'Quote', 'On Hold', or 'Cancelled' \n                that shouldn't be included in revenue calculations.\n              </p>\n              {settings.ignored_order_statuses && settings.ignored_order_statuses.trim() && (\n                <div className=\"ignored-statuses-preview\" style={{\n                  background: '#f8f9fa', \n                  padding: '15px', \n                  borderRadius: '6px', \n                  marginTop: '10px'\n                }}>\n                  <strong>Currently ignored order statuses:</strong>\n                  <div style={{marginTop: '8px'}}>\n                    {settings.ignored_order_statuses.split(',').map(statusId => {\n                      const status = orderStatuses.find(s => s.statusid.toString() === statusId.trim());\n                      return status ? (\n                        <span key={statusId.trim()} style={{\n                          display: 'inline-block',\n                          background: '#dc3545',\n                          color: 'white',\n                          padding: '4px 8px',\n                          borderRadius: '4px',\n                          margin: '2px',\n                          fontSize: '0.85em'\n                        }}>\n                          {status.name}\n                        </span>\n                      ) : null;\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Save Button at Bottom */}\n      <div className=\"settings-footer\">\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving Settings...' : '💾 Save Settings'}\n        </button>\n        <p className=\"save-note\">\n          Changes take effect immediately when you save.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Replace the Reports component in your client/src/App.js with this enhanced version:\n\nfunction Reports({ token, user }) {\n  const [reports, setReports] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedReports, setExpandedReports] = useState(new Set());\n  const [pagination, setPagination] = useState({}); // Track pagination for each report\n  const [downloadingReports, setDownloadingReports] = useState(new Set());\n  const [deletingReports, setDeletingReports] = useState(new Set());\n  const [deletingAll, setDeletingAll] = useState(false);\n\n  useEffect(() => {\n    loadReports();\n  }, []);\n\n  const loadReports = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/reports`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Parse discrepancies for each report\n      const parsedReports = data.map(report => ({\n        ...report,\n        discrepancies: (() => {\n          try {\n            if (typeof report.discrepancies === 'string') {\n              return JSON.parse(report.discrepancies);\n            } else if (Array.isArray(report.discrepancies)) {\n              return report.discrepancies;\n            } else {\n              return [];\n            }\n          } catch (e) {\n            console.error('Error parsing discrepancies for report:', report.id, e);\n            return [];\n          }\n        })()\n      }));\n      \n      setReports(parsedReports);\n      \n      // Initialize pagination for each report (start with page 1)\n      const initialPagination = {};\n      parsedReports.forEach(report => {\n        initialPagination[report.id] = { currentPage: 1, itemsPerPage: 25 };\n      });\n      setPagination(initialPagination);\n      \n    } catch (error) {\n      console.error('Error loading reports:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteReport = async (report) => {\n    const confirmMessage = `Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    const reportId = report.id;\n    setDeletingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        // Remove the report from the local state\n        setReports(prev => prev.filter(r => r.id !== reportId));\n        \n        // Also remove from expanded reports if it was expanded\n        setExpandedReports(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(reportId);\n          return newSet;\n        });\n\n        alert(`Report from ${report.date} has been deleted successfully.`);\n      } else {\n        throw new Error(data.error || 'Failed to delete report');\n      }\n    } catch (error) {\n      console.error('Error deleting report:', error);\n      alert(`Failed to delete report: ${error.message}`);\n    } finally {\n      setDeletingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const deleteAllReports = async () => {\n    if (reports.length === 0) {\n      alert('No reports to delete.');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    // Double confirmation for such a destructive action\n    const doubleConfirm = window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);\n    \n    if (!doubleConfirm) {\n      return;\n    }\n\n    setDeletingAll(true);\n\n    try {\n      let deletedCount = 0;\n      let failedCount = 0;\n      const totalReports = reports.length;\n\n      // Delete reports one by one to handle any individual failures\n      for (const report of reports) {\n        try {\n          const response = await fetch(`${API_BASE}/reports/${report.id}`, {\n            method: 'DELETE',\n            headers: { 'Authorization': `Bearer ${token}` }\n          });\n\n          const data = await response.json();\n\n          if (response.ok && data.success) {\n            deletedCount++;\n          } else {\n            failedCount++;\n            console.error(`Failed to delete report ${report.id}:`, data.error);\n          }\n        } catch (error) {\n          failedCount++;\n          console.error(`Error deleting report ${report.id}:`, error);\n        }\n      }\n\n      // Refresh the reports list\n      await loadReports();\n\n      // Show results\n      if (deletedCount === totalReports) {\n        alert(`Successfully deleted all ${deletedCount} reports.`);\n      } else if (deletedCount > 0) {\n        alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);\n      } else {\n        alert(`Failed to delete any reports. Please try again or contact support.`);\n      }\n\n    } catch (error) {\n      console.error('Error during bulk deletion:', error);\n      alert(`Error during deletion: ${error.message}`);\n      // Refresh the list to see current state\n      await loadReports();\n    } finally {\n      setDeletingAll(false);\n    }\n  };\n\n  const toggleReportExpansion = (reportId) => {\n    const newExpanded = new Set(expandedReports);\n    if (newExpanded.has(reportId)) {\n      newExpanded.delete(reportId);\n    } else {\n      newExpanded.add(reportId);\n    }\n    setExpandedReports(newExpanded);\n  };\n\n  const changePage = (reportId, newPage) => {\n    setPagination(prev => ({\n      ...prev,\n      [reportId]: {\n        ...prev[reportId],\n        currentPage: newPage\n      }\n    }));\n  };\n\n  const getPaginatedDiscrepancies = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    const startIndex = (pageInfo.currentPage - 1) * pageInfo.itemsPerPage;\n    const endIndex = startIndex + pageInfo.itemsPerPage;\n    return discrepancies.slice(startIndex, endIndex);\n  };\n\n  const getTotalPages = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    return Math.ceil(discrepancies.length / pageInfo.itemsPerPage);\n  };\n\n  const downloadExcelReport = async (report) => {\n    const reportId = report.id;\n    setDownloadingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}/excel`, {\n        method: 'GET',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to download report: ${response.statusText}`);\n      }\n\n      // Get the blob data\n      const blob = await response.blob();\n      \n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `inventory-report-${report.date}-${reportId}.xlsx`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n    } catch (error) {\n      console.error('Error downloading Excel report:', error);\n      alert(`Failed to download report: ${error.message}`);\n    } finally {\n      setDownloadingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const renderPagination = (discrepancies, reportId) => {\n    const totalPages = getTotalPages(discrepancies, reportId);\n    const currentPage = pagination[reportId]?.currentPage || 1;\n\n    if (totalPages <= 1) return null;\n\n    const pages = [];\n    const maxVisiblePages = 5;\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    // Adjust start page if we're near the end\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\n    }\n\n    return (\n      <div className=\"pagination\" style={{ margin: '20px 0', display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '10px' }}>\n        <button \n          onClick={() => changePage(reportId, 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          First\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, currentPage - 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          Previous\n        </button>\n\n        {Array.from({ length: endPage - startPage + 1 }, (_, i) => startPage + i).map(page => (\n          <button\n            key={page}\n            onClick={() => changePage(reportId, page)}\n            style={{\n              padding: '8px 12px',\n              border: '1px solid #ddd',\n              background: page === currentPage ? '#007bff' : 'white',\n              color: page === currentPage ? 'white' : 'black',\n              cursor: 'pointer'\n            }}\n          >\n            {page}\n          </button>\n        ))}\n\n        <button \n          onClick={() => changePage(reportId, currentPage + 1)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Next\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, totalPages)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Last\n        </button>\n\n        <span style={{ marginLeft: '20px', fontSize: '14px', color: '#666' }}>\n          Page {currentPage} of {totalPages} ({discrepancies.length} total discrepancies)\n        </span>\n      </div>\n    );\n  };\n\n  if (loading) {\n    return <div>Loading reports...</div>;\n  }\n\n  return (\n    <div className=\"reports\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>Reports History (Last 30 Days)</h2>\n        \n        {/* Delete All Reports Button - Only show for admin users and when there are reports */}\n        {user && user.role === 'admin' && reports.length > 0 && (\n          <button\n            onClick={deleteAllReports}\n            disabled={deletingAll}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: deletingAll ? 'not-allowed' : 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n              opacity: deletingAll ? 0.6 : 1\n            }}\n          >\n            {deletingAll ? '🗑️ Deleting All...' : `🗑️ Delete All Reports (${reports.length})`}\n          </button>\n        )}\n      </div>\n\n      {reports.length === 0 ? (\n        <p>No reports available yet. Run your first comparison!</p>\n      ) : (\n        <div className=\"reports-list\">\n          {reports.map((report, index) => (\n            <div key={report.id || index} className=\"report-card\">\n              <div className=\"report-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                  <span className=\"report-date\">{report.date}</span>\n                  <span className={`discrepancies-badge ${report.total_discrepancies > 0 ? 'has-discrepancies' : 'no-discrepancies'}`}>\n                    {report.total_discrepancies} discrepancies\n                  </span>\n                  <span className=\"report-time\">{new Date(report.created_at).toLocaleString()}</span>\n                </div>\n                \n                <div style={{ display: 'flex', gap: '8px' }}>\n                  <button\n                    onClick={() => downloadExcelReport(report)}\n                    disabled={downloadingReports.has(report.id)}\n                    style={{\n                      padding: '6px 12px',\n                      backgroundColor: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: downloadingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                      fontSize: '12px',\n                      opacity: downloadingReports.has(report.id) ? 0.6 : 1\n                    }}\n                  >\n                    {downloadingReports.has(report.id) ? '📥 Downloading...' : '📊 Download Excel'}\n                  </button>\n                  \n                  {report.total_discrepancies > 0 && (\n                    <button\n                      onClick={() => toggleReportExpansion(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#007bff',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '12px'\n                      }}\n                    >\n                      {expandedReports.has(report.id) ? '▼ Hide Details' : '▶ View Details'}\n                    </button>\n                  )}\n\n                  {/* Delete Individual Report Button - Only show for admin users */}\n                  {user && user.role === 'admin' && (\n                    <button\n                      onClick={() => deleteReport(report)}\n                      disabled={deletingReports.has(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#dc3545',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: deletingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                        fontSize: '12px',\n                        opacity: deletingReports.has(report.id) ? 0.6 : 1\n                      }}\n                    >\n                      {deletingReports.has(report.id) ? '🗑️ Deleting...' : '🗑️ Delete'}\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {report.total_discrepancies > 0 && expandedReports.has(report.id) && (\n                <div className=\"report-details\">\n                  <div className=\"discrepancies-summary\">\n                    <h4>Inventory Discrepancies</h4>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                    \n                    <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0' }}>\n                      <thead>\n                        <tr style={{ backgroundColor: '#f8f9fa' }}>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>SKU</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>Product</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Brightpearl</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Infoplus</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Difference</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>% Diff</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {getPaginatedDiscrepancies(report.discrepancies, report.id).map((item, itemIndex) => (\n                          <tr key={itemIndex} style={{ backgroundColor: itemIndex % 2 === 0 ? 'white' : '#f8f9fa' }}>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', fontWeight: 'bold' }}>{item.sku}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px' }}>{item.productName || 'N/A'}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.brightpearl_stock}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.infoplus_stock}</td>\n                            <td style={{ \n                              border: '1px solid #dee2e6', \n                              padding: '10px', \n                              textAlign: 'right',\n                              color: item.difference < 0 ? 'red' : 'green',\n                              fontWeight: 'bold'\n                            }}>\n                              {item.difference > 0 ? '+' : ''}{item.difference}\n                            </td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>\n                              {item.percentage_diff ? `${item.percentage_diff}%` : 'N/A'}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Enhanced Users Component - Replace your existing Users component with this:\n\nfunction Users({ token, user }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingUser, setEditingUser] = useState(null);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (user.role === 'admin') {\n      loadUsers();\n    }\n  }, [user.role]);\n\n  const loadUsers = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/users`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      setUsers(data);\n    } catch (error) {\n      console.error('Error loading users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditUser = (userToEdit) => {\n    setEditingUser({\n      id: userToEdit.id,\n      username: userToEdit.username,\n      email: userToEdit.email || '',\n      first_name: userToEdit.first_name || '',\n      last_name: userToEdit.last_name || '',\n      role: userToEdit.role,\n      is_active: userToEdit.is_active,\n      password: '', // Always start with empty password\n      confirmPassword: ''\n    });\n  };\n\n  const handleAddUser = () => {\n    setShowAddUser(true);\n    setEditingUser({\n      username: '',\n      email: '',\n      first_name: '',\n      last_name: '',\n      role: 'user',\n      is_active: true,\n      password: '',\n      confirmPassword: ''\n    });\n  };\n\n  const handleSaveUser = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      // Validation\n      if (!editingUser.username.trim()) {\n        alert('Username is required');\n        return;\n      }\n\n      if (!editingUser.email.trim()) {\n        alert('Email is required');\n        return;\n      }\n\n      if (!editingUser.first_name.trim()) {\n        alert('First name is required');\n        return;\n      }\n\n      if (!editingUser.last_name.trim()) {\n        alert('Last name is required');\n        return;\n      }\n\n      // For new users, password is required\n      if (showAddUser && !editingUser.password) {\n        alert('Password is required for new users');\n        return;\n      }\n\n      // If password is being changed, validate it\n      if (editingUser.password) {\n        if (editingUser.password.length < 6) {\n          alert('Password must be at least 6 characters long');\n          return;\n        }\n\n        if (editingUser.password !== editingUser.confirmPassword) {\n          alert('Passwords do not match');\n          return;\n        }\n      }\n\n      const userData = {\n        username: editingUser.username.trim(),\n        email: editingUser.email.trim(),\n        first_name: editingUser.first_name.trim(),\n        last_name: editingUser.last_name.trim(),\n        role: editingUser.role,\n        is_active: editingUser.is_active\n      };\n\n      // Only include password if it's being set\n      if (editingUser.password) {\n        userData.password = editingUser.password;\n      }\n\n      const url = showAddUser \n        ? `${API_BASE}/users`\n        : `${API_BASE}/users/${editingUser.id}`;\n      \n      const method = showAddUser ? 'POST' : 'PUT';\n\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert(showAddUser ? 'User created successfully!' : 'User updated successfully!');\n        setEditingUser(null);\n        setShowAddUser(false);\n        await loadUsers(); // Refresh the list\n      } else {\n        throw new Error(data.error || 'Failed to save user');\n      }\n    } catch (error) {\n      console.error('Error saving user:', error);\n      alert(`Error: ${error.message}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteUser = async (userToDelete) => {\n    if (userToDelete.id === user.id) {\n      alert('You cannot delete your own account');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`${API_BASE}/users/${userToDelete.id}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('User deleted successfully');\n        await loadUsers();\n      } else {\n        throw new Error(data.error || 'Failed to delete user');\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert(`Error: ${error.message}`);\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setShowAddUser(false);\n  };\n\n  if (user.role !== 'admin') {\n    return <div>Access denied. Admin privileges required.</div>;\n  }\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <div className=\"users\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>User Management</h2>\n        <button\n          onClick={handleAddUser}\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#28a745',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: 'bold'\n          }}\n        >\n          ➕ Add New User\n        </button>\n      </div>\n\n      {/* Edit/Add User Form */}\n      {editingUser && (\n        <div className=\"user-form-overlay\">\n          <div className=\"user-form\">\n            <h3>{showAddUser ? 'Add New User' : `Edit User: ${editingUser.username}`}</h3>\n            \n            <form onSubmit={handleSaveUser}>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Username *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.username}\n                    onChange={(e) => setEditingUser({...editingUser, username: e.target.value})}\n                    required\n                    disabled={!showAddUser} // Username can't be changed for existing users\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Email *</label>\n                  <input\n                    type=\"email\"\n                    value={editingUser.email}\n                    onChange={(e) => setEditingUser({...editingUser, email: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>First Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.first_name}\n                    onChange={(e) => setEditingUser({...editingUser, first_name: e.target.value})}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Last Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.last_name}\n                    onChange={(e) => setEditingUser({...editingUser, last_name: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Role</label>\n                  <select\n                    value={editingUser.role}\n                    onChange={(e) => setEditingUser({...editingUser, role: e.target.value})}\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Status</label>\n                  <select\n                    value={editingUser.is_active}\n                    onChange={(e) => setEditingUser({...editingUser, is_active: e.target.value === 'true'})}\n                  >\n                    <option value=\"true\">Active</option>\n                    <option value=\"false\">Inactive</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>{showAddUser ? 'Password *' : 'New Password (leave blank to keep current)'}</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.password}\n                    onChange={(e) => setEditingUser({...editingUser, password: e.target.value})}\n                    required={showAddUser}\n                    minLength=\"6\"\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Confirm Password</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.confirmPassword}\n                    onChange={(e) => setEditingUser({...editingUser, confirmPassword: e.target.value})}\n                    required={showAddUser || editingUser.password}\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-actions\">\n                <button\n                  type=\"button\"\n                  onClick={cancelEdit}\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#6c757d',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    marginRight: '10px'\n                  }}\n                >\n                  Cancel\n                </button>\n                \n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#007bff',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  {isSubmitting ? 'Saving...' : (showAddUser ? 'Create User' : 'Update User')}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Users List */}\n      <div className=\"users-list\">\n        {users.map(u => (\n          <div key={u.id} className=\"user-card\">\n            <div className=\"user-info\">\n              <div className=\"user-header\">\n                <strong>{u.first_name} {u.last_name}</strong>\n                <span className={`user-role ${u.role}`}>{u.role}</span>\n                {!u.is_active && <span className=\"user-status inactive\">Inactive</span>}\n              </div>\n              \n              <div className=\"user-details\">\n                <div><strong>Username:</strong> {u.username}</div>\n                <div><strong>Email:</strong> {u.email || 'Not set'}</div>\n                <div><strong>Last login:</strong> {u.last_login ? new Date(u.last_login).toLocaleString() : 'Never'}</div>\n                <div><strong>Created:</strong> {new Date(u.created_at).toLocaleDateString()}</div>\n              </div>\n            </div>\n            \n            <div className=\"user-actions\">\n              <button\n                onClick={() => handleEditUser(u)}\n                style={{\n                  padding: '6px 12px',\n                  backgroundColor: '#007bff',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  marginRight: '8px'\n                }}\n              >\n                ✏️ Edit\n              </button>\n              \n              {u.id !== user.id && (\n                <button\n                  onClick={() => handleDeleteUser(u)}\n                  style={{\n                    padding: '6px 12px',\n                    backgroundColor: '#dc3545',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                >\n                  🗑️ Delete\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// Main App Component\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [currentTab, setCurrentTab] = useState('dashboard');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing authentication\n    const savedToken = localStorage.getItem('token');\n    const savedUser = localStorage.getItem('user');\n    \n    if (savedToken && savedUser) {\n      try {\n        const userData = JSON.parse(savedUser);\n        setToken(savedToken);\n        setUser(userData);\n        setIsAuthenticated(true);\n      } catch (error) {\n        // If there's an error parsing the saved user data, clear it\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    \n    setIsLoading(false);\n  }, []);\n\n  const handleLogin = (userData, userToken) => {\n    setUser(userData);\n    setToken(userToken);\n    setIsAuthenticated(true);\n    \n    // Update localStorage with the new user data structure\n    localStorage.setItem('user', JSON.stringify(userData));\n    localStorage.setItem('token', userToken);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsAuthenticated(false);\n    setUser(null);\n    setToken(null);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading\">\n          Loading...\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"app-header\">\n        <div className=\"header-content\">\n          <h1>Texon Invoicing Portal</h1>\n          <div className=\"user-info\">\n            <span>Welcome, {user.first_name || user.username}</span>\n            <button onClick={handleLogout} className=\"btn-logout\">\n              Logout\n            </button>\n          </div>\n        </div>\n        <nav>\n          <button \n            className={currentTab === 'dashboard' ? 'active' : ''} \n            onClick={() => setCurrentTab('dashboard')}\n          >\n            Dashboard\n          </button>\n          <button \n            className={currentTab === 'settings' ? 'active' : ''} \n            onClick={() => setCurrentTab('settings')}\n          >\n            Settings\n          </button>\n          <button \n            className={currentTab === 'reports' ? 'active' : ''} \n            onClick={() => setCurrentTab('reports')}\n          >\n            Reports\n          </button>\n          {user.role === 'admin' && (\n            <button \n              className={currentTab === 'users' ? 'active' : ''} \n              onClick={() => setCurrentTab('users')}\n            >\n              Users\n            </button>\n          )}\n        </nav>\n      </header>\n\n      <main className=\"main-content\">\n        {currentTab === 'dashboard' && <Dashboard token={token} />}\n        {currentTab === 'settings' && <Settings token={token} user={user} />}\n        {currentTab === 'reports' && <Reports token={token} user={user} />}\n        {currentTab === 'users' && <Users token={token} user={user} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,WAAW,CAClB,MAAO,CAAAC,gBAAgB,KAAM,oBAAoB,CACjD,MAAO,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhC,KAAM,CAAAC,QAAQ,CAAG,6BAA6B,CAE9C;AACA,QAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAc,IAAb,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACxB,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGZ,QAAQ,CAAC,CAAEa,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAC9E,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAmB,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBL,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF,KAAM,CAAAI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,aAAa,CAAE,CACrDiB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACjB,WAAW,CAClC,CAAC,CAAC,CAEF,KAAM,CAAAkB,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,CAAE,CACfC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEJ,IAAI,CAACK,KAAK,CAAC,CACzCF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEN,IAAI,CAACC,SAAS,CAACC,IAAI,CAACM,IAAI,CAAC,CAAC,CACvDzB,OAAO,CAACmB,IAAI,CAACM,IAAI,CAAEN,IAAI,CAACK,KAAK,CAAC,CAChC,CAAC,IAAM,CACLhB,QAAQ,CAACW,IAAI,CAACZ,KAAK,EAAI,cAAc,CAAC,CACxC,CACF,CAAE,MAAOA,KAAK,CAAE,CACdC,QAAQ,CAAC,kCAAkC,CAAC,CAC9C,CAEAF,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAED,mBACEZ,IAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,cAC9B/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,OAAAiC,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/BjC,IAAA,MAAAiC,QAAA,CAAG,yDAAuD,CAAG,CAAC,CAE7DpB,KAAK,eAAIb,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEpB,KAAK,CAAM,CAAC,cAEtDX,KAAA,SAAMgC,QAAQ,CAAEnB,YAAa,CAAAkB,QAAA,eAC3B/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE7B,WAAW,CAACE,QAAS,CAC5B4B,QAAQ,CAAGrB,CAAC,EAAKR,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEE,QAAQ,CAAEO,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC5EG,QAAQ,MACRC,YAAY,CAAC,UAAU,CACxB,CAAC,EACC,CAAC,cAENtC,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,WAAS,CAAO,CAAC,cACxBjC,IAAA,UACEmC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAE7B,WAAW,CAACG,QAAS,CAC5B2B,QAAQ,CAAGrB,CAAC,EAAKR,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEG,QAAQ,CAAEM,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC5EG,QAAQ,MACRC,YAAY,CAAC,kBAAkB,CAChC,CAAC,EACC,CAAC,cAENxC,IAAA,WAAQmC,IAAI,CAAC,QAAQ,CAACM,QAAQ,CAAE9B,SAAU,CAACqB,SAAS,CAAC,aAAa,CAAAC,QAAA,CAC/DtB,SAAS,CAAG,eAAe,CAAG,OAAO,CAChC,CAAC,EACL,CAAC,cAEPT,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,MAAAiC,QAAA,cAAGjC,IAAA,WAAAiC,QAAA,CAAQ,4BAA0B,CAAQ,CAAC,CAAG,CAAC,cAClD/B,KAAA,MAAA+B,QAAA,EAAG,YAAU,cAAAjC,IAAA,SAAAiC,QAAA,CAAM,OAAK,CAAM,CAAC,EAAG,CAAC,cACnC/B,KAAA,MAAA+B,QAAA,EAAG,YAAU,cAAAjC,IAAA,SAAAiC,QAAA,CAAM,aAAW,CAAM,CAAC,EAAG,CAAC,cACzCjC,IAAA,UAAAiC,QAAA,CAAO,8CAAkC,CAAO,CAAC,EAC9C,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAAS,SAASA,CAAAC,KAAA,CAAY,IAAX,CAAEb,KAAM,CAAC,CAAAa,KAAA,CAC1B,mBAAO3C,IAAA,CAACF,gBAAgB,EAACgC,KAAK,CAAEA,KAAM,CAAE,CAAC,CAC3C,CAEA;AAEA,QAAS,CAAAc,QAAQA,CAAAC,KAAA,CAAkB,IAAjB,CAAEf,KAAK,CAAEC,IAAK,CAAC,CAAAc,KAAA,CAC/B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGnD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACoD,OAAO,CAAEC,UAAU,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACsD,MAAM,CAAEC,SAAS,CAAC,CAAGvD,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACwD,aAAa,CAAEC,gBAAgB,CAAC,CAAGzD,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAC0D,oBAAoB,CAAEC,uBAAuB,CAAC,CAAG3D,QAAQ,CAAC,KAAK,CAAC,CAEvE;AACA,KAAM,CAAA4D,eAAe,CAAG,CACtB;AACAC,sBAAsB,CAAE,EAC1B,CAAC,CAED5D,SAAS,CAAC,IAAM,CACd6D,YAAY,CAAC,CAAC,CACdC,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAD,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAxC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,WAAW,CAAE,CACnDkB,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CACF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC;AACAqB,WAAW,CAAC,CAAE,GAAGS,eAAe,CAAE,GAAG/B,IAAK,CAAC,CAAC,CAC9C,CAAE,MAAOZ,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CkC,WAAW,CAACS,eAAe,CAAC,CAC9B,CAAC,OAAS,CACRP,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAU,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI5B,IAAI,CAAC8B,IAAI,GAAK,OAAO,CAAE,OAE3BN,uBAAuB,CAAC,IAAI,CAAC,CAC7B,GAAI,CACF,KAAM,CAAArC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,iBAAiB,CAAE,CACzDkB,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CACF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACqC,OAAO,CAAE,CAChBT,gBAAgB,CAAC5B,IAAI,CAACA,IAAI,CAAC,CAC7B,CAAC,IAAM,CACLmC,OAAO,CAAC/C,KAAK,CAAC,+BAA+B,CAAEY,IAAI,CAACZ,KAAK,CAAC,CAC5D,CACF,CAAE,MAAOA,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,+BAA+B,CAAEA,KAAK,CAAC,CACvD,CAAC,OAAS,CACR0C,uBAAuB,CAAC,KAAK,CAAC,CAChC,CACF,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/BZ,SAAS,CAAC,IAAI,CAAC,CACf,GAAI,CACFS,OAAO,CAACI,GAAG,CAAC,qBAAqB,CAAElB,QAAQ,CAAC,CAC5Cc,OAAO,CAACI,GAAG,CAAC,0BAA0B,CAAEzC,IAAI,CAACC,SAAS,CAACsB,QAAQ,CAAC,CAACmB,MAAM,CAAC,CACxEL,OAAO,CAACI,GAAG,CAAC,iBAAiB,CAAElC,KAAK,CAAG,SAAS,CAAG,SAAS,CAAC,CAC7D8B,OAAO,CAACI,GAAG,CAAC,aAAa,CAAE,GAAG7D,QAAQ,WAAW,CAAC,CAElD;AACA,KAAM,CAAA+D,cAAc,CAAG,CACrBT,sBAAsB,CAAEX,QAAQ,CAACW,sBAAsB,EAAI,EAC7D,CAAC,CAEDG,OAAO,CAACI,GAAG,CAAC,+BAA+B,CAAEE,cAAc,CAAC,CAE5D,KAAM,CAAAhD,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,WAAW,CAAE,CACnDiB,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUS,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CAAC,CACDR,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC0C,cAAc,CACrC,CAAC,CAAC,CAEFN,OAAO,CAACI,GAAG,CAAC,qBAAqB,CAAE9C,QAAQ,CAACiD,MAAM,CAAC,CACnDP,OAAO,CAACI,GAAG,CAAC,iBAAiB,CAAE9C,QAAQ,CAACS,EAAE,CAAC,CAE3C,GAAI,CAACT,QAAQ,CAACS,EAAE,CAAE,CAChBiC,OAAO,CAACI,GAAG,CAAC,4BAA4B,CAAE9C,QAAQ,CAACiD,MAAM,CAAC,CAC5D,CAEA,KAAM,CAAA1C,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCkC,OAAO,CAACI,GAAG,CAAC,mBAAmB,CAAEvC,IAAI,CAAC,CAEtC,GAAIP,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACqC,OAAO,CAAE,CAC/BM,KAAK,CAAC,8BAA8B,CAAC,CACvC,CAAC,IAAM,CACL,KAAM,IAAI,CAAAC,KAAK,CAAC5C,IAAI,CAACZ,KAAK,EAAI,yBAAyB,CAAC,CAC1D,CACF,CAAE,MAAOA,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD+C,OAAO,CAACI,GAAG,CAAC,eAAe,CAAEnD,KAAK,CAACyD,WAAW,CAACC,IAAI,CAAC,CACpDX,OAAO,CAACI,GAAG,CAAC,kBAAkB,CAAEnD,KAAK,CAAC2D,OAAO,CAAC,CAC9CJ,KAAK,CAAC,0BAA0BvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CAClD,CAAC,OAAS,CACRrB,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,KAAM,CAAAsB,aAAa,CAAGA,CAACC,GAAG,CAAEtC,KAAK,GAAK,CACpCW,WAAW,CAAC4B,IAAI,GAAK,CACnB,GAAGA,IAAI,CACP,CAACD,GAAG,EAAGtC,KACT,CAAC,CAAC,CAAC,CACL,CAAC,CAED,GAAIL,IAAI,CAAC8B,IAAI,GAAK,OAAO,CAAE,CACzB,mBACE3D,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBjC,IAAA,OAAAiC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjB/B,KAAA,QAAK8B,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BjC,IAAA,MAAAiC,QAAA,CAAG,+DAAmD,CAAG,CAAC,cAC1DjC,IAAA,MAAAiC,QAAA,CAAG,mEAAiE,CAAG,CAAC,EACrE,CAAC,EACH,CAAC,CAEV,CAEA,GAAIe,OAAO,CAAE,CACX,mBACE9C,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvBjC,IAAA,OAAAiC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBjC,IAAA,MAAAiC,QAAA,CAAG,qBAAmB,CAAG,CAAC,EACvB,CAAC,CAEV,CAEA,mBACE/B,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB/B,KAAA,QAAK8B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BjC,IAAA,OAAAiC,QAAA,CAAI,UAAQ,CAAI,CAAC,cACjBjC,IAAA,WACE4E,OAAO,CAAEb,YAAa,CACtBtB,QAAQ,CAAES,MAAO,CACjBlB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAExCiB,MAAM,CAAG,WAAW,CAAG,kBAAkB,CACpC,CAAC,EACN,CAAC,cAGNhD,KAAA,QAAK8B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BjC,IAAA,OAAAiC,QAAA,CAAI,qCAAyB,CAAI,CAAC,cAClCjC,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BqB,oBAAoB,cACnBtD,IAAA,MAAAiC,QAAA,CAAG,2BAAyB,CAAG,CAAC,cAEhC/B,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjC,IAAA,UAAOgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,wBAAsB,CAAO,CAAC,cAC/DjC,IAAA,QAAKgC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,CACpCmB,aAAa,CAACa,MAAM,CAAG,CAAC,cACvBjE,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAC6C,KAAK,CAAE,CACpCC,OAAO,CAAE,MAAM,CACfC,mBAAmB,CAAE,sCAAsC,CAC3DC,GAAG,CAAE,MAAM,CACXC,MAAM,CAAE,QACV,CAAE,CAAAhD,QAAA,CACCmB,aAAa,CAAC8B,GAAG,CAAEf,MAAM,EAAK,CAC7B,KAAM,CAAAgB,SAAS,CAAGrC,QAAQ,CAACW,sBAAsB,CAC/CX,QAAQ,CAACW,sBAAsB,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAACF,GAAG,CAACG,CAAC,EAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACpB,MAAM,CAACqB,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC,CAClG,KAAK,CAEP,mBACEvF,KAAA,UAA6B8B,SAAS,CAAC,eAAe,CAAC6C,KAAK,CAAE,CAC5DC,OAAO,CAAE,MAAM,CACfY,UAAU,CAAE,QAAQ,CACpBC,OAAO,CAAE,KAAK,CACdC,MAAM,CAAE,gBAAgB,CACxBC,YAAY,CAAE,KAAK,CACnBC,eAAe,CAAEX,SAAS,CAAG,SAAS,CAAG,OAC3C,CAAE,CAAAlD,QAAA,eACAjC,IAAA,UACEmC,IAAI,CAAC,UAAU,CACf4D,OAAO,CAAEZ,SAAU,CACnB9C,QAAQ,CAAGrB,CAAC,EAAK,CACf,KAAM,CAAAgF,SAAS,CAAGlD,QAAQ,CAACW,sBAAsB,CAC/CX,QAAQ,CAACW,sBAAsB,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAACF,GAAG,CAACG,CAAC,EAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACW,MAAM,CAACZ,CAAC,EAAIA,CAAC,CAAC,CAC5E,EAAE,CAEJ,GAAIrE,CAAC,CAACsB,MAAM,CAACyD,OAAO,CAAE,CACpBC,SAAS,CAACE,IAAI,CAAC/B,MAAM,CAACqB,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC,CAC5C,CAAC,IAAM,CACL,KAAM,CAAAU,KAAK,CAAGH,SAAS,CAACI,OAAO,CAACjC,MAAM,CAACqB,QAAQ,CAACC,QAAQ,CAAC,CAAC,CAAC,CAC3D,GAAIU,KAAK,CAAG,CAAC,CAAC,CAAEH,SAAS,CAACK,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,CAC5C,CAEA1B,aAAa,CAAC,wBAAwB,CAAEuB,SAAS,CAACM,IAAI,CAAC,GAAG,CAAC,CAAC,CAC9D,CAAE,CACFzB,KAAK,CAAE,CAAE0B,WAAW,CAAE,KAAM,CAAE,CAC/B,CAAC,cACFrG,KAAA,QAAA+B,QAAA,eACEjC,IAAA,QAAK6E,KAAK,CAAE,CAAE2B,UAAU,CAAE,MAAO,CAAE,CAAAvE,QAAA,CAAEkC,MAAM,CAACI,IAAI,CAAM,CAAC,cACvDrE,KAAA,QAAK2E,KAAK,CAAE,CAAE4B,QAAQ,CAAE,OAAO,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAzE,QAAA,EAAC,MAAI,CAACkC,MAAM,CAACqB,QAAQ,EAAM,CAAC,EAC1E,CAAC,GA9BIrB,MAAM,CAACqB,QA+BZ,CAAC,CAEZ,CAAC,CAAC,CACC,CAAC,cAENxF,IAAA,MAAG6E,KAAK,CAAE,CAAC6B,KAAK,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAQ,CAAE,CAAA1E,QAAA,CAAC,6DAEhD,CAAG,CACJ,CACE,CAAC,cACNjC,IAAA,MAAGgC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,0NAInC,CAAG,CAAC,CACHa,QAAQ,CAACW,sBAAsB,EAAIX,QAAQ,CAACW,sBAAsB,CAAC6B,IAAI,CAAC,CAAC,eACxEpF,KAAA,QAAK8B,SAAS,CAAC,0BAA0B,CAAC6C,KAAK,CAAE,CAC/C+B,UAAU,CAAE,SAAS,CACrBjB,OAAO,CAAE,MAAM,CACfE,YAAY,CAAE,KAAK,CACnBgB,SAAS,CAAE,MACb,CAAE,CAAA5E,QAAA,eACAjC,IAAA,WAAAiC,QAAA,CAAQ,mCAAiC,CAAQ,CAAC,cAClDjC,IAAA,QAAK6E,KAAK,CAAE,CAACgC,SAAS,CAAE,KAAK,CAAE,CAAA5E,QAAA,CAC5Ba,QAAQ,CAACW,sBAAsB,CAAC2B,KAAK,CAAC,GAAG,CAAC,CAACF,GAAG,CAAC4B,QAAQ,EAAI,CAC1D,KAAM,CAAA3C,MAAM,CAAGf,aAAa,CAAC2D,IAAI,CAAC1B,CAAC,EAAIA,CAAC,CAACG,QAAQ,CAACC,QAAQ,CAAC,CAAC,GAAKqB,QAAQ,CAACxB,IAAI,CAAC,CAAC,CAAC,CACjF,MAAO,CAAAnB,MAAM,cACXnE,IAAA,SAA4B6E,KAAK,CAAE,CACjCC,OAAO,CAAE,cAAc,CACvB8B,UAAU,CAAE,SAAS,CACrBF,KAAK,CAAE,OAAO,CACdf,OAAO,CAAE,SAAS,CAClBE,YAAY,CAAE,KAAK,CACnBZ,MAAM,CAAE,KAAK,CACbwB,QAAQ,CAAE,QACZ,CAAE,CAAAxE,QAAA,CACCkC,MAAM,CAACI,IAAI,EATHuC,QAAQ,CAACxB,IAAI,CAAC,CAUnB,CAAC,CACL,IAAI,CACV,CAAC,CAAC,CACC,CAAC,EACH,CACN,EACE,CACN,CACE,CAAC,EACH,CAAC,cAGNpF,KAAA,QAAK8B,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BjC,IAAA,WACE4E,OAAO,CAAEb,YAAa,CACtBtB,QAAQ,CAAES,MAAO,CACjBlB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAExCiB,MAAM,CAAG,oBAAoB,CAAG,kBAAkB,CAC7C,CAAC,cACTlD,IAAA,MAAGgC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAC,gDAEzB,CAAG,CAAC,EACD,CAAC,EACH,CAAC,CAEV,CAEA;AAEA,QAAS,CAAA+E,OAAOA,CAAAC,KAAA,CAAkB,IAAjB,CAAEnF,KAAK,CAAEC,IAAK,CAAC,CAAAkF,KAAA,CAC9B,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGvH,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACoD,OAAO,CAAEC,UAAU,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACwH,eAAe,CAAEC,kBAAkB,CAAC,CAAGzH,QAAQ,CAAC,GAAI,CAAA0H,GAAG,CAAC,CAAC,CAAC,CACjE,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAG5H,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAClD,KAAM,CAAC6H,kBAAkB,CAAEC,qBAAqB,CAAC,CAAG9H,QAAQ,CAAC,GAAI,CAAA0H,GAAG,CAAC,CAAC,CAAC,CACvE,KAAM,CAACK,eAAe,CAAEC,kBAAkB,CAAC,CAAGhI,QAAQ,CAAC,GAAI,CAAA0H,GAAG,CAAC,CAAC,CAAC,CACjE,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGlI,QAAQ,CAAC,KAAK,CAAC,CAErDC,SAAS,CAAC,IAAM,CACdkI,WAAW,CAAC,CAAC,CACf,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAA7G,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,UAAU,CAAE,CAClDkB,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CACF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC;AACA,KAAM,CAAAsG,aAAa,CAAGvG,IAAI,CAACyD,GAAG,CAAC+C,MAAM,GAAK,CACxC,GAAGA,MAAM,CACTC,aAAa,CAAE,CAAC,IAAM,CACpB,GAAI,CACF,GAAI,MAAO,CAAAD,MAAM,CAACC,aAAa,GAAK,QAAQ,CAAE,CAC5C,MAAO,CAAA3G,IAAI,CAAC4G,KAAK,CAACF,MAAM,CAACC,aAAa,CAAC,CACzC,CAAC,IAAM,IAAIE,KAAK,CAACC,OAAO,CAACJ,MAAM,CAACC,aAAa,CAAC,CAAE,CAC9C,MAAO,CAAAD,MAAM,CAACC,aAAa,CAC7B,CAAC,IAAM,CACL,MAAO,EAAE,CACX,CACF,CAAE,MAAOlH,CAAC,CAAE,CACV4C,OAAO,CAAC/C,KAAK,CAAC,yCAAyC,CAAEoH,MAAM,CAACK,EAAE,CAAEtH,CAAC,CAAC,CACtE,MAAO,EAAE,CACX,CACF,CAAC,EAAE,CACL,CAAC,CAAC,CAAC,CAEHmG,UAAU,CAACa,aAAa,CAAC,CAEzB;AACA,KAAM,CAAAO,iBAAiB,CAAG,CAAC,CAAC,CAC5BP,aAAa,CAACQ,OAAO,CAACP,MAAM,EAAI,CAC9BM,iBAAiB,CAACN,MAAM,CAACK,EAAE,CAAC,CAAG,CAAEG,WAAW,CAAE,CAAC,CAAEC,YAAY,CAAE,EAAG,CAAC,CACrE,CAAC,CAAC,CACFlB,aAAa,CAACe,iBAAiB,CAAC,CAElC,CAAE,MAAO1H,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAChD,CAAC,OAAS,CACRoC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAA0F,YAAY,CAAG,KAAO,CAAAV,MAAM,EAAK,CACrC,KAAM,CAAAW,cAAc,CAAG,mDAAmDX,MAAM,CAACY,IAAI,oCAAoC,CAEzH,GAAI,CAACC,MAAM,CAACC,OAAO,CAACH,cAAc,CAAC,CAAE,CACnC,OACF,CAEA,KAAM,CAAAI,QAAQ,CAAGf,MAAM,CAACK,EAAE,CAC1BV,kBAAkB,CAACjD,IAAI,EAAI,GAAI,CAAA2C,GAAG,CAAC3C,IAAI,CAAC,CAACsE,GAAG,CAACD,QAAQ,CAAC,CAAC,CAEvD,GAAI,CACF,KAAM,CAAA9H,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,YAAY6I,QAAQ,EAAE,CAAE,CAC9D5H,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACqC,OAAO,CAAE,CAC/B;AACAqD,UAAU,CAACxC,IAAI,EAAIA,IAAI,CAACsB,MAAM,CAACiD,CAAC,EAAIA,CAAC,CAACZ,EAAE,GAAKU,QAAQ,CAAC,CAAC,CAEvD;AACA3B,kBAAkB,CAAC1C,IAAI,EAAI,CACzB,KAAM,CAAAwE,MAAM,CAAG,GAAI,CAAA7B,GAAG,CAAC3C,IAAI,CAAC,CAC5BwE,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAAC,CACvB,MAAO,CAAAG,MAAM,CACf,CAAC,CAAC,CAEF/E,KAAK,CAAC,eAAe6D,MAAM,CAACY,IAAI,iCAAiC,CAAC,CACpE,CAAC,IAAM,CACL,KAAM,IAAI,CAAAxE,KAAK,CAAC5C,IAAI,CAACZ,KAAK,EAAI,yBAAyB,CAAC,CAC1D,CACF,CAAE,MAAOA,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CuD,KAAK,CAAC,4BAA4BvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CACpD,CAAC,OAAS,CACRoD,kBAAkB,CAACjD,IAAI,EAAI,CACzB,KAAM,CAAAwE,MAAM,CAAG,GAAI,CAAA7B,GAAG,CAAC3C,IAAI,CAAC,CAC5BwE,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAAC,CACvB,MAAO,CAAAG,MAAM,CACf,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAG,KAAAA,CAAA,GAAY,CACnC,GAAInC,OAAO,CAACjD,MAAM,GAAK,CAAC,CAAE,CACxBG,KAAK,CAAC,uBAAuB,CAAC,CAC9B,OACF,CAEA,KAAM,CAAAwE,cAAc,CAAG,uCAAuC1B,OAAO,CAACjD,MAAM,kGAAkG,CAE9K,GAAI,CAAC6E,MAAM,CAACC,OAAO,CAACH,cAAc,CAAC,CAAE,CACnC,OACF,CAEA;AACA,KAAM,CAAAU,aAAa,CAAGR,MAAM,CAACC,OAAO,CAAC,+CAA+C7B,OAAO,CAACjD,MAAM,6DAA6D,CAAC,CAEhK,GAAI,CAACqF,aAAa,CAAE,CAClB,OACF,CAEAxB,cAAc,CAAC,IAAI,CAAC,CAEpB,GAAI,CACF,GAAI,CAAAyB,YAAY,CAAG,CAAC,CACpB,GAAI,CAAAC,WAAW,CAAG,CAAC,CACnB,KAAM,CAAAC,YAAY,CAAGvC,OAAO,CAACjD,MAAM,CAEnC;AACA,IAAK,KAAM,CAAAgE,MAAM,GAAI,CAAAf,OAAO,CAAE,CAC5B,GAAI,CACF,KAAM,CAAAhG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,YAAY8H,MAAM,CAACK,EAAE,EAAE,CAAE,CAC/DlH,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACqC,OAAO,CAAE,CAC/ByF,YAAY,EAAE,CAChB,CAAC,IAAM,CACLC,WAAW,EAAE,CACb5F,OAAO,CAAC/C,KAAK,CAAC,2BAA2BoH,MAAM,CAACK,EAAE,GAAG,CAAE7G,IAAI,CAACZ,KAAK,CAAC,CACpE,CACF,CAAE,MAAOA,KAAK,CAAE,CACd2I,WAAW,EAAE,CACb5F,OAAO,CAAC/C,KAAK,CAAC,yBAAyBoH,MAAM,CAACK,EAAE,GAAG,CAAEzH,KAAK,CAAC,CAC7D,CACF,CAEA;AACA,KAAM,CAAAkH,WAAW,CAAC,CAAC,CAEnB;AACA,GAAIwB,YAAY,GAAKE,YAAY,CAAE,CACjCrF,KAAK,CAAC,4BAA4BmF,YAAY,WAAW,CAAC,CAC5D,CAAC,IAAM,IAAIA,YAAY,CAAG,CAAC,CAAE,CAC3BnF,KAAK,CAAC,WAAWmF,YAAY,2BAA2BC,WAAW,4BAA4B,CAAC,CAClG,CAAC,IAAM,CACLpF,KAAK,CAAC,oEAAoE,CAAC,CAC7E,CAEF,CAAE,MAAOvD,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACnDuD,KAAK,CAAC,0BAA0BvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CAChD;AACA,KAAM,CAAAuD,WAAW,CAAC,CAAC,CACrB,CAAC,OAAS,CACRD,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAED,KAAM,CAAA4B,qBAAqB,CAAIV,QAAQ,EAAK,CAC1C,KAAM,CAAAW,WAAW,CAAG,GAAI,CAAArC,GAAG,CAACF,eAAe,CAAC,CAC5C,GAAIuC,WAAW,CAACC,GAAG,CAACZ,QAAQ,CAAC,CAAE,CAC7BW,WAAW,CAACP,MAAM,CAACJ,QAAQ,CAAC,CAC9B,CAAC,IAAM,CACLW,WAAW,CAACV,GAAG,CAACD,QAAQ,CAAC,CAC3B,CACA3B,kBAAkB,CAACsC,WAAW,CAAC,CACjC,CAAC,CAED,KAAM,CAAAE,UAAU,CAAGA,CAACb,QAAQ,CAAEc,OAAO,GAAK,CACxCtC,aAAa,CAAC7C,IAAI,GAAK,CACrB,GAAGA,IAAI,CACP,CAACqE,QAAQ,EAAG,CACV,GAAGrE,IAAI,CAACqE,QAAQ,CAAC,CACjBP,WAAW,CAAEqB,OACf,CACF,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAC,yBAAyB,CAAGA,CAAC7B,aAAa,CAAEc,QAAQ,GAAK,CAC7D,KAAM,CAAAgB,QAAQ,CAAGzC,UAAU,CAACyB,QAAQ,CAAC,EAAI,CAAEP,WAAW,CAAE,CAAC,CAAEC,YAAY,CAAE,EAAG,CAAC,CAC7E,KAAM,CAAAuB,UAAU,CAAG,CAACD,QAAQ,CAACvB,WAAW,CAAG,CAAC,EAAIuB,QAAQ,CAACtB,YAAY,CACrE,KAAM,CAAAwB,QAAQ,CAAGD,UAAU,CAAGD,QAAQ,CAACtB,YAAY,CACnD,MAAO,CAAAR,aAAa,CAACiC,KAAK,CAACF,UAAU,CAAEC,QAAQ,CAAC,CAClD,CAAC,CAED,KAAM,CAAAE,aAAa,CAAGA,CAAClC,aAAa,CAAEc,QAAQ,GAAK,CACjD,KAAM,CAAAgB,QAAQ,CAAGzC,UAAU,CAACyB,QAAQ,CAAC,EAAI,CAAEP,WAAW,CAAE,CAAC,CAAEC,YAAY,CAAE,EAAG,CAAC,CAC7E,MAAO,CAAA2B,IAAI,CAACC,IAAI,CAACpC,aAAa,CAACjE,MAAM,CAAG+F,QAAQ,CAACtB,YAAY,CAAC,CAChE,CAAC,CAED,KAAM,CAAA6B,mBAAmB,CAAG,KAAO,CAAAtC,MAAM,EAAK,CAC5C,KAAM,CAAAe,QAAQ,CAAGf,MAAM,CAACK,EAAE,CAC1BZ,qBAAqB,CAAC/C,IAAI,EAAI,GAAI,CAAA2C,GAAG,CAAC3C,IAAI,CAAC,CAACsE,GAAG,CAACD,QAAQ,CAAC,CAAC,CAE1D,GAAI,CACF,KAAM,CAAA9H,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,YAAY6I,QAAQ,QAAQ,CAAE,CACpE5H,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CAEF,GAAI,CAACZ,QAAQ,CAACS,EAAE,CAAE,CAChB,KAAM,IAAI,CAAA0C,KAAK,CAAC,8BAA8BnD,QAAQ,CAACsJ,UAAU,EAAE,CAAC,CACtE,CAEA;AACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAvJ,QAAQ,CAACuJ,IAAI,CAAC,CAAC,CAElC;AACA,KAAM,CAAAC,GAAG,CAAG5B,MAAM,CAAC6B,GAAG,CAACC,eAAe,CAACH,IAAI,CAAC,CAC5C,KAAM,CAAAI,IAAI,CAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC,CACxCF,IAAI,CAACG,IAAI,CAAGN,GAAG,CACfG,IAAI,CAACI,QAAQ,CAAG,oBAAoBhD,MAAM,CAACY,IAAI,IAAIG,QAAQ,OAAO,CAClE8B,QAAQ,CAACxJ,IAAI,CAAC4J,WAAW,CAACL,IAAI,CAAC,CAC/BA,IAAI,CAACM,KAAK,CAAC,CAAC,CACZL,QAAQ,CAACxJ,IAAI,CAAC8J,WAAW,CAACP,IAAI,CAAC,CAC/B/B,MAAM,CAAC6B,GAAG,CAACU,eAAe,CAACX,GAAG,CAAC,CAEjC,CAAE,MAAO7J,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,iCAAiC,CAAEA,KAAK,CAAC,CACvDuD,KAAK,CAAC,8BAA8BvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CACtD,CAAC,OAAS,CACRkD,qBAAqB,CAAC/C,IAAI,EAAI,CAC5B,KAAM,CAAAwE,MAAM,CAAG,GAAI,CAAA7B,GAAG,CAAC3C,IAAI,CAAC,CAC5BwE,MAAM,CAACC,MAAM,CAACJ,QAAQ,CAAC,CACvB,MAAO,CAAAG,MAAM,CACf,CAAC,CAAC,CACJ,CACF,CAAC,CAED,KAAM,CAAAmC,gBAAgB,CAAGA,CAACpD,aAAa,CAAEc,QAAQ,GAAK,KAAAuC,oBAAA,CACpD,KAAM,CAAAC,UAAU,CAAGpB,aAAa,CAAClC,aAAa,CAAEc,QAAQ,CAAC,CACzD,KAAM,CAAAP,WAAW,CAAG,EAAA8C,oBAAA,CAAAhE,UAAU,CAACyB,QAAQ,CAAC,UAAAuC,oBAAA,iBAApBA,oBAAA,CAAsB9C,WAAW,GAAI,CAAC,CAE1D,GAAI+C,UAAU,EAAI,CAAC,CAAE,MAAO,KAAI,CAEhC,KAAM,CAAAC,KAAK,CAAG,EAAE,CAChB,KAAM,CAAAC,eAAe,CAAG,CAAC,CACzB,GAAI,CAAAC,SAAS,CAAGtB,IAAI,CAACuB,GAAG,CAAC,CAAC,CAAEnD,WAAW,CAAG4B,IAAI,CAACwB,KAAK,CAACH,eAAe,CAAG,CAAC,CAAC,CAAC,CAC1E,GAAI,CAAAI,OAAO,CAAGzB,IAAI,CAAC0B,GAAG,CAACP,UAAU,CAAEG,SAAS,CAAGD,eAAe,CAAG,CAAC,CAAC,CAEnE;AACA,GAAII,OAAO,CAAGH,SAAS,CAAG,CAAC,CAAGD,eAAe,CAAE,CAC7CC,SAAS,CAAGtB,IAAI,CAACuB,GAAG,CAAC,CAAC,CAAEE,OAAO,CAAGJ,eAAe,CAAG,CAAC,CAAC,CACxD,CAEA,mBACExL,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAC6C,KAAK,CAAE,CAAEI,MAAM,CAAE,QAAQ,CAAEH,OAAO,CAAE,MAAM,CAAEkH,cAAc,CAAE,QAAQ,CAAEtG,UAAU,CAAE,QAAQ,CAAEV,GAAG,CAAE,MAAO,CAAE,CAAA/C,QAAA,eACpIjC,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMiF,UAAU,CAACb,QAAQ,CAAE,CAAC,CAAE,CACvCvG,QAAQ,CAAEgG,WAAW,GAAK,CAAE,CAC5B5D,KAAK,CAAE,CAAEc,OAAO,CAAE,UAAU,CAAEC,MAAM,CAAE,gBAAgB,CAAEgB,UAAU,CAAE6B,WAAW,GAAK,CAAC,CAAG,SAAS,CAAG,OAAO,CAAEwD,MAAM,CAAExD,WAAW,GAAK,CAAC,CAAG,aAAa,CAAG,SAAU,CAAE,CAAAxG,QAAA,CACtK,OAED,CAAQ,CAAC,cAETjC,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMiF,UAAU,CAACb,QAAQ,CAAEP,WAAW,CAAG,CAAC,CAAE,CACrDhG,QAAQ,CAAEgG,WAAW,GAAK,CAAE,CAC5B5D,KAAK,CAAE,CAAEc,OAAO,CAAE,UAAU,CAAEC,MAAM,CAAE,gBAAgB,CAAEgB,UAAU,CAAE6B,WAAW,GAAK,CAAC,CAAG,SAAS,CAAG,OAAO,CAAEwD,MAAM,CAAExD,WAAW,GAAK,CAAC,CAAG,aAAa,CAAG,SAAU,CAAE,CAAAxG,QAAA,CACtK,UAED,CAAQ,CAAC,CAERmG,KAAK,CAAC8D,IAAI,CAAC,CAAEjI,MAAM,CAAE6H,OAAO,CAAGH,SAAS,CAAG,CAAE,CAAC,CAAE,CAACQ,CAAC,CAAEC,CAAC,GAAKT,SAAS,CAAGS,CAAC,CAAC,CAAClH,GAAG,CAACmH,IAAI,eAChFrM,IAAA,WAEE4E,OAAO,CAAEA,CAAA,GAAMiF,UAAU,CAACb,QAAQ,CAAEqD,IAAI,CAAE,CAC1CxH,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBC,MAAM,CAAE,gBAAgB,CACxBgB,UAAU,CAAEyF,IAAI,GAAK5D,WAAW,CAAG,SAAS,CAAG,OAAO,CACtD/B,KAAK,CAAE2F,IAAI,GAAK5D,WAAW,CAAG,OAAO,CAAG,OAAO,CAC/CwD,MAAM,CAAE,SACV,CAAE,CAAAhK,QAAA,CAEDoK,IAAI,EAVAA,IAWC,CACT,CAAC,cAEFrM,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMiF,UAAU,CAACb,QAAQ,CAAEP,WAAW,CAAG,CAAC,CAAE,CACrDhG,QAAQ,CAAEgG,WAAW,GAAK+C,UAAW,CACrC3G,KAAK,CAAE,CAAEc,OAAO,CAAE,UAAU,CAAEC,MAAM,CAAE,gBAAgB,CAAEgB,UAAU,CAAE6B,WAAW,GAAK+C,UAAU,CAAG,SAAS,CAAG,OAAO,CAAES,MAAM,CAAExD,WAAW,GAAK+C,UAAU,CAAG,aAAa,CAAG,SAAU,CAAE,CAAAvJ,QAAA,CACxL,MAED,CAAQ,CAAC,cAETjC,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMiF,UAAU,CAACb,QAAQ,CAAEwC,UAAU,CAAE,CAChD/I,QAAQ,CAAEgG,WAAW,GAAK+C,UAAW,CACrC3G,KAAK,CAAE,CAAEc,OAAO,CAAE,UAAU,CAAEC,MAAM,CAAE,gBAAgB,CAAEgB,UAAU,CAAE6B,WAAW,GAAK+C,UAAU,CAAG,SAAS,CAAG,OAAO,CAAES,MAAM,CAAExD,WAAW,GAAK+C,UAAU,CAAG,aAAa,CAAG,SAAU,CAAE,CAAAvJ,QAAA,CACxL,MAED,CAAQ,CAAC,cAET/B,KAAA,SAAM2E,KAAK,CAAE,CAAEyH,UAAU,CAAE,MAAM,CAAE7F,QAAQ,CAAE,MAAM,CAAEC,KAAK,CAAE,MAAO,CAAE,CAAAzE,QAAA,EAAC,OAC/D,CAACwG,WAAW,CAAC,MAAI,CAAC+C,UAAU,CAAC,IAAE,CAACtD,aAAa,CAACjE,MAAM,CAAC,uBAC5D,EAAM,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,GAAIjB,OAAO,CAAE,CACX,mBAAOhD,IAAA,QAAAiC,QAAA,CAAK,oBAAkB,CAAK,CAAC,CACtC,CAEA,mBACE/B,KAAA,QAAK8B,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtB/B,KAAA,QAAK2E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEkH,cAAc,CAAE,eAAe,CAAEtG,UAAU,CAAE,QAAQ,CAAE6G,YAAY,CAAE,MAAO,CAAE,CAAAtK,QAAA,eAC3GjC,IAAA,OAAAiC,QAAA,CAAI,gCAA8B,CAAI,CAAC,CAGtCF,IAAI,EAAIA,IAAI,CAAC8B,IAAI,GAAK,OAAO,EAAIqD,OAAO,CAACjD,MAAM,CAAG,CAAC,eAClDjE,IAAA,WACE4E,OAAO,CAAEyE,gBAAiB,CAC1B5G,QAAQ,CAAEoF,WAAY,CACtBhD,KAAK,CAAE,CACLc,OAAO,CAAE,WAAW,CACpBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAEpE,WAAW,CAAG,aAAa,CAAG,SAAS,CAC/CpB,QAAQ,CAAE,MAAM,CAChBD,UAAU,CAAE,MAAM,CAClBgG,OAAO,CAAE3E,WAAW,CAAG,GAAG,CAAG,CAC/B,CAAE,CAAA5F,QAAA,CAED4F,WAAW,CAAG,qBAAqB,CAAG,2BAA2BX,OAAO,CAACjD,MAAM,GAAG,CAC7E,CACT,EACE,CAAC,CAELiD,OAAO,CAACjD,MAAM,GAAK,CAAC,cACnBjE,IAAA,MAAAiC,QAAA,CAAG,sDAAoD,CAAG,CAAC,cAE3DjC,IAAA,QAAKgC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAC1BiF,OAAO,CAAChC,GAAG,CAAC,CAAC+C,MAAM,CAAE9B,KAAK,gBACzBjG,KAAA,QAA8B8B,SAAS,CAAC,aAAa,CAAAC,QAAA,eACnD/B,KAAA,QAAK8B,SAAS,CAAC,eAAe,CAAC6C,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEkH,cAAc,CAAE,eAAe,CAAEtG,UAAU,CAAE,QAAS,CAAE,CAAAzD,QAAA,eAC/G/B,KAAA,QAAK2E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEY,UAAU,CAAE,QAAQ,CAAEV,GAAG,CAAE,MAAO,CAAE,CAAA/C,QAAA,eACjEjC,IAAA,SAAMgC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAEgG,MAAM,CAACY,IAAI,CAAO,CAAC,cAClD3I,KAAA,SAAM8B,SAAS,CAAE,uBAAuBiG,MAAM,CAACwE,mBAAmB,CAAG,CAAC,CAAG,mBAAmB,CAAG,kBAAkB,EAAG,CAAAxK,QAAA,EACjHgG,MAAM,CAACwE,mBAAmB,CAAC,gBAC9B,EAAM,CAAC,cACPzM,IAAA,SAAMgC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAE,GAAI,CAAAyK,IAAI,CAACzE,MAAM,CAAC0E,UAAU,CAAC,CAACC,cAAc,CAAC,CAAC,CAAO,CAAC,EAChF,CAAC,cAEN1M,KAAA,QAAK2E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEE,GAAG,CAAE,KAAM,CAAE,CAAA/C,QAAA,eAC1CjC,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAM2F,mBAAmB,CAACtC,MAAM,CAAE,CAC3CxF,QAAQ,CAAEgF,kBAAkB,CAACmC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAE,CAC5CzD,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAExE,kBAAkB,CAACmC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,aAAa,CAAG,SAAS,CACrE7B,QAAQ,CAAE,MAAM,CAChB+F,OAAO,CAAE/E,kBAAkB,CAACmC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,GAAG,CAAG,CACrD,CAAE,CAAArG,QAAA,CAEDwF,kBAAkB,CAACmC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,mBAAmB,CAAG,mBAAmB,CACxE,CAAC,CAERL,MAAM,CAACwE,mBAAmB,CAAG,CAAC,eAC7BzM,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAM8E,qBAAqB,CAACzB,MAAM,CAACK,EAAE,CAAE,CAChDzD,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SAAS,CACjBxF,QAAQ,CAAE,MACZ,CAAE,CAAAxE,QAAA,CAEDmF,eAAe,CAACwC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,gBAAgB,CAAG,gBAAgB,CAC/D,CACT,CAGAvG,IAAI,EAAIA,IAAI,CAAC8B,IAAI,GAAK,OAAO,eAC5B7D,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAM+D,YAAY,CAACV,MAAM,CAAE,CACpCxF,QAAQ,CAAEkF,eAAe,CAACiC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAE,CACzCzD,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAEtE,eAAe,CAACiC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,aAAa,CAAG,SAAS,CAClE7B,QAAQ,CAAE,MAAM,CAChB+F,OAAO,CAAE7E,eAAe,CAACiC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,GAAG,CAAG,CAClD,CAAE,CAAArG,QAAA,CAED0F,eAAe,CAACiC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,CAAG,iBAAiB,CAAG,YAAY,CAC5D,CACT,EACE,CAAC,EACH,CAAC,CAELL,MAAM,CAACwE,mBAAmB,CAAG,CAAC,EAAIrF,eAAe,CAACwC,GAAG,CAAC3B,MAAM,CAACK,EAAE,CAAC,eAC/DtI,IAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC7B/B,KAAA,QAAK8B,SAAS,CAAC,uBAAuB,CAAAC,QAAA,eACpCjC,IAAA,OAAAiC,QAAA,CAAI,yBAAuB,CAAI,CAAC,CAE/BqJ,gBAAgB,CAACrD,MAAM,CAACC,aAAa,CAAED,MAAM,CAACK,EAAE,CAAC,cAElDpI,KAAA,UAAO2E,KAAK,CAAE,CAAEgI,KAAK,CAAE,MAAM,CAAEC,cAAc,CAAE,UAAU,CAAE7H,MAAM,CAAE,QAAS,CAAE,CAAAhD,QAAA,eAC5EjC,IAAA,UAAAiC,QAAA,cACE/B,KAAA,OAAI2E,KAAK,CAAE,CAAEiB,eAAe,CAAE,SAAU,CAAE,CAAA7D,QAAA,eACxCjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,MAAO,CAAE,CAAA9K,QAAA,CAAC,KAAG,CAAI,CAAC,cACxFjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,MAAO,CAAE,CAAA9K,QAAA,CAAC,SAAO,CAAI,CAAC,cAC5FjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAC,aAAW,CAAI,CAAC,cACjGjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC9FjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAC,YAAU,CAAI,CAAC,cAChGjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAC,QAAM,CAAI,CAAC,EAC1F,CAAC,CACA,CAAC,cACRjC,IAAA,UAAAiC,QAAA,CACG8H,yBAAyB,CAAC9B,MAAM,CAACC,aAAa,CAAED,MAAM,CAACK,EAAE,CAAC,CAACpD,GAAG,CAAC,CAAC8H,IAAI,CAAEC,SAAS,gBAC9E/M,KAAA,OAAoB2E,KAAK,CAAE,CAAEiB,eAAe,CAAEmH,SAAS,CAAG,CAAC,GAAK,CAAC,CAAG,OAAO,CAAG,SAAU,CAAE,CAAAhL,QAAA,eACxFjC,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEa,UAAU,CAAE,MAAO,CAAE,CAAAvE,QAAA,CAAE+K,IAAI,CAACE,GAAG,CAAK,CAAC,cAChGlN,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAO,CAAE,CAAA1D,QAAA,CAAE+K,IAAI,CAACG,WAAW,EAAI,KAAK,CAAK,CAAC,cAC7FnN,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAE+K,IAAI,CAACI,iBAAiB,CAAK,CAAC,cAC9GpN,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAAE+K,IAAI,CAACK,cAAc,CAAK,CAAC,cAC3GnN,KAAA,OAAI2E,KAAK,CAAE,CACTe,MAAM,CAAE,mBAAmB,CAC3BD,OAAO,CAAE,MAAM,CACfoH,SAAS,CAAE,OAAO,CAClBrG,KAAK,CAAEsG,IAAI,CAACM,UAAU,CAAG,CAAC,CAAG,KAAK,CAAG,OAAO,CAC5C9G,UAAU,CAAE,MACd,CAAE,CAAAvE,QAAA,EACC+K,IAAI,CAACM,UAAU,CAAG,CAAC,CAAG,GAAG,CAAG,EAAE,CAAEN,IAAI,CAACM,UAAU,EAC9C,CAAC,cACLtN,IAAA,OAAI6E,KAAK,CAAE,CAAEe,MAAM,CAAE,mBAAmB,CAAED,OAAO,CAAE,MAAM,CAAEoH,SAAS,CAAE,OAAQ,CAAE,CAAA9K,QAAA,CAC7E+K,IAAI,CAACO,eAAe,CAAG,GAAGP,IAAI,CAACO,eAAe,GAAG,CAAG,KAAK,CACxD,CAAC,GAhBEN,SAiBL,CACL,CAAC,CACG,CAAC,EACH,CAAC,CAEP3B,gBAAgB,CAACrD,MAAM,CAACC,aAAa,CAAED,MAAM,CAACK,EAAE,CAAC,EAC/C,CAAC,CACH,CACN,GAhHOL,MAAM,CAACK,EAAE,EAAInC,KAiHlB,CACN,CAAC,CACC,CACN,EACE,CAAC,CAEV,CAEA;AAEA,QAAS,CAAAqH,KAAKA,CAAAC,KAAA,CAAkB,IAAjB,CAAE3L,KAAK,CAAEC,IAAK,CAAC,CAAA0L,KAAA,CAC5B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG/N,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACoD,OAAO,CAAEC,UAAU,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgO,WAAW,CAAEC,cAAc,CAAC,CAAGjO,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACkO,WAAW,CAAEC,cAAc,CAAC,CAAGnO,QAAQ,CAAC,KAAK,CAAC,CACrD,KAAM,CAACoO,YAAY,CAAEC,eAAe,CAAC,CAAGrO,QAAQ,CAAC,KAAK,CAAC,CAEvDC,SAAS,CAAC,IAAM,CACd,GAAIkC,IAAI,CAAC8B,IAAI,GAAK,OAAO,CAAE,CACzBqK,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,CAACnM,IAAI,CAAC8B,IAAI,CAAC,CAAC,CAEf,KAAM,CAAAqK,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAhN,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,QAAQ,CAAE,CAChDkB,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CACF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAClCiM,QAAQ,CAAClM,IAAI,CAAC,CAChB,CAAE,MAAOZ,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CAAC,OAAS,CACRoC,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,KAAM,CAAAkL,cAAc,CAAIC,UAAU,EAAK,CACrCP,cAAc,CAAC,CACbvF,EAAE,CAAE8F,UAAU,CAAC9F,EAAE,CACjB7H,QAAQ,CAAE2N,UAAU,CAAC3N,QAAQ,CAC7B4N,KAAK,CAAED,UAAU,CAACC,KAAK,EAAI,EAAE,CAC7BC,UAAU,CAAEF,UAAU,CAACE,UAAU,EAAI,EAAE,CACvCC,SAAS,CAAEH,UAAU,CAACG,SAAS,EAAI,EAAE,CACrC1K,IAAI,CAAEuK,UAAU,CAACvK,IAAI,CACrB2K,SAAS,CAAEJ,UAAU,CAACI,SAAS,CAC/B9N,QAAQ,CAAE,EAAE,CAAE;AACd+N,eAAe,CAAE,EACnB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAC,aAAa,CAAGA,CAAA,GAAM,CAC1BX,cAAc,CAAC,IAAI,CAAC,CACpBF,cAAc,CAAC,CACbpN,QAAQ,CAAE,EAAE,CACZ4N,KAAK,CAAE,EAAE,CACTC,UAAU,CAAE,EAAE,CACdC,SAAS,CAAE,EAAE,CACb1K,IAAI,CAAE,MAAM,CACZ2K,SAAS,CAAE,IAAI,CACf9N,QAAQ,CAAE,EAAE,CACZ+N,eAAe,CAAE,EACnB,CAAC,CAAC,CACJ,CAAC,CAED,KAAM,CAAAE,cAAc,CAAG,KAAO,CAAA3N,CAAC,EAAK,CAClCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBgN,eAAe,CAAC,IAAI,CAAC,CAErB,GAAI,CACF;AACA,GAAI,CAACL,WAAW,CAACnN,QAAQ,CAAC6E,IAAI,CAAC,CAAC,CAAE,CAChClB,KAAK,CAAC,sBAAsB,CAAC,CAC7B,OACF,CAEA,GAAI,CAACwJ,WAAW,CAACS,KAAK,CAAC/I,IAAI,CAAC,CAAC,CAAE,CAC7BlB,KAAK,CAAC,mBAAmB,CAAC,CAC1B,OACF,CAEA,GAAI,CAACwJ,WAAW,CAACU,UAAU,CAAChJ,IAAI,CAAC,CAAC,CAAE,CAClClB,KAAK,CAAC,wBAAwB,CAAC,CAC/B,OACF,CAEA,GAAI,CAACwJ,WAAW,CAACW,SAAS,CAACjJ,IAAI,CAAC,CAAC,CAAE,CACjClB,KAAK,CAAC,uBAAuB,CAAC,CAC9B,OACF,CAEA;AACA,GAAI0J,WAAW,EAAI,CAACF,WAAW,CAAClN,QAAQ,CAAE,CACxC0D,KAAK,CAAC,oCAAoC,CAAC,CAC3C,OACF,CAEA;AACA,GAAIwJ,WAAW,CAAClN,QAAQ,CAAE,CACxB,GAAIkN,WAAW,CAAClN,QAAQ,CAACuD,MAAM,CAAG,CAAC,CAAE,CACnCG,KAAK,CAAC,6CAA6C,CAAC,CACpD,OACF,CAEA,GAAIwJ,WAAW,CAAClN,QAAQ,GAAKkN,WAAW,CAACa,eAAe,CAAE,CACxDrK,KAAK,CAAC,wBAAwB,CAAC,CAC/B,OACF,CACF,CAEA,KAAM,CAAAwK,QAAQ,CAAG,CACfnO,QAAQ,CAAEmN,WAAW,CAACnN,QAAQ,CAAC6E,IAAI,CAAC,CAAC,CACrC+I,KAAK,CAAET,WAAW,CAACS,KAAK,CAAC/I,IAAI,CAAC,CAAC,CAC/BgJ,UAAU,CAAEV,WAAW,CAACU,UAAU,CAAChJ,IAAI,CAAC,CAAC,CACzCiJ,SAAS,CAAEX,WAAW,CAACW,SAAS,CAACjJ,IAAI,CAAC,CAAC,CACvCzB,IAAI,CAAE+J,WAAW,CAAC/J,IAAI,CACtB2K,SAAS,CAAEZ,WAAW,CAACY,SACzB,CAAC,CAED;AACA,GAAIZ,WAAW,CAAClN,QAAQ,CAAE,CACxBkO,QAAQ,CAAClO,QAAQ,CAAGkN,WAAW,CAAClN,QAAQ,CAC1C,CAEA,KAAM,CAAAgK,GAAG,CAAGoD,WAAW,CACnB,GAAG3N,QAAQ,QAAQ,CACnB,GAAGA,QAAQ,UAAUyN,WAAW,CAACtF,EAAE,EAAE,CAEzC,KAAM,CAAAlH,MAAM,CAAG0M,WAAW,CAAG,MAAM,CAAG,KAAK,CAE3C,KAAM,CAAA5M,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACuJ,GAAG,CAAE,CAChCtJ,MAAM,CAAEA,MAAM,CACdC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUS,KAAK,EAAE,CAClC,cAAc,CAAE,kBAClB,CAAC,CACDR,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACoN,QAAQ,CAC/B,CAAC,CAAC,CAEF,KAAM,CAAAnN,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACqC,OAAO,CAAE,CAC/BM,KAAK,CAAC0J,WAAW,CAAG,4BAA4B,CAAG,4BAA4B,CAAC,CAChFD,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACrB,KAAM,CAAAG,SAAS,CAAC,CAAC,CAAE;AACrB,CAAC,IAAM,CACL,KAAM,IAAI,CAAA7J,KAAK,CAAC5C,IAAI,CAACZ,KAAK,EAAI,qBAAqB,CAAC,CACtD,CACF,CAAE,MAAOA,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1CuD,KAAK,CAAC,UAAUvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CAClC,CAAC,OAAS,CACRyJ,eAAe,CAAC,KAAK,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAY,gBAAgB,CAAG,KAAO,CAAAC,YAAY,EAAK,CAC/C,GAAIA,YAAY,CAACxG,EAAE,GAAKvG,IAAI,CAACuG,EAAE,CAAE,CAC/BlE,KAAK,CAAC,oCAAoC,CAAC,CAC3C,OACF,CAEA,KAAM,CAAAwE,cAAc,CAAG,yCAAyCkG,YAAY,CAACrO,QAAQ,qCAAqC,CAE1H,GAAI,CAACqI,MAAM,CAACC,OAAO,CAACH,cAAc,CAAC,CAAE,CACnC,OACF,CAEA,GAAI,CACF,KAAM,CAAA1H,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGhB,QAAQ,UAAU2O,YAAY,CAACxG,EAAE,EAAE,CAAE,CACnElH,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,CAAE,eAAe,CAAE,UAAUS,KAAK,EAAG,CAChD,CAAC,CAAC,CAEF,KAAM,CAAAL,IAAI,CAAG,KAAM,CAAAP,QAAQ,CAACQ,IAAI,CAAC,CAAC,CAElC,GAAIR,QAAQ,CAACS,EAAE,EAAIF,IAAI,CAACqC,OAAO,CAAE,CAC/BM,KAAK,CAAC,2BAA2B,CAAC,CAClC,KAAM,CAAA8J,SAAS,CAAC,CAAC,CACnB,CAAC,IAAM,CACL,KAAM,IAAI,CAAA7J,KAAK,CAAC5C,IAAI,CAACZ,KAAK,EAAI,uBAAuB,CAAC,CACxD,CACF,CAAE,MAAOA,KAAK,CAAE,CACd+C,OAAO,CAAC/C,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5CuD,KAAK,CAAC,UAAUvD,KAAK,CAAC2D,OAAO,EAAE,CAAC,CAClC,CACF,CAAC,CAED,KAAM,CAAAuK,UAAU,CAAGA,CAAA,GAAM,CACvBlB,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACvB,CAAC,CAED,GAAIhM,IAAI,CAAC8B,IAAI,GAAK,OAAO,CAAE,CACzB,mBAAO7D,IAAA,QAAAiC,QAAA,CAAK,2CAAyC,CAAK,CAAC,CAC7D,CAEA,GAAIe,OAAO,CAAE,CACX,mBAAOhD,IAAA,QAAAiC,QAAA,CAAK,kBAAgB,CAAK,CAAC,CACpC,CAEA,mBACE/B,KAAA,QAAK8B,SAAS,CAAC,OAAO,CAAAC,QAAA,eACpB/B,KAAA,QAAK2E,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEkH,cAAc,CAAE,eAAe,CAAEtG,UAAU,CAAE,QAAQ,CAAE6G,YAAY,CAAE,MAAO,CAAE,CAAAtK,QAAA,eAC3GjC,IAAA,OAAAiC,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBjC,IAAA,WACE4E,OAAO,CAAE8J,aAAc,CACvB7J,KAAK,CAAE,CACLc,OAAO,CAAE,WAAW,CACpBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SAAS,CACjBxF,QAAQ,CAAE,MAAM,CAChBD,UAAU,CAAE,MACd,CAAE,CAAAvE,QAAA,CACH,qBAED,CAAQ,CAAC,EACN,CAAC,CAGL2L,WAAW,eACV5N,IAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChC/B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBjC,IAAA,OAAAiC,QAAA,CAAK6L,WAAW,CAAG,cAAc,CAAG,cAAcF,WAAW,CAACnN,QAAQ,EAAE,CAAK,CAAC,cAE9EP,KAAA,SAAMgC,QAAQ,CAAEyM,cAAe,CAAA1M,QAAA,eAC7B/B,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,YAAU,CAAO,CAAC,cACzBjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEwL,WAAW,CAACnN,QAAS,CAC5B4B,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEnN,QAAQ,CAAEO,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC5EG,QAAQ,MACRE,QAAQ,CAAE,CAACqL,WAAa;AAAA,CACzB,CAAC,EACC,CAAC,cAEN5N,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,SAAO,CAAO,CAAC,cACtBjC,IAAA,UACEmC,IAAI,CAAC,OAAO,CACZC,KAAK,CAAEwL,WAAW,CAACS,KAAM,CACzBhM,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAES,KAAK,CAAErN,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CACzEG,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cAENrC,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,cAAY,CAAO,CAAC,cAC3BjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEwL,WAAW,CAACU,UAAW,CAC9BjM,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEU,UAAU,CAAEtN,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC9EG,QAAQ,MACT,CAAC,EACC,CAAC,cAENrC,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEwL,WAAW,CAACW,SAAU,CAC7BlM,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEW,SAAS,CAAEvN,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC7EG,QAAQ,MACT,CAAC,EACC,CAAC,EACH,CAAC,cAENrC,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,MAAI,CAAO,CAAC,cACnB/B,KAAA,WACEkC,KAAK,CAAEwL,WAAW,CAAC/J,IAAK,CACxBxB,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAE/J,IAAI,CAAE7C,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAAAH,QAAA,eAExEjC,IAAA,WAAQoC,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,MAAI,CAAQ,CAAC,cAClCjC,IAAA,WAAQoC,KAAK,CAAC,OAAO,CAAAH,QAAA,CAAC,OAAK,CAAQ,CAAC,EAC9B,CAAC,EACN,CAAC,cAEN/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,QAAM,CAAO,CAAC,cACrB/B,KAAA,WACEkC,KAAK,CAAEwL,WAAW,CAACY,SAAU,CAC7BnM,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEY,SAAS,CAAExN,CAAC,CAACsB,MAAM,CAACF,KAAK,GAAK,MAAM,CAAC,CAAE,CAAAH,QAAA,eAExFjC,IAAA,WAAQoC,KAAK,CAAC,MAAM,CAAAH,QAAA,CAAC,QAAM,CAAQ,CAAC,cACpCjC,IAAA,WAAQoC,KAAK,CAAC,OAAO,CAAAH,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACjC,CAAC,EACN,CAAC,EACH,CAAC,cAEN/B,KAAA,QAAK8B,SAAS,CAAC,UAAU,CAAAC,QAAA,eACvB/B,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAQ6L,WAAW,CAAG,YAAY,CAAG,4CAA4C,CAAQ,CAAC,cAC1F9N,IAAA,UACEmC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEwL,WAAW,CAAClN,QAAS,CAC5B2B,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAElN,QAAQ,CAAEM,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CAC5EG,QAAQ,CAAEuL,WAAY,CACtBkB,SAAS,CAAC,GAAG,CACd,CAAC,EACC,CAAC,cAEN9O,KAAA,QAAK8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBjC,IAAA,UAAAiC,QAAA,CAAO,kBAAgB,CAAO,CAAC,cAC/BjC,IAAA,UACEmC,IAAI,CAAC,UAAU,CACfC,KAAK,CAAEwL,WAAW,CAACa,eAAgB,CACnCpM,QAAQ,CAAGrB,CAAC,EAAK6M,cAAc,CAAC,CAAC,GAAGD,WAAW,CAAEa,eAAe,CAAEzN,CAAC,CAACsB,MAAM,CAACF,KAAK,CAAC,CAAE,CACnFG,QAAQ,CAAEuL,WAAW,EAAIF,WAAW,CAAClN,QAAS,CAC/C,CAAC,EACC,CAAC,EACH,CAAC,cAENR,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjC,IAAA,WACEmC,IAAI,CAAC,QAAQ,CACbyC,OAAO,CAAEmK,UAAW,CACpBtM,QAAQ,CAAEuL,YAAa,CACvBnJ,KAAK,CAAE,CACLc,OAAO,CAAE,WAAW,CACpBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SAAS,CACjB1F,WAAW,CAAE,MACf,CAAE,CAAAtE,QAAA,CACH,QAED,CAAQ,CAAC,cAETjC,IAAA,WACEmC,IAAI,CAAC,QAAQ,CACbM,QAAQ,CAAEuL,YAAa,CACvBnJ,KAAK,CAAE,CACLc,OAAO,CAAE,WAAW,CACpBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SACV,CAAE,CAAAhK,QAAA,CAED+L,YAAY,CAAG,WAAW,CAAIF,WAAW,CAAG,aAAa,CAAG,aAAc,CACrE,CAAC,EACN,CAAC,EACF,CAAC,EACJ,CAAC,CACH,CACN,cAGD9N,IAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,CACxByL,KAAK,CAACxI,GAAG,CAAC+J,CAAC,eACV/O,KAAA,QAAgB8B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACnC/B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB/B,KAAA,QAAK8B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B/B,KAAA,WAAA+B,QAAA,EAASgN,CAAC,CAACX,UAAU,CAAC,GAAC,CAACW,CAAC,CAACV,SAAS,EAAS,CAAC,cAC7CvO,IAAA,SAAMgC,SAAS,CAAE,aAAaiN,CAAC,CAACpL,IAAI,EAAG,CAAA5B,QAAA,CAAEgN,CAAC,CAACpL,IAAI,CAAO,CAAC,CACtD,CAACoL,CAAC,CAACT,SAAS,eAAIxO,IAAA,SAAMgC,SAAS,CAAC,sBAAsB,CAAAC,QAAA,CAAC,UAAQ,CAAM,CAAC,EACpE,CAAC,cAEN/B,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B/B,KAAA,QAAA+B,QAAA,eAAKjC,IAAA,WAAAiC,QAAA,CAAQ,WAAS,CAAQ,CAAC,IAAC,CAACgN,CAAC,CAACxO,QAAQ,EAAM,CAAC,cAClDP,KAAA,QAAA+B,QAAA,eAAKjC,IAAA,WAAAiC,QAAA,CAAQ,QAAM,CAAQ,CAAC,IAAC,CAACgN,CAAC,CAACZ,KAAK,EAAI,SAAS,EAAM,CAAC,cACzDnO,KAAA,QAAA+B,QAAA,eAAKjC,IAAA,WAAAiC,QAAA,CAAQ,aAAW,CAAQ,CAAC,IAAC,CAACgN,CAAC,CAACC,UAAU,CAAG,GAAI,CAAAxC,IAAI,CAACuC,CAAC,CAACC,UAAU,CAAC,CAACtC,cAAc,CAAC,CAAC,CAAG,OAAO,EAAM,CAAC,cAC1G1M,KAAA,QAAA+B,QAAA,eAAKjC,IAAA,WAAAiC,QAAA,CAAQ,UAAQ,CAAQ,CAAC,IAAC,CAAC,GAAI,CAAAyK,IAAI,CAACuC,CAAC,CAACtC,UAAU,CAAC,CAACwC,kBAAkB,CAAC,CAAC,EAAM,CAAC,EAC/E,CAAC,EACH,CAAC,cAENjP,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjC,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMuJ,cAAc,CAACc,CAAC,CAAE,CACjCpK,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SAAS,CACjBxF,QAAQ,CAAE,MAAM,CAChBF,WAAW,CAAE,KACf,CAAE,CAAAtE,QAAA,CACH,mBAED,CAAQ,CAAC,CAERgN,CAAC,CAAC3G,EAAE,GAAKvG,IAAI,CAACuG,EAAE,eACftI,IAAA,WACE4E,OAAO,CAAEA,CAAA,GAAMiK,gBAAgB,CAACI,CAAC,CAAE,CACnCpK,KAAK,CAAE,CACLc,OAAO,CAAE,UAAU,CACnBG,eAAe,CAAE,SAAS,CAC1BY,KAAK,CAAE,OAAO,CACdd,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBoG,MAAM,CAAE,SAAS,CACjBxF,QAAQ,CAAE,MACZ,CAAE,CAAAxE,QAAA,CACH,2BAED,CAAQ,CACT,EACE,CAAC,GAjDEgN,CAAC,CAAC3G,EAkDP,CACN,CAAC,CACC,CAAC,EACH,CAAC,CAEV,CAEA;AACA,QAAS,CAAA8G,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,eAAe,CAAEC,kBAAkB,CAAC,CAAG1P,QAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACmC,IAAI,CAAEwN,OAAO,CAAC,CAAG3P,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACkC,KAAK,CAAE0N,QAAQ,CAAC,CAAG5P,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAC6P,UAAU,CAAEC,aAAa,CAAC,CAAG9P,QAAQ,CAAC,WAAW,CAAC,CACzD,KAAM,CAACe,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,IAAI,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAA8P,UAAU,CAAG/N,YAAY,CAACgO,OAAO,CAAC,OAAO,CAAC,CAChD,KAAM,CAAAC,SAAS,CAAGjO,YAAY,CAACgO,OAAO,CAAC,MAAM,CAAC,CAE9C,GAAID,UAAU,EAAIE,SAAS,CAAE,CAC3B,GAAI,CACF,KAAM,CAAAjB,QAAQ,CAAGrN,IAAI,CAAC4G,KAAK,CAAC0H,SAAS,CAAC,CACtCL,QAAQ,CAACG,UAAU,CAAC,CACpBJ,OAAO,CAACX,QAAQ,CAAC,CACjBU,kBAAkB,CAAC,IAAI,CAAC,CAC1B,CAAE,MAAOzO,KAAK,CAAE,CACd;AACAe,YAAY,CAACkO,UAAU,CAAC,OAAO,CAAC,CAChClO,YAAY,CAACkO,UAAU,CAAC,MAAM,CAAC,CACjC,CACF,CAEAlP,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAmP,WAAW,CAAGA,CAACnB,QAAQ,CAAEoB,SAAS,GAAK,CAC3CT,OAAO,CAACX,QAAQ,CAAC,CACjBY,QAAQ,CAACQ,SAAS,CAAC,CACnBV,kBAAkB,CAAC,IAAI,CAAC,CAExB;AACA1N,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEN,IAAI,CAACC,SAAS,CAACoN,QAAQ,CAAC,CAAC,CACtDhN,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEmO,SAAS,CAAC,CAC1C,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGA,CAAA,GAAM,CACzBrO,YAAY,CAACkO,UAAU,CAAC,OAAO,CAAC,CAChClO,YAAY,CAACkO,UAAU,CAAC,MAAM,CAAC,CAC/BR,kBAAkB,CAAC,KAAK,CAAC,CACzBC,OAAO,CAAC,IAAI,CAAC,CACbC,QAAQ,CAAC,IAAI,CAAC,CAChB,CAAC,CAED,GAAI7O,SAAS,CAAE,CACb,mBACEX,IAAA,QAAKgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,cAChCjC,IAAA,QAAKgC,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAC,YAEzB,CAAK,CAAC,CACH,CAAC,CAEV,CAEA,GAAI,CAACoN,eAAe,CAAE,CACpB,mBAAOrP,IAAA,CAACI,KAAK,EAACE,OAAO,CAAEyP,WAAY,CAAE,CAAC,CACxC,CAEA,mBACE7P,KAAA,QAAK8B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB/B,KAAA,WAAQ8B,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5B/B,KAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BjC,IAAA,OAAAiC,QAAA,CAAI,wBAAsB,CAAI,CAAC,cAC/B/B,KAAA,QAAK8B,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB/B,KAAA,SAAA+B,QAAA,EAAM,WAAS,CAACF,IAAI,CAACuM,UAAU,EAAIvM,IAAI,CAACtB,QAAQ,EAAO,CAAC,cACxDT,IAAA,WAAQ4E,OAAO,CAAEqL,YAAa,CAACjO,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAEtD,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,cACN/B,KAAA,QAAA+B,QAAA,eACEjC,IAAA,WACEgC,SAAS,CAAEyN,UAAU,GAAK,WAAW,CAAG,QAAQ,CAAG,EAAG,CACtD7K,OAAO,CAAEA,CAAA,GAAM8K,aAAa,CAAC,WAAW,CAAE,CAAAzN,QAAA,CAC3C,WAED,CAAQ,CAAC,cACTjC,IAAA,WACEgC,SAAS,CAAEyN,UAAU,GAAK,UAAU,CAAG,QAAQ,CAAG,EAAG,CACrD7K,OAAO,CAAEA,CAAA,GAAM8K,aAAa,CAAC,UAAU,CAAE,CAAAzN,QAAA,CAC1C,UAED,CAAQ,CAAC,cACTjC,IAAA,WACEgC,SAAS,CAAEyN,UAAU,GAAK,SAAS,CAAG,QAAQ,CAAG,EAAG,CACpD7K,OAAO,CAAEA,CAAA,GAAM8K,aAAa,CAAC,SAAS,CAAE,CAAAzN,QAAA,CACzC,SAED,CAAQ,CAAC,CACRF,IAAI,CAAC8B,IAAI,GAAK,OAAO,eACpB7D,IAAA,WACEgC,SAAS,CAAEyN,UAAU,GAAK,OAAO,CAAG,QAAQ,CAAG,EAAG,CAClD7K,OAAO,CAAEA,CAAA,GAAM8K,aAAa,CAAC,OAAO,CAAE,CAAAzN,QAAA,CACvC,OAED,CAAQ,CACT,EACE,CAAC,EACA,CAAC,cAET/B,KAAA,SAAM8B,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC3BwN,UAAU,GAAK,WAAW,eAAIzP,IAAA,CAAC0C,SAAS,EAACZ,KAAK,CAAEA,KAAM,CAAE,CAAC,CACzD2N,UAAU,GAAK,UAAU,eAAIzP,IAAA,CAAC4C,QAAQ,EAACd,KAAK,CAAEA,KAAM,CAACC,IAAI,CAAEA,IAAK,CAAE,CAAC,CACnE0N,UAAU,GAAK,SAAS,eAAIzP,IAAA,CAACgH,OAAO,EAAClF,KAAK,CAAEA,KAAM,CAACC,IAAI,CAAEA,IAAK,CAAE,CAAC,CACjE0N,UAAU,GAAK,OAAO,eAAIzP,IAAA,CAACwN,KAAK,EAAC1L,KAAK,CAAEA,KAAM,CAACC,IAAI,CAAEA,IAAK,CAAE,CAAC,EAC1D,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAqN,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}