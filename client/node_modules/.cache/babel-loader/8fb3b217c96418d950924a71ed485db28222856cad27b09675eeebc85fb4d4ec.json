{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import InvoiceDashboard from'./InvoiceDashboard';import'./InvoiceDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE='/texon-invoicing-portal/api';// Login Component\nfunction Login(_ref){let{onLogin}=_ref;const[credentials,setCredentials]=useState({username:'',password:''});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});const data=await response.json();if(response.ok){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));onLogin(data.user,data.token);}else{setError(data.error||'Login failed');}}catch(error){setError('Network error. Please try again.');}setIsLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to access the invoicing management system\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:credentials.username,onChange:e=>setCredentials({...credentials,username:e.target.value}),required:true,autoComplete:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:credentials.password,onChange:e=>setCredentials({...credentials,password:e.target.value}),required:true,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"btn-primary\",children:isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Default Admin Credentials:\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"code\",{children:\"admin\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Password: \",/*#__PURE__*/_jsx(\"code\",{children:\"changeme123\"})]}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u26A0\\uFE0F Change these after first login!\"})]})]})});}// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard(_ref2){let{token}=_ref2;return/*#__PURE__*/_jsx(InvoiceDashboard,{token:token});}// Enhanced Settings Component - Replace your existing Settings component with this:\nfunction Settings(_ref3){let{token,user}=_ref3;const[settings,setSettings]=useState({});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[configStatus,setConfigStatus]=useState(null);const[testingEmail,setTestingEmail]=useState(false);const[orderStatuses,setOrderStatuses]=useState([]);const[loadingOrderStatuses,setLoadingOrderStatuses]=useState(false);// Default settings structure\nconst defaultSettings={// Cron Job Settings\ncron_enabled:true,cron_schedule:'0 19 * * *',// 7:00 PM daily\ncron_timezone:'America/New_York',// Email Settings\nemail_notifications:true,email_recipients:'',email_on_zero_discrepancies:false,email_include_excel:false,// Report Settings\nreport_retention_days:30,max_discrepancies_in_email:20,auto_cleanup_enabled:false,// System Settings\napi_timeout_seconds:30,max_concurrent_requests:5,debug_logging:false,// SKU Filter Settings\nignored_skus:'',// Order Status Filter Settings\nignored_order_statuses:''};useEffect(()=>{loadSettings();loadConfigStatus();loadOrderStatuses();},[]);const loadSettings=async()=>{try{const response=await fetch(`${API_BASE}/settings`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Merge with defaults to ensure all settings exist\nsetSettings({...defaultSettings,...data});}catch(error){console.error('Error loading settings:',error);setSettings(defaultSettings);}finally{setLoading(false);}};const loadConfigStatus=async()=>{try{const response=await fetch(`${API_BASE}/config-status`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setConfigStatus(data);}catch(error){console.error('Error loading config status:',error);}};const loadOrderStatuses=async()=>{if(user.role!=='admin')return;setLoadingOrderStatuses(true);try{const response=await fetch(`${API_BASE}/order-statuses`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(data.success){setOrderStatuses(data.data);}else{console.error('Error loading order statuses:',data.error);}}catch(error){console.error('Error loading order statuses:',error);}finally{setLoadingOrderStatuses(false);}};const saveSettings=async()=>{setSaving(true);try{const response=await fetch(`${API_BASE}/settings`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(settings)});const data=await response.json();if(response.ok&&data.success){alert('Settings saved successfully!');}else{throw new Error(data.error||'Failed to save settings');}}catch(error){console.error('Error saving settings:',error);alert(`Error saving settings: ${error.message}`);}finally{setSaving(false);}};const testEmailConfiguration=async()=>{setTestingEmail(true);try{const response=await fetch(`${API_BASE}/test-email`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({recipients:settings.email_recipients})});const data=await response.json();if(response.ok&&data.success){alert('Test email sent successfully! Check your inbox.');}else{throw new Error(data.error||'Failed to send test email');}}catch(error){console.error('Error testing email:',error);alert(`Error sending test email: ${error.message}`);}finally{setTestingEmail(false);}};const updateSetting=(key,value)=>{setSettings(prev=>({...prev,[key]:value}));};const formatCronDescription=cronExpression=>{const descriptions={'0 19 * * *':'Daily at 7:00 PM','0 18 * * *':'Daily at 6:00 PM','0 20 * * *':'Daily at 8:00 PM','0 17 * * *':'Daily at 5:00 PM','0 12 * * *':'Daily at 12:00 PM (Noon)','0 9 * * *':'Daily at 9:00 AM','0 19 * * 1-5':'Weekdays at 7:00 PM','0 0 * * 0':'Weekly on Sunday at Midnight','0 19 * * 0':'Weekly on Sunday at 7:00 PM'};return descriptions[cronExpression]||'Custom schedule';};if(user.role!=='admin'){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"access-denied\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F Admin access required to modify system settings.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Contact your system administrator if you need to change settings.\"})]})]});}if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading settings...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"System Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving...':'💾 Save Settings'})]}),configStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"config-overview\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA System Configuration Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.supabase_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.supabase_configured?'✅':'❌'}),/*#__PURE__*/_jsx(\"span\",{children:\"Database (Supabase)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.brightpearl_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.brightpearl_configured?'✅':'⚠️'}),/*#__PURE__*/_jsx(\"span\",{children:\"Brightpearl API\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.infoplus_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.infoplus_configured?'✅':'⚠️'}),/*#__PURE__*/_jsx(\"span\",{children:\"Infoplus API\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.email_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.email_configured?'✅':'⚠️'}),/*#__PURE__*/_jsx(\"span\",{children:\"Email Service\"})]})]}),configStatus.overall_ready?/*#__PURE__*/_jsx(\"p\",{className:\"status-message success\",children:\"\\uD83C\\uDF89 All systems configured and ready!\"}):/*#__PURE__*/_jsx(\"p\",{className:\"status-message warning\",children:\"\\u26A0\\uFE0F Some services need configuration. Check environment variables.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u23F0 Scheduled Inventory Comparisons\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.cron_enabled,onChange:e=>updateSetting('cron_enabled',e.target.checked)}),\"Enable Automatic Daily Comparisons\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Automatically run inventory comparisons on a schedule\"})]}),settings.cron_enabled&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Schedule\"}),/*#__PURE__*/_jsxs(\"select\",{value:settings.cron_schedule,onChange:e=>updateSetting('cron_schedule',e.target.value),className:\"setting-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0 9 * * *\",children:\"Daily at 9:00 AM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 12 * * *\",children:\"Daily at 12:00 PM (Noon)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 17 * * *\",children:\"Daily at 5:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 18 * * *\",children:\"Daily at 6:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * *\",children:\"Daily at 7:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 20 * * *\",children:\"Daily at 8:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * 1-5\",children:\"Weekdays at 7:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * 0\",children:\"Weekly on Sunday at 7:00 PM\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"setting-description\",children:[\"Current: \",formatCronDescription(settings.cron_schedule)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Timezone\"}),/*#__PURE__*/_jsxs(\"select\",{value:settings.cron_timezone,onChange:e=>updateSetting('cron_timezone',e.target.value),className:\"setting-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"America/New_York\",children:\"Eastern Time (EST/EDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Chicago\",children:\"Central Time (CST/CDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Denver\",children:\"Mountain Time (MST/MDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Los_Angeles\",children:\"Pacific Time (PST/PDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UTC\",children:\"UTC (Universal Time)\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCE7 Email Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.email_notifications,onChange:e=>updateSetting('email_notifications',e.target.checked)}),\"Enable Email Notifications\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send email reports when inventory comparisons complete\"})]}),settings.email_notifications&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Email Recipients\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.email_recipients,onChange:e=>updateSetting('email_recipients',e.target.value),placeholder:\"email1@company.com, email2@company.com\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Comma-separated list of email addresses to receive reports\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.email_on_zero_discrepancies,onChange:e=>updateSetting('email_on_zero_discrepancies',e.target.checked)}),\"Email even when no discrepancies found\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send confirmation emails even when inventory matches perfectly\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Max Discrepancies in Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.max_discrepancies_in_email,onChange:e=>updateSetting('max_discrepancies_in_email',parseInt(e.target.value)),min:\"5\",max:\"100\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Maximum number of discrepancies to include in email body (others will be noted as \\\"see Excel\\\")\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item email-test\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:testEmailConfiguration,disabled:testingEmail||!settings.email_recipients,className:\"btn-secondary\",children:testingEmail?'Sending...':'📧 Send Test Email'}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send a test email to verify configuration\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Report Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Report Retention (Days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.report_retention_days,onChange:e=>updateSetting('report_retention_days',parseInt(e.target.value)),min:\"1\",max:\"365\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"How many days to keep old reports before they can be cleaned up\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.auto_cleanup_enabled,onChange:e=>updateSetting('auto_cleanup_enabled',e.target.checked)}),\"Enable Automatic Report Cleanup\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Automatically delete reports older than retention period (keeps at least the most recent)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2699\\uFE0F System Performance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"API Timeout (Seconds)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.api_timeout_seconds,onChange:e=>updateSetting('api_timeout_seconds',parseInt(e.target.value)),min:\"10\",max:\"300\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"How long to wait for API responses before timing out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Max Concurrent Requests\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.max_concurrent_requests,onChange:e=>updateSetting('max_concurrent_requests',parseInt(e.target.value)),min:\"1\",max:\"20\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Maximum number of simultaneous API requests (higher = faster but more load)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.debug_logging,onChange:e=>updateSetting('debug_logging',e.target.checked)}),\"Enable Debug Logging\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Log detailed debugging information (may impact performance)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD0D SKU Filter Settings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Ignored SKUs\"}),/*#__PURE__*/_jsx(\"textarea\",{value:settings.ignored_skus||'',onChange:e=>updateSetting('ignored_skus',e.target.value),rows:\"4\",className:\"setting-input\",placeholder:\"Enter SKUs to ignore during comparisons, one per line\\nExample:\\nLCLIPS\\nMISC\\nTEST170228\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"SKUs listed here will be excluded from all inventory comparisons (both manual and scheduled). Enter one SKU per line. Changes take effect on the next comparison.\"}),settings.ignored_skus&&settings.ignored_skus.trim()&&/*#__PURE__*/_jsxs(\"div\",{className:\"ignored-skus-preview\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Currently ignored SKUs:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{margin:'5px 0',paddingLeft:'20px',fontSize:'0.9em'},children:settings.ignored_skus.trim().split('\\n').map((sku,index)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'#6c757d'},children:sku.trim()},index))})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCB Order Status Filter Settings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-group\",children:loadingOrderStatuses?/*#__PURE__*/_jsx(\"p\",{children:\"Loading order statuses...\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Ignored Order Statuses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"order-status-selection\",children:orderStatuses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"checkbox-grid\",style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(250px, 1fr))',gap:'10px',margin:'10px 0'},children:orderStatuses.map(status=>{const isIgnored=settings.ignored_order_statuses?settings.ignored_order_statuses.split(',').map(s=>s.trim()).includes(status.statusid.toString()):false;return/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-item\",style:{display:'flex',alignItems:'center',padding:'8px',border:'1px solid #ddd',borderRadius:'4px',backgroundColor:isIgnored?'#fff3cd':'white'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:isIgnored,onChange:e=>{const statusIds=settings.ignored_order_statuses?settings.ignored_order_statuses.split(',').map(s=>s.trim()).filter(s=>s):[];if(e.target.checked){statusIds.push(status.statusid.toString());}else{const index=statusIds.indexOf(status.statusid.toString());if(index>-1)statusIds.splice(index,1);}updateSetting('ignored_order_statuses',statusIds.join(','));},style:{marginRight:'8px'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:status.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.9em',color:'#666'},children:[\"ID: \",status.statusid]})]})]},status.statusid);})}):/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',fontStyle:'italic'},children:\"No order statuses found. Check your Brightpearl connection.\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Orders with the selected statuses will be excluded from all dashboard reporting. This is useful to ignore orders in statuses like 'Quote', 'On Hold', or 'Cancelled' that shouldn't be included in revenue calculations.\"}),settings.ignored_order_statuses&&settings.ignored_order_statuses.trim()&&/*#__PURE__*/_jsxs(\"div\",{className:\"ignored-statuses-preview\",style:{background:'#f8f9fa',padding:'15px',borderRadius:'6px',marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Currently ignored order statuses:\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'8px'},children:settings.ignored_order_statuses.split(',').map(statusId=>{const status=orderStatuses.find(s=>s.statusid.toString()===statusId.trim());return status?/*#__PURE__*/_jsx(\"span\",{style:{display:'inline-block',background:'#dc3545',color:'white',padding:'4px 8px',borderRadius:'4px',margin:'2px',fontSize:'0.85em'},children:status.name},statusId.trim()):null;})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving Settings...':'💾 Save All Settings'}),/*#__PURE__*/_jsx(\"p\",{className:\"save-note\",children:\"Changes take effect immediately. Some settings may require a server restart.\"})]})]});}// Replace the Reports component in your client/src/App.js with this enhanced version:\nfunction Reports(_ref4){let{token,user}=_ref4;const[reports,setReports]=useState([]);const[loading,setLoading]=useState(true);const[expandedReports,setExpandedReports]=useState(new Set());const[pagination,setPagination]=useState({});// Track pagination for each report\nconst[downloadingReports,setDownloadingReports]=useState(new Set());const[deletingReports,setDeletingReports]=useState(new Set());const[deletingAll,setDeletingAll]=useState(false);useEffect(()=>{loadReports();},[]);const loadReports=async()=>{try{const response=await fetch(`${API_BASE}/reports`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Parse discrepancies for each report\nconst parsedReports=data.map(report=>({...report,discrepancies:(()=>{try{if(typeof report.discrepancies==='string'){return JSON.parse(report.discrepancies);}else if(Array.isArray(report.discrepancies)){return report.discrepancies;}else{return[];}}catch(e){console.error('Error parsing discrepancies for report:',report.id,e);return[];}})()}));setReports(parsedReports);// Initialize pagination for each report (start with page 1)\nconst initialPagination={};parsedReports.forEach(report=>{initialPagination[report.id]={currentPage:1,itemsPerPage:25};});setPagination(initialPagination);}catch(error){console.error('Error loading reports:',error);}finally{setLoading(false);}};const deleteReport=async report=>{const confirmMessage=`Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}const reportId=report.id;setDeletingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){// Remove the report from the local state\nsetReports(prev=>prev.filter(r=>r.id!==reportId));// Also remove from expanded reports if it was expanded\nsetExpandedReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});alert(`Report from ${report.date} has been deleted successfully.`);}else{throw new Error(data.error||'Failed to delete report');}}catch(error){console.error('Error deleting report:',error);alert(`Failed to delete report: ${error.message}`);}finally{setDeletingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const deleteAllReports=async()=>{if(reports.length===0){alert('No reports to delete.');return;}const confirmMessage=`Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;if(!window.confirm(confirmMessage)){return;}// Double confirmation for such a destructive action\nconst doubleConfirm=window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);if(!doubleConfirm){return;}setDeletingAll(true);try{let deletedCount=0;let failedCount=0;const totalReports=reports.length;// Delete reports one by one to handle any individual failures\nfor(const report of reports){try{const response=await fetch(`${API_BASE}/reports/${report.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){deletedCount++;}else{failedCount++;console.error(`Failed to delete report ${report.id}:`,data.error);}}catch(error){failedCount++;console.error(`Error deleting report ${report.id}:`,error);}}// Refresh the reports list\nawait loadReports();// Show results\nif(deletedCount===totalReports){alert(`Successfully deleted all ${deletedCount} reports.`);}else if(deletedCount>0){alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);}else{alert(`Failed to delete any reports. Please try again or contact support.`);}}catch(error){console.error('Error during bulk deletion:',error);alert(`Error during deletion: ${error.message}`);// Refresh the list to see current state\nawait loadReports();}finally{setDeletingAll(false);}};const toggleReportExpansion=reportId=>{const newExpanded=new Set(expandedReports);if(newExpanded.has(reportId)){newExpanded.delete(reportId);}else{newExpanded.add(reportId);}setExpandedReports(newExpanded);};const changePage=(reportId,newPage)=>{setPagination(prev=>({...prev,[reportId]:{...prev[reportId],currentPage:newPage}}));};const getPaginatedDiscrepancies=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};const startIndex=(pageInfo.currentPage-1)*pageInfo.itemsPerPage;const endIndex=startIndex+pageInfo.itemsPerPage;return discrepancies.slice(startIndex,endIndex);};const getTotalPages=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};return Math.ceil(discrepancies.length/pageInfo.itemsPerPage);};const downloadExcelReport=async report=>{const reportId=report.id;setDownloadingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}/excel`,{method:'GET',headers:{'Authorization':`Bearer ${token}`}});if(!response.ok){throw new Error(`Failed to download report: ${response.statusText}`);}// Get the blob data\nconst blob=await response.blob();// Create download link\nconst url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=`inventory-report-${report.date}-${reportId}.xlsx`;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error downloading Excel report:',error);alert(`Failed to download report: ${error.message}`);}finally{setDownloadingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const renderPagination=(discrepancies,reportId)=>{var _pagination$reportId;const totalPages=getTotalPages(discrepancies,reportId);const currentPage=((_pagination$reportId=pagination[reportId])===null||_pagination$reportId===void 0?void 0:_pagination$reportId.currentPage)||1;if(totalPages<=1)return null;const pages=[];const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);// Adjust start page if we're near the end\nif(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}return/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",style:{margin:'20px 0',display:'flex',justifyContent:'center',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage-1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"Previous\"}),Array.from({length:endPage-startPage+1},(_,i)=>startPage+i).map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,page),style:{padding:'8px 12px',border:'1px solid #ddd',background:page===currentPage?'#007bff':'white',color:page===currentPage?'white':'black',cursor:'pointer'},children:page},page)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage+1),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,totalPages),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Last\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'20px',fontSize:'14px',color:'#666'},children:[\"Page \",currentPage,\" of \",totalPages,\" (\",discrepancies.length,\" total discrepancies)\"]})]});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading reports...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"reports\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reports History (Last 30 Days)\"}),user&&user.role==='admin'&&reports.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:deleteAllReports,disabled:deletingAll,style:{padding:'10px 20px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingAll?'not-allowed':'pointer',fontSize:'14px',fontWeight:'bold',opacity:deletingAll?0.6:1},children:deletingAll?'🗑️ Deleting All...':`🗑️ Delete All Reports (${reports.length})`})]}),reports.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No reports available yet. Run your first comparison!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"reports-list\",children:reports.map((report,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"report-date\",children:report.date}),/*#__PURE__*/_jsxs(\"span\",{className:`discrepancies-badge ${report.total_discrepancies>0?'has-discrepancies':'no-discrepancies'}`,children:[report.total_discrepancies,\" discrepancies\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"report-time\",children:new Date(report.created_at).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadExcelReport(report),disabled:downloadingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:downloadingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:downloadingReports.has(report.id)?0.6:1},children:downloadingReports.has(report.id)?'📥 Downloading...':'📊 Download Excel'}),report.total_discrepancies>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleReportExpansion(report.id),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:expandedReports.has(report.id)?'▼ Hide Details':'▶ View Details'}),user&&user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteReport(report),disabled:deletingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:deletingReports.has(report.id)?0.6:1},children:deletingReports.has(report.id)?'🗑️ Deleting...':'🗑️ Delete'})]})]}),report.total_discrepancies>0&&expandedReports.has(report.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"report-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"discrepancies-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Inventory Discrepancies\"}),renderPagination(report.discrepancies,report.id),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',margin:'10px 0'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Brightpearl\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Infoplus\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Difference\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"% Diff\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:getPaginatedDiscrepancies(report.discrepancies,report.id).map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:itemIndex%2===0?'white':'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',fontWeight:'bold'},children:item.sku}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px'},children:item.productName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.brightpearl_stock}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.infoplus_stock}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right',color:item.difference<0?'red':'green',fontWeight:'bold'},children:[item.difference>0?'+':'',item.difference]}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.percentage_diff?`${item.percentage_diff}%`:'N/A'})]},itemIndex))})]}),renderPagination(report.discrepancies,report.id)]})})]},report.id||index))})]});}// Enhanced Users Component - Replace your existing Users component with this:\nfunction Users(_ref5){let{token,user}=_ref5;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[editingUser,setEditingUser]=useState(null);const[showAddUser,setShowAddUser]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);useEffect(()=>{if(user.role==='admin'){loadUsers();}},[user.role]);const loadUsers=async()=>{try{const response=await fetch(`${API_BASE}/users`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setUsers(data);}catch(error){console.error('Error loading users:',error);}finally{setLoading(false);}};const handleEditUser=userToEdit=>{setEditingUser({id:userToEdit.id,username:userToEdit.username,email:userToEdit.email||'',first_name:userToEdit.first_name||'',last_name:userToEdit.last_name||'',role:userToEdit.role,is_active:userToEdit.is_active,password:'',// Always start with empty password\nconfirmPassword:''});};const handleAddUser=()=>{setShowAddUser(true);setEditingUser({username:'',email:'',first_name:'',last_name:'',role:'user',is_active:true,password:'',confirmPassword:''});};const handleSaveUser=async e=>{e.preventDefault();setIsSubmitting(true);try{// Validation\nif(!editingUser.username.trim()){alert('Username is required');return;}if(!editingUser.email.trim()){alert('Email is required');return;}if(!editingUser.first_name.trim()){alert('First name is required');return;}if(!editingUser.last_name.trim()){alert('Last name is required');return;}// For new users, password is required\nif(showAddUser&&!editingUser.password){alert('Password is required for new users');return;}// If password is being changed, validate it\nif(editingUser.password){if(editingUser.password.length<6){alert('Password must be at least 6 characters long');return;}if(editingUser.password!==editingUser.confirmPassword){alert('Passwords do not match');return;}}const userData={username:editingUser.username.trim(),email:editingUser.email.trim(),first_name:editingUser.first_name.trim(),last_name:editingUser.last_name.trim(),role:editingUser.role,is_active:editingUser.is_active};// Only include password if it's being set\nif(editingUser.password){userData.password=editingUser.password;}const url=showAddUser?`${API_BASE}/users`:`${API_BASE}/users/${editingUser.id}`;const method=showAddUser?'POST':'PUT';const response=await fetch(url,{method:method,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();if(response.ok&&data.success){alert(showAddUser?'User created successfully!':'User updated successfully!');setEditingUser(null);setShowAddUser(false);await loadUsers();// Refresh the list\n}else{throw new Error(data.error||'Failed to save user');}}catch(error){console.error('Error saving user:',error);alert(`Error: ${error.message}`);}finally{setIsSubmitting(false);}};const handleDeleteUser=async userToDelete=>{if(userToDelete.id===user.id){alert('You cannot delete your own account');return;}const confirmMessage=`Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}try{const response=await fetch(`${API_BASE}/users/${userToDelete.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){alert('User deleted successfully');await loadUsers();}else{throw new Error(data.error||'Failed to delete user');}}catch(error){console.error('Error deleting user:',error);alert(`Error: ${error.message}`);}};const cancelEdit=()=>{setEditingUser(null);setShowAddUser(false);};if(user.role!=='admin'){return/*#__PURE__*/_jsx(\"div\",{children:\"Access denied. Admin privileges required.\"});}if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"users\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUser,style:{padding:'10px 20px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'14px',fontWeight:'bold'},children:\"\\u2795 Add New User\"})]}),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"user-form-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:showAddUser?'Add New User':`Edit User: ${editingUser.username}`}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.username,onChange:e=>setEditingUser({...editingUser,username:e.target.value}),required:true,disabled:!showAddUser// Username can't be changed for existing users\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editingUser.email,onChange:e=>setEditingUser({...editingUser,email:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.first_name,onChange:e=>setEditingUser({...editingUser,first_name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.last_name,onChange:e=>setEditingUser({...editingUser,last_name:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.role,onChange:e=>setEditingUser({...editingUser,role:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.is_active,onChange:e=>setEditingUser({...editingUser,is_active:e.target.value==='true'}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:showAddUser?'Password *':'New Password (leave blank to keep current)'}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.password,onChange:e=>setEditingUser({...editingUser,password:e.target.value}),required:showAddUser,minLength:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.confirmPassword,onChange:e=>setEditingUser({...editingUser,confirmPassword:e.target.value}),required:showAddUser||editingUser.password})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelEdit,disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#6c757d',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',marginRight:'10px'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:isSubmitting?'Saving...':showAddUser?'Create User':'Update User'})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users.map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-header\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[u.first_name,\" \",u.last_name]}),/*#__PURE__*/_jsx(\"span\",{className:`user-role ${u.role}`,children:u.role}),!u.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"user-status inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",u.username]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",u.email||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last login:\"}),\" \",u.last_login?new Date(u.last_login).toLocaleString():'Never']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(u.created_at).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditUser(u),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px',marginRight:'8px'},children:\"\\u270F\\uFE0F Edit\"}),u.id!==user.id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(u),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]},u.id))})]});}// Main App Component\nfunction App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[currentTab,setCurrentTab]=useState('dashboard');const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Check for existing authentication\nconst savedToken=localStorage.getItem('token');const savedUser=localStorage.getItem('user');if(savedToken&&savedUser){try{const userData=JSON.parse(savedUser);setToken(savedToken);setUser(userData);setIsAuthenticated(true);}catch(error){// If there's an error parsing the saved user data, clear it\nlocalStorage.removeItem('token');localStorage.removeItem('user');}}setIsLoading(false);},[]);const handleLogin=(userData,userToken)=>{setUser(userData);setToken(userToken);setIsAuthenticated(true);// Update localStorage with the new user data structure\nlocalStorage.setItem('user',JSON.stringify(userData));localStorage.setItem('token',userToken);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsAuthenticated(false);setUser(null);setToken(null);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user.first_name||user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn-logout\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{className:currentTab==='dashboard'?'active':'',onClick:()=>setCurrentTab('dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='settings'?'active':'',onClick:()=>setCurrentTab('settings'),children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='reports'?'active':'',onClick:()=>setCurrentTab('reports'),children:\"Reports\"}),user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{className:currentTab==='users'?'active':'',onClick:()=>setCurrentTab('users'),children:\"Users\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[currentTab==='dashboard'&&/*#__PURE__*/_jsx(Dashboard,{token:token}),currentTab==='settings'&&/*#__PURE__*/_jsx(Settings,{token:token,user:user}),currentTab==='reports'&&/*#__PURE__*/_jsx(Reports,{token:token,user:user}),currentTab==='users'&&/*#__PURE__*/_jsx(Users,{token:token,user:user})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","InvoiceDashboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","Login","_ref","onLogin","credentials","setCredentials","username","password","isLoading","setIsLoading","error","setError","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","user","className","children","onSubmit","type","value","onChange","target","required","autoComplete","disabled","Dashboard","_ref2","Settings","_ref3","settings","setSettings","loading","setLoading","saving","setSaving","configStatus","setConfigStatus","testingEmail","setTestingEmail","orderStatuses","setOrderStatuses","loadingOrderStatuses","setLoadingOrderStatuses","defaultSettings","cron_enabled","cron_schedule","cron_timezone","email_notifications","email_recipients","email_on_zero_discrepancies","email_include_excel","report_retention_days","max_discrepancies_in_email","auto_cleanup_enabled","api_timeout_seconds","max_concurrent_requests","debug_logging","ignored_skus","ignored_order_statuses","loadSettings","loadConfigStatus","loadOrderStatuses","console","role","success","saveSettings","alert","Error","message","testEmailConfiguration","recipients","updateSetting","key","prev","formatCronDescription","cronExpression","descriptions","onClick","supabase_configured","brightpearl_configured","infoplus_configured","email_configured","overall_ready","checked","placeholder","parseInt","min","max","rows","trim","style","margin","paddingLeft","fontSize","split","map","sku","index","color","length","display","gridTemplateColumns","gap","status","isIgnored","s","includes","statusid","toString","alignItems","padding","border","borderRadius","backgroundColor","statusIds","filter","push","indexOf","splice","join","marginRight","fontWeight","name","fontStyle","background","marginTop","statusId","find","Reports","_ref4","reports","setReports","expandedReports","setExpandedReports","Set","pagination","setPagination","downloadingReports","setDownloadingReports","deletingReports","setDeletingReports","deletingAll","setDeletingAll","loadReports","parsedReports","report","discrepancies","parse","Array","isArray","id","initialPagination","forEach","currentPage","itemsPerPage","deleteReport","confirmMessage","date","window","confirm","reportId","add","r","newSet","delete","deleteAllReports","doubleConfirm","deletedCount","failedCount","totalReports","toggleReportExpansion","newExpanded","has","changePage","newPage","getPaginatedDiscrepancies","pageInfo","startIndex","endIndex","slice","getTotalPages","Math","ceil","downloadExcelReport","statusText","blob","url","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","renderPagination","_pagination$reportId","totalPages","pages","maxVisiblePages","startPage","floor","endPage","justifyContent","cursor","from","_","i","page","marginLeft","marginBottom","opacity","total_discrepancies","Date","created_at","toLocaleString","width","borderCollapse","textAlign","item","itemIndex","productName","brightpearl_stock","infoplus_stock","difference","percentage_diff","Users","_ref5","users","setUsers","editingUser","setEditingUser","showAddUser","setShowAddUser","isSubmitting","setIsSubmitting","loadUsers","handleEditUser","userToEdit","email","first_name","last_name","is_active","confirmPassword","handleAddUser","handleSaveUser","userData","handleDeleteUser","userToDelete","cancelEdit","minLength","u","last_login","toLocaleDateString","App","isAuthenticated","setIsAuthenticated","setUser","setToken","currentTab","setCurrentTab","savedToken","getItem","savedUser","removeItem","handleLogin","userToken","handleLogout"],"sources":["/home/collegesportsdir/public_html/texon-invoicing-portal/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport InvoiceDashboard from './InvoiceDashboard';\nimport './InvoiceDashboard.css';\n\nconst API_BASE = '/texon-invoicing-portal/api';\n\n// Login Component\nfunction Login({ onLogin }) {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_BASE}/auth/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials)\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        onLogin(data.user, data.token);\n      } else {\n        setError(data.error || 'Login failed');\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h1>Texon Invoicing Portal</h1>\n        <p>Please log in to access the invoicing management system</p>\n        \n        {error && <div className=\"error-message\">{error}</div>}\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>Username:</label>\n            <input\n              type=\"text\"\n              value={credentials.username}\n              onChange={(e) => setCredentials({...credentials, username: e.target.value})}\n              required\n              autoComplete=\"username\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              value={credentials.password}\n              onChange={(e) => setCredentials({...credentials, password: e.target.value})}\n              required\n              autoComplete=\"current-password\"\n            />\n          </div>\n          \n          <button type=\"submit\" disabled={isLoading} className=\"btn-primary\">\n            {isLoading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        \n        <div className=\"login-help\">\n          <p><strong>Default Admin Credentials:</strong></p>\n          <p>Username: <code>admin</code></p>\n          <p>Password: <code>changeme123</code></p>\n          <small>⚠️ Change these after first login!</small>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard({ token }) {\n  return <InvoiceDashboard token={token} />;\n}\n\n// Enhanced Settings Component - Replace your existing Settings component with this:\n\nfunction Settings({ token, user }) {\n  const [settings, setSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [configStatus, setConfigStatus] = useState(null);\n  const [testingEmail, setTestingEmail] = useState(false);\n  const [orderStatuses, setOrderStatuses] = useState([]);\n  const [loadingOrderStatuses, setLoadingOrderStatuses] = useState(false);\n\n  // Default settings structure\n  const defaultSettings = {\n    // Cron Job Settings\n    cron_enabled: true,\n    cron_schedule: '0 19 * * *', // 7:00 PM daily\n    cron_timezone: 'America/New_York',\n    \n    // Email Settings\n    email_notifications: true,\n    email_recipients: '',\n    email_on_zero_discrepancies: false,\n    email_include_excel: false,\n    \n    // Report Settings\n    report_retention_days: 30,\n    max_discrepancies_in_email: 20,\n    auto_cleanup_enabled: false,\n    \n    // System Settings\n    api_timeout_seconds: 30,\n    max_concurrent_requests: 5,\n    debug_logging: false,\n    \n    // SKU Filter Settings\n    ignored_skus: '',\n    \n    // Order Status Filter Settings\n    ignored_order_statuses: ''\n  };\n\n  useEffect(() => {\n    loadSettings();\n    loadConfigStatus();\n    loadOrderStatuses();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/settings`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Merge with defaults to ensure all settings exist\n      setSettings({ ...defaultSettings, ...data });\n    } catch (error) {\n      console.error('Error loading settings:', error);\n      setSettings(defaultSettings);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadConfigStatus = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/config-status`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      setConfigStatus(data);\n    } catch (error) {\n      console.error('Error loading config status:', error);\n    }\n  };\n\n  const loadOrderStatuses = async () => {\n    if (user.role !== 'admin') return;\n    \n    setLoadingOrderStatuses(true);\n    try {\n      const response = await fetch(`${API_BASE}/order-statuses`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      if (data.success) {\n        setOrderStatuses(data.data);\n      } else {\n        console.error('Error loading order statuses:', data.error);\n      }\n    } catch (error) {\n      console.error('Error loading order statuses:', error);\n    } finally {\n      setLoadingOrderStatuses(false);\n    }\n  };\n\n  const saveSettings = async () => {\n    setSaving(true);\n    try {\n      const response = await fetch(`${API_BASE}/settings`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(settings)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('Settings saved successfully!');\n      } else {\n        throw new Error(data.error || 'Failed to save settings');\n      }\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      alert(`Error saving settings: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const testEmailConfiguration = async () => {\n    setTestingEmail(true);\n    try {\n      const response = await fetch(`${API_BASE}/test-email`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          recipients: settings.email_recipients\n        })\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('Test email sent successfully! Check your inbox.');\n      } else {\n        throw new Error(data.error || 'Failed to send test email');\n      }\n    } catch (error) {\n      console.error('Error testing email:', error);\n      alert(`Error sending test email: ${error.message}`);\n    } finally {\n      setTestingEmail(false);\n    }\n  };\n\n  const updateSetting = (key, value) => {\n    setSettings(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const formatCronDescription = (cronExpression) => {\n    const descriptions = {\n      '0 19 * * *': 'Daily at 7:00 PM',\n      '0 18 * * *': 'Daily at 6:00 PM',\n      '0 20 * * *': 'Daily at 8:00 PM',\n      '0 17 * * *': 'Daily at 5:00 PM',\n      '0 12 * * *': 'Daily at 12:00 PM (Noon)',\n      '0 9 * * *': 'Daily at 9:00 AM',\n      '0 19 * * 1-5': 'Weekdays at 7:00 PM',\n      '0 0 * * 0': 'Weekly on Sunday at Midnight',\n      '0 19 * * 0': 'Weekly on Sunday at 7:00 PM'\n    };\n    return descriptions[cronExpression] || 'Custom schedule';\n  };\n\n  if (user.role !== 'admin') {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <div className=\"access-denied\">\n          <p>⚠️ Admin access required to modify system settings.</p>\n          <p>Contact your system administrator if you need to change settings.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <p>Loading settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings\">\n      <div className=\"settings-header\">\n        <h2>System Settings</h2>\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving...' : '💾 Save Settings'}\n        </button>\n      </div>\n\n      {/* Configuration Status Overview */}\n      {configStatus && (\n        <div className=\"config-overview\">\n          <h3>📊 System Configuration Status</h3>\n          <div className=\"status-grid\">\n            <div className={`status-item ${configStatus.supabase_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.supabase_configured ? '✅' : '❌'}</span>\n              <span>Database (Supabase)</span>\n            </div>\n            <div className={`status-item ${configStatus.brightpearl_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.brightpearl_configured ? '✅' : '⚠️'}</span>\n              <span>Brightpearl API</span>\n            </div>\n            <div className={`status-item ${configStatus.infoplus_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.infoplus_configured ? '✅' : '⚠️'}</span>\n              <span>Infoplus API</span>\n            </div>\n            <div className={`status-item ${configStatus.email_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.email_configured ? '✅' : '⚠️'}</span>\n              <span>Email Service</span>\n            </div>\n          </div>\n          {configStatus.overall_ready ? (\n            <p className=\"status-message success\">🎉 All systems configured and ready!</p>\n          ) : (\n            <p className=\"status-message warning\">⚠️ Some services need configuration. Check environment variables.</p>\n          )}\n        </div>\n      )}\n\n      {/* Scheduled Comparison Settings */}\n      <div className=\"settings-section\">\n        <h3>⏰ Scheduled Inventory Comparisons</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.cron_enabled}\n                onChange={(e) => updateSetting('cron_enabled', e.target.checked)}\n              />\n              Enable Automatic Daily Comparisons\n            </label>\n            <p className=\"setting-description\">\n              Automatically run inventory comparisons on a schedule\n            </p>\n          </div>\n\n          {settings.cron_enabled && (\n            <>\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Schedule</label>\n                <select\n                  value={settings.cron_schedule}\n                  onChange={(e) => updateSetting('cron_schedule', e.target.value)}\n                  className=\"setting-input\"\n                >\n                  <option value=\"0 9 * * *\">Daily at 9:00 AM</option>\n                  <option value=\"0 12 * * *\">Daily at 12:00 PM (Noon)</option>\n                  <option value=\"0 17 * * *\">Daily at 5:00 PM</option>\n                  <option value=\"0 18 * * *\">Daily at 6:00 PM</option>\n                  <option value=\"0 19 * * *\">Daily at 7:00 PM</option>\n                  <option value=\"0 20 * * *\">Daily at 8:00 PM</option>\n                  <option value=\"0 19 * * 1-5\">Weekdays at 7:00 PM</option>\n                  <option value=\"0 19 * * 0\">Weekly on Sunday at 7:00 PM</option>\n                </select>\n                <p className=\"setting-description\">\n                  Current: {formatCronDescription(settings.cron_schedule)}\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Timezone</label>\n                <select\n                  value={settings.cron_timezone}\n                  onChange={(e) => updateSetting('cron_timezone', e.target.value)}\n                  className=\"setting-input\"\n                >\n                  <option value=\"America/New_York\">Eastern Time (EST/EDT)</option>\n                  <option value=\"America/Chicago\">Central Time (CST/CDT)</option>\n                  <option value=\"America/Denver\">Mountain Time (MST/MDT)</option>\n                  <option value=\"America/Los_Angeles\">Pacific Time (PST/PDT)</option>\n                  <option value=\"UTC\">UTC (Universal Time)</option>\n                </select>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Email Notification Settings */}\n      <div className=\"settings-section\">\n        <h3>📧 Email Notifications</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.email_notifications}\n                onChange={(e) => updateSetting('email_notifications', e.target.checked)}\n              />\n              Enable Email Notifications\n            </label>\n            <p className=\"setting-description\">\n              Send email reports when inventory comparisons complete\n            </p>\n          </div>\n\n          {settings.email_notifications && (\n            <>\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Email Recipients</label>\n                <input\n                  type=\"text\"\n                  value={settings.email_recipients}\n                  onChange={(e) => updateSetting('email_recipients', e.target.value)}\n                  placeholder=\"email1@company.com, email2@company.com\"\n                  className=\"setting-input\"\n                />\n                <p className=\"setting-description\">\n                  Comma-separated list of email addresses to receive reports\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.email_on_zero_discrepancies}\n                    onChange={(e) => updateSetting('email_on_zero_discrepancies', e.target.checked)}\n                  />\n                  Email even when no discrepancies found\n                </label>\n                <p className=\"setting-description\">\n                  Send confirmation emails even when inventory matches perfectly\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Max Discrepancies in Email</label>\n                <input\n                  type=\"number\"\n                  value={settings.max_discrepancies_in_email}\n                  onChange={(e) => updateSetting('max_discrepancies_in_email', parseInt(e.target.value))}\n                  min=\"5\"\n                  max=\"100\"\n                  className=\"setting-input\"\n                />\n                <p className=\"setting-description\">\n                  Maximum number of discrepancies to include in email body (others will be noted as \"see Excel\")\n                </p>\n              </div>\n\n              <div className=\"setting-item email-test\">\n                <button\n                  onClick={testEmailConfiguration}\n                  disabled={testingEmail || !settings.email_recipients}\n                  className=\"btn-secondary\"\n                >\n                  {testingEmail ? 'Sending...' : '📧 Send Test Email'}\n                </button>\n                <p className=\"setting-description\">\n                  Send a test email to verify configuration\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Report Management Settings */}\n      <div className=\"settings-section\">\n        <h3>📊 Report Management</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Report Retention (Days)</label>\n            <input\n              type=\"number\"\n              value={settings.report_retention_days}\n              onChange={(e) => updateSetting('report_retention_days', parseInt(e.target.value))}\n              min=\"1\"\n              max=\"365\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              How many days to keep old reports before they can be cleaned up\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.auto_cleanup_enabled}\n                onChange={(e) => updateSetting('auto_cleanup_enabled', e.target.checked)}\n              />\n              Enable Automatic Report Cleanup\n            </label>\n            <p className=\"setting-description\">\n              Automatically delete reports older than retention period (keeps at least the most recent)\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* System Performance Settings */}\n      <div className=\"settings-section\">\n        <h3>⚙️ System Performance</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">API Timeout (Seconds)</label>\n            <input\n              type=\"number\"\n              value={settings.api_timeout_seconds}\n              onChange={(e) => updateSetting('api_timeout_seconds', parseInt(e.target.value))}\n              min=\"10\"\n              max=\"300\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              How long to wait for API responses before timing out\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Max Concurrent Requests</label>\n            <input\n              type=\"number\"\n              value={settings.max_concurrent_requests}\n              onChange={(e) => updateSetting('max_concurrent_requests', parseInt(e.target.value))}\n              min=\"1\"\n              max=\"20\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              Maximum number of simultaneous API requests (higher = faster but more load)\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.debug_logging}\n                onChange={(e) => updateSetting('debug_logging', e.target.checked)}\n              />\n              Enable Debug Logging\n            </label>\n            <p className=\"setting-description\">\n              Log detailed debugging information (may impact performance)\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* SKU Filter Settings */}\n      <div className=\"settings-section\">\n        <h3>🔍 SKU Filter Settings</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Ignored SKUs</label>\n            <textarea\n              value={settings.ignored_skus || ''}\n              onChange={(e) => updateSetting('ignored_skus', e.target.value)}\n              rows=\"4\"\n              className=\"setting-input\"\n              placeholder=\"Enter SKUs to ignore during comparisons, one per line&#10;Example:&#10;LCLIPS&#10;MISC&#10;TEST170228\"\n            />\n            <p className=\"setting-description\">\n              SKUs listed here will be excluded from all inventory comparisons (both manual and scheduled).\n              Enter one SKU per line. Changes take effect on the next comparison.\n            </p>\n            {settings.ignored_skus && settings.ignored_skus.trim() && (\n              <div className=\"ignored-skus-preview\">\n                <strong>Currently ignored SKUs:</strong>\n                <ul style={{margin: '5px 0', paddingLeft: '20px', fontSize: '0.9em'}}>\n                  {settings.ignored_skus.trim().split('\\n').map((sku, index) => (\n                    <li key={index} style={{color: '#6c757d'}}>{sku.trim()}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Order Status Filter Settings */}\n      <div className=\"settings-section\">\n        <h3>📋 Order Status Filter Settings</h3>\n        <div className=\"setting-group\">\n          {loadingOrderStatuses ? (\n            <p>Loading order statuses...</p>\n          ) : (\n            <div className=\"setting-item\">\n              <label className=\"setting-label\">Ignored Order Statuses</label>\n              <div className=\"order-status-selection\">\n                {orderStatuses.length > 0 ? (\n                  <div className=\"checkbox-grid\" style={{\n                    display: 'grid', \n                    gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', \n                    gap: '10px', \n                    margin: '10px 0'\n                  }}>\n                    {orderStatuses.map((status) => {\n                      const isIgnored = settings.ignored_order_statuses ? \n                        settings.ignored_order_statuses.split(',').map(s => s.trim()).includes(status.statusid.toString()) : \n                        false;\n                      \n                      return (\n                        <label key={status.statusid} className=\"checkbox-item\" style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          padding: '8px',\n                          border: '1px solid #ddd',\n                          borderRadius: '4px',\n                          backgroundColor: isIgnored ? '#fff3cd' : 'white'\n                        }}>\n                          <input\n                            type=\"checkbox\"\n                            checked={isIgnored}\n                            onChange={(e) => {\n                              const statusIds = settings.ignored_order_statuses ? \n                                settings.ignored_order_statuses.split(',').map(s => s.trim()).filter(s => s) : \n                                [];\n                              \n                              if (e.target.checked) {\n                                statusIds.push(status.statusid.toString());\n                              } else {\n                                const index = statusIds.indexOf(status.statusid.toString());\n                                if (index > -1) statusIds.splice(index, 1);\n                              }\n                              \n                              updateSetting('ignored_order_statuses', statusIds.join(','));\n                            }}\n                            style={{ marginRight: '8px' }}\n                          />\n                          <div>\n                            <div style={{ fontWeight: 'bold' }}>{status.name}</div>\n                            <div style={{ fontSize: '0.9em', color: '#666' }}>ID: {status.statusid}</div>\n                          </div>\n                        </label>\n                      );\n                    })}\n                  </div>\n                ) : (\n                  <p style={{color: '#666', fontStyle: 'italic'}}>\n                    No order statuses found. Check your Brightpearl connection.\n                  </p>\n                )}\n              </div>\n              <p className=\"setting-description\">\n                Orders with the selected statuses will be excluded from all dashboard reporting. \n                This is useful to ignore orders in statuses like 'Quote', 'On Hold', or 'Cancelled' \n                that shouldn't be included in revenue calculations.\n              </p>\n              {settings.ignored_order_statuses && settings.ignored_order_statuses.trim() && (\n                <div className=\"ignored-statuses-preview\" style={{\n                  background: '#f8f9fa', \n                  padding: '15px', \n                  borderRadius: '6px', \n                  marginTop: '10px'\n                }}>\n                  <strong>Currently ignored order statuses:</strong>\n                  <div style={{marginTop: '8px'}}>\n                    {settings.ignored_order_statuses.split(',').map(statusId => {\n                      const status = orderStatuses.find(s => s.statusid.toString() === statusId.trim());\n                      return status ? (\n                        <span key={statusId.trim()} style={{\n                          display: 'inline-block',\n                          background: '#dc3545',\n                          color: 'white',\n                          padding: '4px 8px',\n                          borderRadius: '4px',\n                          margin: '2px',\n                          fontSize: '0.85em'\n                        }}>\n                          {status.name}\n                        </span>\n                      ) : null;\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Save Button at Bottom */}\n      <div className=\"settings-footer\">\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving Settings...' : '💾 Save All Settings'}\n        </button>\n        <p className=\"save-note\">\n          Changes take effect immediately. Some settings may require a server restart.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Replace the Reports component in your client/src/App.js with this enhanced version:\n\nfunction Reports({ token, user }) {\n  const [reports, setReports] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedReports, setExpandedReports] = useState(new Set());\n  const [pagination, setPagination] = useState({}); // Track pagination for each report\n  const [downloadingReports, setDownloadingReports] = useState(new Set());\n  const [deletingReports, setDeletingReports] = useState(new Set());\n  const [deletingAll, setDeletingAll] = useState(false);\n\n  useEffect(() => {\n    loadReports();\n  }, []);\n\n  const loadReports = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/reports`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Parse discrepancies for each report\n      const parsedReports = data.map(report => ({\n        ...report,\n        discrepancies: (() => {\n          try {\n            if (typeof report.discrepancies === 'string') {\n              return JSON.parse(report.discrepancies);\n            } else if (Array.isArray(report.discrepancies)) {\n              return report.discrepancies;\n            } else {\n              return [];\n            }\n          } catch (e) {\n            console.error('Error parsing discrepancies for report:', report.id, e);\n            return [];\n          }\n        })()\n      }));\n      \n      setReports(parsedReports);\n      \n      // Initialize pagination for each report (start with page 1)\n      const initialPagination = {};\n      parsedReports.forEach(report => {\n        initialPagination[report.id] = { currentPage: 1, itemsPerPage: 25 };\n      });\n      setPagination(initialPagination);\n      \n    } catch (error) {\n      console.error('Error loading reports:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteReport = async (report) => {\n    const confirmMessage = `Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    const reportId = report.id;\n    setDeletingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        // Remove the report from the local state\n        setReports(prev => prev.filter(r => r.id !== reportId));\n        \n        // Also remove from expanded reports if it was expanded\n        setExpandedReports(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(reportId);\n          return newSet;\n        });\n\n        alert(`Report from ${report.date} has been deleted successfully.`);\n      } else {\n        throw new Error(data.error || 'Failed to delete report');\n      }\n    } catch (error) {\n      console.error('Error deleting report:', error);\n      alert(`Failed to delete report: ${error.message}`);\n    } finally {\n      setDeletingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const deleteAllReports = async () => {\n    if (reports.length === 0) {\n      alert('No reports to delete.');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    // Double confirmation for such a destructive action\n    const doubleConfirm = window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);\n    \n    if (!doubleConfirm) {\n      return;\n    }\n\n    setDeletingAll(true);\n\n    try {\n      let deletedCount = 0;\n      let failedCount = 0;\n      const totalReports = reports.length;\n\n      // Delete reports one by one to handle any individual failures\n      for (const report of reports) {\n        try {\n          const response = await fetch(`${API_BASE}/reports/${report.id}`, {\n            method: 'DELETE',\n            headers: { 'Authorization': `Bearer ${token}` }\n          });\n\n          const data = await response.json();\n\n          if (response.ok && data.success) {\n            deletedCount++;\n          } else {\n            failedCount++;\n            console.error(`Failed to delete report ${report.id}:`, data.error);\n          }\n        } catch (error) {\n          failedCount++;\n          console.error(`Error deleting report ${report.id}:`, error);\n        }\n      }\n\n      // Refresh the reports list\n      await loadReports();\n\n      // Show results\n      if (deletedCount === totalReports) {\n        alert(`Successfully deleted all ${deletedCount} reports.`);\n      } else if (deletedCount > 0) {\n        alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);\n      } else {\n        alert(`Failed to delete any reports. Please try again or contact support.`);\n      }\n\n    } catch (error) {\n      console.error('Error during bulk deletion:', error);\n      alert(`Error during deletion: ${error.message}`);\n      // Refresh the list to see current state\n      await loadReports();\n    } finally {\n      setDeletingAll(false);\n    }\n  };\n\n  const toggleReportExpansion = (reportId) => {\n    const newExpanded = new Set(expandedReports);\n    if (newExpanded.has(reportId)) {\n      newExpanded.delete(reportId);\n    } else {\n      newExpanded.add(reportId);\n    }\n    setExpandedReports(newExpanded);\n  };\n\n  const changePage = (reportId, newPage) => {\n    setPagination(prev => ({\n      ...prev,\n      [reportId]: {\n        ...prev[reportId],\n        currentPage: newPage\n      }\n    }));\n  };\n\n  const getPaginatedDiscrepancies = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    const startIndex = (pageInfo.currentPage - 1) * pageInfo.itemsPerPage;\n    const endIndex = startIndex + pageInfo.itemsPerPage;\n    return discrepancies.slice(startIndex, endIndex);\n  };\n\n  const getTotalPages = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    return Math.ceil(discrepancies.length / pageInfo.itemsPerPage);\n  };\n\n  const downloadExcelReport = async (report) => {\n    const reportId = report.id;\n    setDownloadingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}/excel`, {\n        method: 'GET',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to download report: ${response.statusText}`);\n      }\n\n      // Get the blob data\n      const blob = await response.blob();\n      \n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `inventory-report-${report.date}-${reportId}.xlsx`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n    } catch (error) {\n      console.error('Error downloading Excel report:', error);\n      alert(`Failed to download report: ${error.message}`);\n    } finally {\n      setDownloadingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const renderPagination = (discrepancies, reportId) => {\n    const totalPages = getTotalPages(discrepancies, reportId);\n    const currentPage = pagination[reportId]?.currentPage || 1;\n\n    if (totalPages <= 1) return null;\n\n    const pages = [];\n    const maxVisiblePages = 5;\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    // Adjust start page if we're near the end\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\n    }\n\n    return (\n      <div className=\"pagination\" style={{ margin: '20px 0', display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '10px' }}>\n        <button \n          onClick={() => changePage(reportId, 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          First\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, currentPage - 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          Previous\n        </button>\n\n        {Array.from({ length: endPage - startPage + 1 }, (_, i) => startPage + i).map(page => (\n          <button\n            key={page}\n            onClick={() => changePage(reportId, page)}\n            style={{\n              padding: '8px 12px',\n              border: '1px solid #ddd',\n              background: page === currentPage ? '#007bff' : 'white',\n              color: page === currentPage ? 'white' : 'black',\n              cursor: 'pointer'\n            }}\n          >\n            {page}\n          </button>\n        ))}\n\n        <button \n          onClick={() => changePage(reportId, currentPage + 1)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Next\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, totalPages)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Last\n        </button>\n\n        <span style={{ marginLeft: '20px', fontSize: '14px', color: '#666' }}>\n          Page {currentPage} of {totalPages} ({discrepancies.length} total discrepancies)\n        </span>\n      </div>\n    );\n  };\n\n  if (loading) {\n    return <div>Loading reports...</div>;\n  }\n\n  return (\n    <div className=\"reports\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>Reports History (Last 30 Days)</h2>\n        \n        {/* Delete All Reports Button - Only show for admin users and when there are reports */}\n        {user && user.role === 'admin' && reports.length > 0 && (\n          <button\n            onClick={deleteAllReports}\n            disabled={deletingAll}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: deletingAll ? 'not-allowed' : 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n              opacity: deletingAll ? 0.6 : 1\n            }}\n          >\n            {deletingAll ? '🗑️ Deleting All...' : `🗑️ Delete All Reports (${reports.length})`}\n          </button>\n        )}\n      </div>\n\n      {reports.length === 0 ? (\n        <p>No reports available yet. Run your first comparison!</p>\n      ) : (\n        <div className=\"reports-list\">\n          {reports.map((report, index) => (\n            <div key={report.id || index} className=\"report-card\">\n              <div className=\"report-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                  <span className=\"report-date\">{report.date}</span>\n                  <span className={`discrepancies-badge ${report.total_discrepancies > 0 ? 'has-discrepancies' : 'no-discrepancies'}`}>\n                    {report.total_discrepancies} discrepancies\n                  </span>\n                  <span className=\"report-time\">{new Date(report.created_at).toLocaleString()}</span>\n                </div>\n                \n                <div style={{ display: 'flex', gap: '8px' }}>\n                  <button\n                    onClick={() => downloadExcelReport(report)}\n                    disabled={downloadingReports.has(report.id)}\n                    style={{\n                      padding: '6px 12px',\n                      backgroundColor: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: downloadingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                      fontSize: '12px',\n                      opacity: downloadingReports.has(report.id) ? 0.6 : 1\n                    }}\n                  >\n                    {downloadingReports.has(report.id) ? '📥 Downloading...' : '📊 Download Excel'}\n                  </button>\n                  \n                  {report.total_discrepancies > 0 && (\n                    <button\n                      onClick={() => toggleReportExpansion(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#007bff',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '12px'\n                      }}\n                    >\n                      {expandedReports.has(report.id) ? '▼ Hide Details' : '▶ View Details'}\n                    </button>\n                  )}\n\n                  {/* Delete Individual Report Button - Only show for admin users */}\n                  {user && user.role === 'admin' && (\n                    <button\n                      onClick={() => deleteReport(report)}\n                      disabled={deletingReports.has(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#dc3545',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: deletingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                        fontSize: '12px',\n                        opacity: deletingReports.has(report.id) ? 0.6 : 1\n                      }}\n                    >\n                      {deletingReports.has(report.id) ? '🗑️ Deleting...' : '🗑️ Delete'}\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {report.total_discrepancies > 0 && expandedReports.has(report.id) && (\n                <div className=\"report-details\">\n                  <div className=\"discrepancies-summary\">\n                    <h4>Inventory Discrepancies</h4>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                    \n                    <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0' }}>\n                      <thead>\n                        <tr style={{ backgroundColor: '#f8f9fa' }}>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>SKU</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>Product</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Brightpearl</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Infoplus</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Difference</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>% Diff</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {getPaginatedDiscrepancies(report.discrepancies, report.id).map((item, itemIndex) => (\n                          <tr key={itemIndex} style={{ backgroundColor: itemIndex % 2 === 0 ? 'white' : '#f8f9fa' }}>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', fontWeight: 'bold' }}>{item.sku}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px' }}>{item.productName || 'N/A'}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.brightpearl_stock}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.infoplus_stock}</td>\n                            <td style={{ \n                              border: '1px solid #dee2e6', \n                              padding: '10px', \n                              textAlign: 'right',\n                              color: item.difference < 0 ? 'red' : 'green',\n                              fontWeight: 'bold'\n                            }}>\n                              {item.difference > 0 ? '+' : ''}{item.difference}\n                            </td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>\n                              {item.percentage_diff ? `${item.percentage_diff}%` : 'N/A'}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Enhanced Users Component - Replace your existing Users component with this:\n\nfunction Users({ token, user }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingUser, setEditingUser] = useState(null);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (user.role === 'admin') {\n      loadUsers();\n    }\n  }, [user.role]);\n\n  const loadUsers = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/users`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      setUsers(data);\n    } catch (error) {\n      console.error('Error loading users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditUser = (userToEdit) => {\n    setEditingUser({\n      id: userToEdit.id,\n      username: userToEdit.username,\n      email: userToEdit.email || '',\n      first_name: userToEdit.first_name || '',\n      last_name: userToEdit.last_name || '',\n      role: userToEdit.role,\n      is_active: userToEdit.is_active,\n      password: '', // Always start with empty password\n      confirmPassword: ''\n    });\n  };\n\n  const handleAddUser = () => {\n    setShowAddUser(true);\n    setEditingUser({\n      username: '',\n      email: '',\n      first_name: '',\n      last_name: '',\n      role: 'user',\n      is_active: true,\n      password: '',\n      confirmPassword: ''\n    });\n  };\n\n  const handleSaveUser = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      // Validation\n      if (!editingUser.username.trim()) {\n        alert('Username is required');\n        return;\n      }\n\n      if (!editingUser.email.trim()) {\n        alert('Email is required');\n        return;\n      }\n\n      if (!editingUser.first_name.trim()) {\n        alert('First name is required');\n        return;\n      }\n\n      if (!editingUser.last_name.trim()) {\n        alert('Last name is required');\n        return;\n      }\n\n      // For new users, password is required\n      if (showAddUser && !editingUser.password) {\n        alert('Password is required for new users');\n        return;\n      }\n\n      // If password is being changed, validate it\n      if (editingUser.password) {\n        if (editingUser.password.length < 6) {\n          alert('Password must be at least 6 characters long');\n          return;\n        }\n\n        if (editingUser.password !== editingUser.confirmPassword) {\n          alert('Passwords do not match');\n          return;\n        }\n      }\n\n      const userData = {\n        username: editingUser.username.trim(),\n        email: editingUser.email.trim(),\n        first_name: editingUser.first_name.trim(),\n        last_name: editingUser.last_name.trim(),\n        role: editingUser.role,\n        is_active: editingUser.is_active\n      };\n\n      // Only include password if it's being set\n      if (editingUser.password) {\n        userData.password = editingUser.password;\n      }\n\n      const url = showAddUser \n        ? `${API_BASE}/users`\n        : `${API_BASE}/users/${editingUser.id}`;\n      \n      const method = showAddUser ? 'POST' : 'PUT';\n\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert(showAddUser ? 'User created successfully!' : 'User updated successfully!');\n        setEditingUser(null);\n        setShowAddUser(false);\n        await loadUsers(); // Refresh the list\n      } else {\n        throw new Error(data.error || 'Failed to save user');\n      }\n    } catch (error) {\n      console.error('Error saving user:', error);\n      alert(`Error: ${error.message}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteUser = async (userToDelete) => {\n    if (userToDelete.id === user.id) {\n      alert('You cannot delete your own account');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`${API_BASE}/users/${userToDelete.id}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('User deleted successfully');\n        await loadUsers();\n      } else {\n        throw new Error(data.error || 'Failed to delete user');\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert(`Error: ${error.message}`);\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setShowAddUser(false);\n  };\n\n  if (user.role !== 'admin') {\n    return <div>Access denied. Admin privileges required.</div>;\n  }\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <div className=\"users\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>User Management</h2>\n        <button\n          onClick={handleAddUser}\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#28a745',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: 'bold'\n          }}\n        >\n          ➕ Add New User\n        </button>\n      </div>\n\n      {/* Edit/Add User Form */}\n      {editingUser && (\n        <div className=\"user-form-overlay\">\n          <div className=\"user-form\">\n            <h3>{showAddUser ? 'Add New User' : `Edit User: ${editingUser.username}`}</h3>\n            \n            <form onSubmit={handleSaveUser}>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Username *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.username}\n                    onChange={(e) => setEditingUser({...editingUser, username: e.target.value})}\n                    required\n                    disabled={!showAddUser} // Username can't be changed for existing users\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Email *</label>\n                  <input\n                    type=\"email\"\n                    value={editingUser.email}\n                    onChange={(e) => setEditingUser({...editingUser, email: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>First Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.first_name}\n                    onChange={(e) => setEditingUser({...editingUser, first_name: e.target.value})}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Last Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.last_name}\n                    onChange={(e) => setEditingUser({...editingUser, last_name: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Role</label>\n                  <select\n                    value={editingUser.role}\n                    onChange={(e) => setEditingUser({...editingUser, role: e.target.value})}\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Status</label>\n                  <select\n                    value={editingUser.is_active}\n                    onChange={(e) => setEditingUser({...editingUser, is_active: e.target.value === 'true'})}\n                  >\n                    <option value=\"true\">Active</option>\n                    <option value=\"false\">Inactive</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>{showAddUser ? 'Password *' : 'New Password (leave blank to keep current)'}</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.password}\n                    onChange={(e) => setEditingUser({...editingUser, password: e.target.value})}\n                    required={showAddUser}\n                    minLength=\"6\"\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Confirm Password</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.confirmPassword}\n                    onChange={(e) => setEditingUser({...editingUser, confirmPassword: e.target.value})}\n                    required={showAddUser || editingUser.password}\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-actions\">\n                <button\n                  type=\"button\"\n                  onClick={cancelEdit}\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#6c757d',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    marginRight: '10px'\n                  }}\n                >\n                  Cancel\n                </button>\n                \n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#007bff',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  {isSubmitting ? 'Saving...' : (showAddUser ? 'Create User' : 'Update User')}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Users List */}\n      <div className=\"users-list\">\n        {users.map(u => (\n          <div key={u.id} className=\"user-card\">\n            <div className=\"user-info\">\n              <div className=\"user-header\">\n                <strong>{u.first_name} {u.last_name}</strong>\n                <span className={`user-role ${u.role}`}>{u.role}</span>\n                {!u.is_active && <span className=\"user-status inactive\">Inactive</span>}\n              </div>\n              \n              <div className=\"user-details\">\n                <div><strong>Username:</strong> {u.username}</div>\n                <div><strong>Email:</strong> {u.email || 'Not set'}</div>\n                <div><strong>Last login:</strong> {u.last_login ? new Date(u.last_login).toLocaleString() : 'Never'}</div>\n                <div><strong>Created:</strong> {new Date(u.created_at).toLocaleDateString()}</div>\n              </div>\n            </div>\n            \n            <div className=\"user-actions\">\n              <button\n                onClick={() => handleEditUser(u)}\n                style={{\n                  padding: '6px 12px',\n                  backgroundColor: '#007bff',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  marginRight: '8px'\n                }}\n              >\n                ✏️ Edit\n              </button>\n              \n              {u.id !== user.id && (\n                <button\n                  onClick={() => handleDeleteUser(u)}\n                  style={{\n                    padding: '6px 12px',\n                    backgroundColor: '#dc3545',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                >\n                  🗑️ Delete\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// Main App Component\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [currentTab, setCurrentTab] = useState('dashboard');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing authentication\n    const savedToken = localStorage.getItem('token');\n    const savedUser = localStorage.getItem('user');\n    \n    if (savedToken && savedUser) {\n      try {\n        const userData = JSON.parse(savedUser);\n        setToken(savedToken);\n        setUser(userData);\n        setIsAuthenticated(true);\n      } catch (error) {\n        // If there's an error parsing the saved user data, clear it\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    \n    setIsLoading(false);\n  }, []);\n\n  const handleLogin = (userData, userToken) => {\n    setUser(userData);\n    setToken(userToken);\n    setIsAuthenticated(true);\n    \n    // Update localStorage with the new user data structure\n    localStorage.setItem('user', JSON.stringify(userData));\n    localStorage.setItem('token', userToken);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsAuthenticated(false);\n    setUser(null);\n    setToken(null);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading\">\n          Loading...\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"app-header\">\n        <div className=\"header-content\">\n          <h1>Texon Invoicing Portal</h1>\n          <div className=\"user-info\">\n            <span>Welcome, {user.first_name || user.username}</span>\n            <button onClick={handleLogout} className=\"btn-logout\">\n              Logout\n            </button>\n          </div>\n        </div>\n        <nav>\n          <button \n            className={currentTab === 'dashboard' ? 'active' : ''} \n            onClick={() => setCurrentTab('dashboard')}\n          >\n            Dashboard\n          </button>\n          <button \n            className={currentTab === 'settings' ? 'active' : ''} \n            onClick={() => setCurrentTab('settings')}\n          >\n            Settings\n          </button>\n          <button \n            className={currentTab === 'reports' ? 'active' : ''} \n            onClick={() => setCurrentTab('reports')}\n          >\n            Reports\n          </button>\n          {user.role === 'admin' && (\n            <button \n              className={currentTab === 'users' ? 'active' : ''} \n              onClick={() => setCurrentTab('users')}\n            >\n              Users\n            </button>\n          )}\n        </nav>\n      </header>\n\n      <main className=\"main-content\">\n        {currentTab === 'dashboard' && <Dashboard token={token} />}\n        {currentTab === 'settings' && <Settings token={token} user={user} />}\n        {currentTab === 'reports' && <Reports token={token} user={user} />}\n        {currentTab === 'users' && <Users token={token} user={user} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}