{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./EmailModal.css';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_BASE='/texon-invoicing-portal/api';const EmailModal=_ref=>{let{isOpen,invoice,emailType,onClose,onSend,token}=_ref;const[emailData,setEmailData]=useState({to:'',subject:'',body:'',emailType:emailType});const[isLoading,setIsLoading]=useState(false);const[lastSent,setLastSent]=useState(null);const[emailHistory,setEmailHistory]=useState([]);const orderData=invoice||{};useEffect(()=>{if(isOpen&&orderData.id){loadEmailTemplate();loadLastSentInfo();}},[isOpen,orderData,emailType]);const loadEmailTemplate=async()=>{// Get recipient email\nconst recipientEmail=orderData.billingemail||orderData.deliveryemail||'';try{// Get template from backend\nconst response=await fetch(`${API_BASE}/email-template/${emailType}`,{headers:{'Authorization':`Bearer ${localStorage.getItem('token')}`}});if(response.ok){const template=await response.json();// Replace template variables\nconst templateVars={ORDER_ID:orderData.id,CUSTOMER_NAME:orderData.billingaddressfullname||orderData.customerName||'Valued Customer',COMPANY_NAME:'Texon Towel',ORDER_REFERENCE:orderData.reference||'',INVOICE_NUMBER:orderData.invoiceNumber||'',TOTAL_AMOUNT:orderData.total?`$${orderData.total}`:'',DAYS_OUTSTANDING:orderData.daysOutstanding||'',PAYMENT_LINK:orderData.paymentLink||''};const subject=replaceTemplateVars(template.subject_template,templateVars);const body=replaceTemplateVars(template.body_template,templateVars);setEmailData({to:recipientEmail,subject:subject,body:body,emailType:emailType});}else{// Fallback default template\nsetDefaultTemplate(recipientEmail);}}catch(error){console.error('Error loading email template:',error);setDefaultTemplate(recipientEmail);}};const setDefaultTemplate=recipientEmail=>{const isReminder=emailType==='reminder';setEmailData({to:recipientEmail,subject:isReminder?`Payment Reminder - Order #${orderData.id}`:`Invoice - Order #${orderData.id}`,body:isReminder?`Dear ${orderData.billingaddressfullname||'Valued Customer'},\\n\\nThis is a friendly reminder that payment is due for Order #${orderData.id}.\\n\\nOrder Total: $${orderData.total||orderData.totalvalue||'0.00'}\\nOrder Date: ${new Date(orderData.placedon).toLocaleDateString()}\\n\\nPlease submit payment at your earliest convenience.\\n\\nBest regards,\\nTexon Towel`:`Dear ${orderData.billingaddressfullname||'Valued Customer'},\\n\\nThank you for your order. Please find your invoice attached.\\n\\nOrder #: ${orderData.id}\\nTotal Amount: $${orderData.total||orderData.totalvalue||'0.00'}\\n\\nBest regards,\\nTexon Towel`,emailType:emailType});};const replaceTemplateVars=(template,variables)=>{let result=template||'';for(const[key,value]of Object.entries(variables)){const placeholder=`{${key}}`;result=result.replace(new RegExp(placeholder,'g'),value||'');}return result;};const loadLastSentInfo=async()=>{try{const response=await fetch(`${API_BASE}/email-logs/order/${orderData.id}`,{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const logs=await response.json();if(logs&&logs.length>0){// Find the most recent email of this type\nconst recentEmail=logs.find(log=>log.email_type===emailType);if(recentEmail){setLastSent({date:new Date(recentEmail.created_at).toLocaleString(),status:recentEmail.send_status,recipient:recentEmail.recipient_email});}setEmailHistory(logs.filter(log=>log.email_type===emailType).slice(0,5));}}}catch(error){console.error('Error loading email history:',error);}};const handleSend=async()=>{if(!emailData.to||!emailData.subject||!emailData.body){alert('Please fill in all required fields.');return;}setIsLoading(true);try{const success=await onSend({orderId:orderData.id,to:emailData.to,subject:emailData.subject,body:emailData.body,emailType:emailType});if(success){onClose();}}catch(error){console.error('Error sending email:',error);alert('Failed to send email: '+error.message);}finally{setIsLoading(false);}};const handleInputChange=(field,value)=>{setEmailData(prev=>({...prev,[field]:value}));};if(!isOpen)return null;const isReminder=emailType==='reminder';return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content email-modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[isReminder?'⚠️ Send Payment Reminder':'📧 Send Invoice',\" - Order #\",orderData.id]}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Customer:\"}),\" \",orderData.billingaddressfullname||'N/A']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Amount:\"}),\" $\",orderData.total||orderData.totalvalue||'0.00']}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",new Date(orderData.placedon).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Days Outstanding:\"}),\" \",orderData.daysOutstanding||'N/A']})]})]}),lastSent&&/*#__PURE__*/_jsxs(\"div\",{className:\"last-sent-info\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Last \",isReminder?'Reminder':'Invoice',\" Sent\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",lastSent.date,\" |\",/*#__PURE__*/_jsx(\"strong\",{children:\" Status:\"}),\" \",lastSent.status,\" |\",/*#__PURE__*/_jsx(\"strong\",{children:\" To:\"}),\" \",lastSent.recipient]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"email-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"To: *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:emailData.to,onChange:e=>handleInputChange('to',e.target.value),placeholder:\"customer@example.com\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Subject: *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:emailData.subject,onChange:e=>handleInputChange('subject',e.target.value),placeholder:\"Email subject...\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Message: *\"}),/*#__PURE__*/_jsx(\"textarea\",{value:emailData.body,onChange:e=>handleInputChange('body',e.target.value),placeholder:\"Email message...\",rows:\"8\",required:true})]})]}),emailHistory.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"email-history\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Recent \",isReminder?'Reminders':'Invoices']}),/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:emailHistory.map((log,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"history-date\",children:new Date(log.created_at).toLocaleDateString()}),/*#__PURE__*/_jsx(\"span\",{className:`history-status ${log.send_status}`,children:log.send_status}),/*#__PURE__*/_jsx(\"span\",{className:\"history-recipient\",children:log.recipient_email})]},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-secondary\",onClick:onClose,disabled:isLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:handleSend,disabled:isLoading||!emailData.to||!emailData.subject||!emailData.body,children:isLoading?isReminder?'Sending Reminder...':'Sending Invoice...':isReminder?'⚠️ Send Reminder':'📧 Send Invoice'})]})]})});};export default EmailModal;","map":{"version":3,"names":["React","useState","useEffect","jsxs","_jsxs","jsx","_jsx","API_BASE","EmailModal","_ref","isOpen","invoice","emailType","onClose","onSend","token","emailData","setEmailData","to","subject","body","isLoading","setIsLoading","lastSent","setLastSent","emailHistory","setEmailHistory","orderData","id","loadEmailTemplate","loadLastSentInfo","recipientEmail","billingemail","deliveryemail","response","fetch","headers","localStorage","getItem","ok","template","json","templateVars","ORDER_ID","CUSTOMER_NAME","billingaddressfullname","customerName","COMPANY_NAME","ORDER_REFERENCE","reference","INVOICE_NUMBER","invoiceNumber","TOTAL_AMOUNT","total","DAYS_OUTSTANDING","daysOutstanding","PAYMENT_LINK","paymentLink","replaceTemplateVars","subject_template","body_template","setDefaultTemplate","error","console","isReminder","totalvalue","Date","placedon","toLocaleDateString","variables","result","key","value","Object","entries","placeholder","replace","RegExp","logs","length","recentEmail","find","log","email_type","date","created_at","toLocaleString","status","send_status","recipient","recipient_email","filter","slice","handleSend","alert","success","orderId","message","handleInputChange","field","prev","className","onClick","children","e","stopPropagation","type","onChange","target","required","rows","map","index","disabled"],"sources":["/home/collegesportsdir/public_html/texon-invoicing-portal/client/src/EmailModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './EmailModal.css';\n\nconst API_BASE = '/texon-invoicing-portal/api';\n\nconst EmailModal = ({ isOpen, invoice, emailType, onClose, onSend, token }) => {\n    const [emailData, setEmailData] = useState({\n        to: '',\n        subject: '',\n        body: '',\n        emailType: emailType\n    });\n    const [isLoading, setIsLoading] = useState(false);\n    const [lastSent, setLastSent] = useState(null);\n    const [emailHistory, setEmailHistory] = useState([]);\n    \n    const orderData = invoice || {};\n    \n    useEffect(() => {\n        if (isOpen && orderData.id) {\n            loadEmailTemplate();\n            loadLastSentInfo();\n        }\n    }, [isOpen, orderData, emailType]);\n\n    const loadEmailTemplate = async () => {\n        // Get recipient email\n        const recipientEmail = orderData.billingemail || orderData.deliveryemail || '';\n        \n        try {\n            // Get template from backend\n            const response = await fetch(`${API_BASE}/email-template/${emailType}`, {\n                headers: {\n                    'Authorization': `Bearer ${localStorage.getItem('token')}`\n                }\n            });\n            \n            if (response.ok) {\n                const template = await response.json();\n                \n                // Replace template variables\n                const templateVars = {\n                    ORDER_ID: orderData.id,\n                    CUSTOMER_NAME: orderData.billingaddressfullname || orderData.customerName || 'Valued Customer',\n                    COMPANY_NAME: 'Texon Towel',\n                    ORDER_REFERENCE: orderData.reference || '',\n                    INVOICE_NUMBER: orderData.invoiceNumber || '',\n                    TOTAL_AMOUNT: orderData.total ? `$${orderData.total}` : '',\n                    DAYS_OUTSTANDING: orderData.daysOutstanding || '',\n                    PAYMENT_LINK: orderData.paymentLink || ''\n                };\n\n                const subject = replaceTemplateVars(template.subject_template, templateVars);\n                const body = replaceTemplateVars(template.body_template, templateVars);\n\n                setEmailData({\n                    to: recipientEmail,\n                    subject: subject,\n                    body: body,\n                    emailType: emailType\n                });\n            } else {\n                // Fallback default template\n                setDefaultTemplate(recipientEmail);\n            }\n        } catch (error) {\n            console.error('Error loading email template:', error);\n            setDefaultTemplate(recipientEmail);\n        }\n    };\n\n    const setDefaultTemplate = (recipientEmail) => {\n        const isReminder = emailType === 'reminder';\n        \n        setEmailData({\n            to: recipientEmail,\n            subject: isReminder \n                ? `Payment Reminder - Order #${orderData.id}` \n                : `Invoice - Order #${orderData.id}`,\n            body: isReminder \n                ? `Dear ${orderData.billingaddressfullname || 'Valued Customer'},\\n\\nThis is a friendly reminder that payment is due for Order #${orderData.id}.\\n\\nOrder Total: $${orderData.total || orderData.totalvalue || '0.00'}\\nOrder Date: ${new Date(orderData.placedon).toLocaleDateString()}\\n\\nPlease submit payment at your earliest convenience.\\n\\nBest regards,\\nTexon Towel` \n                : `Dear ${orderData.billingaddressfullname || 'Valued Customer'},\\n\\nThank you for your order. Please find your invoice attached.\\n\\nOrder #: ${orderData.id}\\nTotal Amount: $${orderData.total || orderData.totalvalue || '0.00'}\\n\\nBest regards,\\nTexon Towel`,\n            emailType: emailType\n        });\n    };\n\n    const replaceTemplateVars = (template, variables) => {\n        let result = template || '';\n        for (const [key, value] of Object.entries(variables)) {\n            const placeholder = `{${key}}`;\n            result = result.replace(new RegExp(placeholder, 'g'), value || '');\n        }\n        return result;\n    };\n\n    const loadLastSentInfo = async () => {\n        try {\n            const response = await fetch(`${API_BASE}/email-logs/order/${orderData.id}`, {\n                headers: {\n                    'Authorization': `Bearer ${token}`\n                }\n            });\n            \n            if (response.ok) {\n                const logs = await response.json();\n                if (logs && logs.length > 0) {\n                    // Find the most recent email of this type\n                    const recentEmail = logs.find(log => log.email_type === emailType);\n                    if (recentEmail) {\n                        setLastSent({\n                            date: new Date(recentEmail.created_at).toLocaleString(),\n                            status: recentEmail.send_status,\n                            recipient: recentEmail.recipient_email\n                        });\n                    }\n                    setEmailHistory(logs.filter(log => log.email_type === emailType).slice(0, 5));\n                }\n            }\n        } catch (error) {\n            console.error('Error loading email history:', error);\n        }\n    };\n\n    const handleSend = async () => {\n        if (!emailData.to || !emailData.subject || !emailData.body) {\n            alert('Please fill in all required fields.');\n            return;\n        }\n\n        setIsLoading(true);\n        \n        try {\n            const success = await onSend({\n                orderId: orderData.id,\n                to: emailData.to,\n                subject: emailData.subject,\n                body: emailData.body,\n                emailType: emailType\n            });\n            \n            if (success) {\n                onClose();\n            }\n        } catch (error) {\n            console.error('Error sending email:', error);\n            alert('Failed to send email: ' + error.message);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleInputChange = (field, value) => {\n        setEmailData(prev => ({\n            ...prev,\n            [field]: value\n        }));\n    };\n\n    if (!isOpen) return null;\n\n    const isReminder = emailType === 'reminder';\n\n    return (\n        <div className=\"modal-overlay\" onClick={onClose}>\n            <div className=\"modal-content email-modal-content\" onClick={(e) => e.stopPropagation()}>\n                <div className=\"modal-header\">\n                    <h3>\n                        {isReminder ? '⚠️ Send Payment Reminder' : '📧 Send Invoice'} - Order #{orderData.id}\n                    </h3>\n                    <button className=\"modal-close\" onClick={onClose}>×</button>\n                </div>\n                \n                <div className=\"modal-body\">\n                    {/* Order Info */}\n                    <div className=\"order-info\">\n                        <h4>Order Details</h4>\n                        <div className=\"order-details\">\n                            <span><strong>Customer:</strong> {orderData.billingaddressfullname || 'N/A'}</span>\n                            <span><strong>Amount:</strong> ${orderData.total || orderData.totalvalue || '0.00'}</span>\n                            <span><strong>Date:</strong> {new Date(orderData.placedon).toLocaleDateString()}</span>\n                            <span><strong>Days Outstanding:</strong> {orderData.daysOutstanding || 'N/A'}</span>\n                        </div>\n                    </div>\n\n                    {/* Last Sent Info */}\n                    {lastSent && (\n                        <div className=\"last-sent-info\">\n                            <h4>Last {isReminder ? 'Reminder' : 'Invoice'} Sent</h4>\n                            <p>\n                                <strong>Date:</strong> {lastSent.date} | \n                                <strong> Status:</strong> {lastSent.status} | \n                                <strong> To:</strong> {lastSent.recipient}\n                            </p>\n                        </div>\n                    )}\n\n                    {/* Email Form */}\n                    <div className=\"email-form\">\n                        <div className=\"form-group\">\n                            <label>To: *</label>\n                            <input\n                                type=\"email\"\n                                value={emailData.to}\n                                onChange={(e) => handleInputChange('to', e.target.value)}\n                                placeholder=\"customer@example.com\"\n                                required\n                            />\n                        </div>\n                        \n                        <div className=\"form-group\">\n                            <label>Subject: *</label>\n                            <input\n                                type=\"text\"\n                                value={emailData.subject}\n                                onChange={(e) => handleInputChange('subject', e.target.value)}\n                                placeholder=\"Email subject...\"\n                                required\n                            />\n                        </div>\n                        \n                        <div className=\"form-group\">\n                            <label>Message: *</label>\n                            <textarea\n                                value={emailData.body}\n                                onChange={(e) => handleInputChange('body', e.target.value)}\n                                placeholder=\"Email message...\"\n                                rows=\"8\"\n                                required\n                            />\n                        </div>\n                    </div>\n\n                    {/* Email History */}\n                    {emailHistory.length > 0 && (\n                        <div className=\"email-history\">\n                            <h4>Recent {isReminder ? 'Reminders' : 'Invoices'}</h4>\n                            <div className=\"history-list\">\n                                {emailHistory.map((log, index) => (\n                                    <div key={index} className=\"history-item\">\n                                        <span className=\"history-date\">\n                                            {new Date(log.created_at).toLocaleDateString()}\n                                        </span>\n                                        <span className={`history-status ${log.send_status}`}>\n                                            {log.send_status}\n                                        </span>\n                                        <span className=\"history-recipient\">\n                                            {log.recipient_email}\n                                        </span>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n                \n                <div className=\"modal-footer\">\n                    <button\n                        className=\"btn-secondary\"\n                        onClick={onClose}\n                        disabled={isLoading}\n                    >\n                        Cancel\n                    </button>\n                    <button\n                        className=\"btn-primary\"\n                        onClick={handleSend}\n                        disabled={isLoading || !emailData.to || !emailData.subject || !emailData.body}\n                    >\n                        {isLoading \n                            ? (isReminder ? 'Sending Reminder...' : 'Sending Invoice...') \n                            : (isReminder ? '⚠️ Send Reminder' : '📧 Send Invoice')\n                        }\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default EmailModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}