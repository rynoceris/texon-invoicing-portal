{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import InvoiceDashboard from'./InvoiceDashboard';import'./InvoiceDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE='/texon-invoicing-portal/api';// Login Component\nfunction Login(_ref){let{onLogin}=_ref;const[credentials,setCredentials]=useState({username:'',password:''});const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();setIsLoading(true);setError('');try{const response=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});const data=await response.json();if(response.ok){localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));onLogin(data.user,data.token);}else{setError(data.error||'Login failed');}}catch(error){setError('Network error. Please try again.');}setIsLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to access the invoicing management system\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:credentials.username,onChange:e=>setCredentials({...credentials,username:e.target.value}),required:true,autoComplete:\"username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:credentials.password,onChange:e=>setCredentials({...credentials,password:e.target.value}),required:true,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"btn-primary\",children:isLoading?'Logging in...':'Login'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-help\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Default Admin Credentials:\"})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",/*#__PURE__*/_jsx(\"code\",{children:\"admin\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Password: \",/*#__PURE__*/_jsx(\"code\",{children:\"changeme123\"})]}),/*#__PURE__*/_jsx(\"small\",{children:\"\\u26A0\\uFE0F Change these after first login!\"})]})]})});}// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard(_ref2){let{token}=_ref2;return/*#__PURE__*/_jsx(InvoiceDashboard,{token:token});}// Enhanced Settings Component - Replace your existing Settings component with this:\nfunction Settings(_ref3){let{token,user}=_ref3;const[settings,setSettings]=useState({});const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[configStatus,setConfigStatus]=useState(null);const[testingEmail,setTestingEmail]=useState(false);// Default settings structure\nconst defaultSettings={// Cron Job Settings\ncron_enabled:true,cron_schedule:'0 19 * * *',// 7:00 PM daily\ncron_timezone:'America/New_York',// Email Settings\nemail_notifications:true,email_recipients:'',email_on_zero_discrepancies:false,email_include_excel:false,// Report Settings\nreport_retention_days:30,max_discrepancies_in_email:20,auto_cleanup_enabled:false,// System Settings\napi_timeout_seconds:30,max_concurrent_requests:5,debug_logging:false,// SKU Filter Settings\nignored_skus:''};useEffect(()=>{loadSettings();loadConfigStatus();},[]);const loadSettings=async()=>{try{const response=await fetch(`${API_BASE}/settings`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Merge with defaults to ensure all settings exist\nsetSettings({...defaultSettings,...data});}catch(error){console.error('Error loading settings:',error);setSettings(defaultSettings);}finally{setLoading(false);}};const loadConfigStatus=async()=>{try{const response=await fetch(`${API_BASE}/config-status`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setConfigStatus(data);}catch(error){console.error('Error loading config status:',error);}};const saveSettings=async()=>{setSaving(true);try{const response=await fetch(`${API_BASE}/settings`,{method:'PUT',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(settings)});const data=await response.json();if(response.ok&&data.success){alert('Settings saved successfully!');}else{throw new Error(data.error||'Failed to save settings');}}catch(error){console.error('Error saving settings:',error);alert(`Error saving settings: ${error.message}`);}finally{setSaving(false);}};const testEmailConfiguration=async()=>{setTestingEmail(true);try{const response=await fetch(`${API_BASE}/test-email`,{method:'POST',headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify({recipients:settings.email_recipients})});const data=await response.json();if(response.ok&&data.success){alert('Test email sent successfully! Check your inbox.');}else{throw new Error(data.error||'Failed to send test email');}}catch(error){console.error('Error testing email:',error);alert(`Error sending test email: ${error.message}`);}finally{setTestingEmail(false);}};const updateSetting=(key,value)=>{setSettings(prev=>({...prev,[key]:value}));};const formatCronDescription=cronExpression=>{const descriptions={'0 19 * * *':'Daily at 7:00 PM','0 18 * * *':'Daily at 6:00 PM','0 20 * * *':'Daily at 8:00 PM','0 17 * * *':'Daily at 5:00 PM','0 12 * * *':'Daily at 12:00 PM (Noon)','0 9 * * *':'Daily at 9:00 AM','0 19 * * 1-5':'Weekdays at 7:00 PM','0 0 * * 0':'Weekly on Sunday at Midnight','0 19 * * 0':'Weekly on Sunday at 7:00 PM'};return descriptions[cronExpression]||'Custom schedule';};if(user.role!=='admin'){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"access-denied\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u26A0\\uFE0F Admin access required to modify system settings.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Contact your system administrator if you need to change settings.\"})]})]});}if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Settings\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading settings...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"settings\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"settings-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"System Settings\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving...':'ðŸ’¾ Save Settings'})]}),configStatus&&/*#__PURE__*/_jsxs(\"div\",{className:\"config-overview\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA System Configuration Status\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.supabase_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.supabase_configured?'âœ…':'âŒ'}),/*#__PURE__*/_jsx(\"span\",{children:\"Database (Supabase)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.brightpearl_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.brightpearl_configured?'âœ…':'âš ï¸'}),/*#__PURE__*/_jsx(\"span\",{children:\"Brightpearl API\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.infoplus_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.infoplus_configured?'âœ…':'âš ï¸'}),/*#__PURE__*/_jsx(\"span\",{children:\"Infoplus API\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`status-item ${configStatus.email_configured?'configured':'not-configured'}`,children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:configStatus.email_configured?'âœ…':'âš ï¸'}),/*#__PURE__*/_jsx(\"span\",{children:\"Email Service\"})]})]}),configStatus.overall_ready?/*#__PURE__*/_jsx(\"p\",{className:\"status-message success\",children:\"\\uD83C\\uDF89 All systems configured and ready!\"}):/*#__PURE__*/_jsx(\"p\",{className:\"status-message warning\",children:\"\\u26A0\\uFE0F Some services need configuration. Check environment variables.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u23F0 Scheduled Inventory Comparisons\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.cron_enabled,onChange:e=>updateSetting('cron_enabled',e.target.checked)}),\"Enable Automatic Daily Comparisons\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Automatically run inventory comparisons on a schedule\"})]}),settings.cron_enabled&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Schedule\"}),/*#__PURE__*/_jsxs(\"select\",{value:settings.cron_schedule,onChange:e=>updateSetting('cron_schedule',e.target.value),className:\"setting-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0 9 * * *\",children:\"Daily at 9:00 AM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 12 * * *\",children:\"Daily at 12:00 PM (Noon)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 17 * * *\",children:\"Daily at 5:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 18 * * *\",children:\"Daily at 6:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * *\",children:\"Daily at 7:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 20 * * *\",children:\"Daily at 8:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * 1-5\",children:\"Weekdays at 7:00 PM\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0 19 * * 0\",children:\"Weekly on Sunday at 7:00 PM\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"setting-description\",children:[\"Current: \",formatCronDescription(settings.cron_schedule)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Timezone\"}),/*#__PURE__*/_jsxs(\"select\",{value:settings.cron_timezone,onChange:e=>updateSetting('cron_timezone',e.target.value),className:\"setting-input\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"America/New_York\",children:\"Eastern Time (EST/EDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Chicago\",children:\"Central Time (CST/CDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Denver\",children:\"Mountain Time (MST/MDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"America/Los_Angeles\",children:\"Pacific Time (PST/PDT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"UTC\",children:\"UTC (Universal Time)\"})]})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCE7 Email Notifications\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.email_notifications,onChange:e=>updateSetting('email_notifications',e.target.checked)}),\"Enable Email Notifications\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send email reports when inventory comparisons complete\"})]}),settings.email_notifications&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Email Recipients\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:settings.email_recipients,onChange:e=>updateSetting('email_recipients',e.target.value),placeholder:\"email1@company.com, email2@company.com\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Comma-separated list of email addresses to receive reports\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.email_on_zero_discrepancies,onChange:e=>updateSetting('email_on_zero_discrepancies',e.target.checked)}),\"Email even when no discrepancies found\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send confirmation emails even when inventory matches perfectly\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Max Discrepancies in Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.max_discrepancies_in_email,onChange:e=>updateSetting('max_discrepancies_in_email',parseInt(e.target.value)),min:\"5\",max:\"100\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Maximum number of discrepancies to include in email body (others will be noted as \\\"see Excel\\\")\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item email-test\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:testEmailConfiguration,disabled:testingEmail||!settings.email_recipients,className:\"btn-secondary\",children:testingEmail?'Sending...':'ðŸ“§ Send Test Email'}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Send a test email to verify configuration\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA Report Management\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Report Retention (Days)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.report_retention_days,onChange:e=>updateSetting('report_retention_days',parseInt(e.target.value)),min:\"1\",max:\"365\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"How many days to keep old reports before they can be cleaned up\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.auto_cleanup_enabled,onChange:e=>updateSetting('auto_cleanup_enabled',e.target.checked)}),\"Enable Automatic Report Cleanup\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Automatically delete reports older than retention period (keeps at least the most recent)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u2699\\uFE0F System Performance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"API Timeout (Seconds)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.api_timeout_seconds,onChange:e=>updateSetting('api_timeout_seconds',parseInt(e.target.value)),min:\"10\",max:\"300\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"How long to wait for API responses before timing out\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Max Concurrent Requests\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:settings.max_concurrent_requests,onChange:e=>updateSetting('max_concurrent_requests',parseInt(e.target.value)),min:\"1\",max:\"20\",className:\"setting-input\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Maximum number of simultaneous API requests (higher = faster but more load)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"setting-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:settings.debug_logging,onChange:e=>updateSetting('debug_logging',e.target.checked)}),\"Enable Debug Logging\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"Log detailed debugging information (may impact performance)\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDD0D SKU Filter Settings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"setting-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"setting-item\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"setting-label\",children:\"Ignored SKUs\"}),/*#__PURE__*/_jsx(\"textarea\",{value:settings.ignored_skus||'',onChange:e=>updateSetting('ignored_skus',e.target.value),rows:\"4\",className:\"setting-input\",placeholder:\"Enter SKUs to ignore during comparisons, one per line\\nExample:\\nLCLIPS\\nMISC\\nTEST170228\"}),/*#__PURE__*/_jsx(\"p\",{className:\"setting-description\",children:\"SKUs listed here will be excluded from all inventory comparisons (both manual and scheduled). Enter one SKU per line. Changes take effect on the next comparison.\"}),settings.ignored_skus&&settings.ignored_skus.trim()&&/*#__PURE__*/_jsxs(\"div\",{className:\"ignored-skus-preview\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Currently ignored SKUs:\"}),/*#__PURE__*/_jsx(\"ul\",{style:{margin:'5px 0',paddingLeft:'20px',fontSize:'0.9em'},children:settings.ignored_skus.trim().split('\\n').map((sku,index)=>/*#__PURE__*/_jsx(\"li\",{style:{color:'#6c757d'},children:sku.trim()},index))})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"settings-footer\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:saveSettings,disabled:saving,className:\"btn-primary save-settings-btn\",children:saving?'Saving Settings...':'ðŸ’¾ Save All Settings'}),/*#__PURE__*/_jsx(\"p\",{className:\"save-note\",children:\"Changes take effect immediately. Some settings may require a server restart.\"})]})]});}// Replace the Reports component in your client/src/App.js with this enhanced version:\nfunction Reports(_ref4){let{token,user}=_ref4;const[reports,setReports]=useState([]);const[loading,setLoading]=useState(true);const[expandedReports,setExpandedReports]=useState(new Set());const[pagination,setPagination]=useState({});// Track pagination for each report\nconst[downloadingReports,setDownloadingReports]=useState(new Set());const[deletingReports,setDeletingReports]=useState(new Set());const[deletingAll,setDeletingAll]=useState(false);useEffect(()=>{loadReports();},[]);const loadReports=async()=>{try{const response=await fetch(`${API_BASE}/reports`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();// Parse discrepancies for each report\nconst parsedReports=data.map(report=>({...report,discrepancies:(()=>{try{if(typeof report.discrepancies==='string'){return JSON.parse(report.discrepancies);}else if(Array.isArray(report.discrepancies)){return report.discrepancies;}else{return[];}}catch(e){console.error('Error parsing discrepancies for report:',report.id,e);return[];}})()}));setReports(parsedReports);// Initialize pagination for each report (start with page 1)\nconst initialPagination={};parsedReports.forEach(report=>{initialPagination[report.id]={currentPage:1,itemsPerPage:25};});setPagination(initialPagination);}catch(error){console.error('Error loading reports:',error);}finally{setLoading(false);}};const deleteReport=async report=>{const confirmMessage=`Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}const reportId=report.id;setDeletingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){// Remove the report from the local state\nsetReports(prev=>prev.filter(r=>r.id!==reportId));// Also remove from expanded reports if it was expanded\nsetExpandedReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});alert(`Report from ${report.date} has been deleted successfully.`);}else{throw new Error(data.error||'Failed to delete report');}}catch(error){console.error('Error deleting report:',error);alert(`Failed to delete report: ${error.message}`);}finally{setDeletingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const deleteAllReports=async()=>{if(reports.length===0){alert('No reports to delete.');return;}const confirmMessage=`Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;if(!window.confirm(confirmMessage)){return;}// Double confirmation for such a destructive action\nconst doubleConfirm=window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);if(!doubleConfirm){return;}setDeletingAll(true);try{let deletedCount=0;let failedCount=0;const totalReports=reports.length;// Delete reports one by one to handle any individual failures\nfor(const report of reports){try{const response=await fetch(`${API_BASE}/reports/${report.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){deletedCount++;}else{failedCount++;console.error(`Failed to delete report ${report.id}:`,data.error);}}catch(error){failedCount++;console.error(`Error deleting report ${report.id}:`,error);}}// Refresh the reports list\nawait loadReports();// Show results\nif(deletedCount===totalReports){alert(`Successfully deleted all ${deletedCount} reports.`);}else if(deletedCount>0){alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);}else{alert(`Failed to delete any reports. Please try again or contact support.`);}}catch(error){console.error('Error during bulk deletion:',error);alert(`Error during deletion: ${error.message}`);// Refresh the list to see current state\nawait loadReports();}finally{setDeletingAll(false);}};const toggleReportExpansion=reportId=>{const newExpanded=new Set(expandedReports);if(newExpanded.has(reportId)){newExpanded.delete(reportId);}else{newExpanded.add(reportId);}setExpandedReports(newExpanded);};const changePage=(reportId,newPage)=>{setPagination(prev=>({...prev,[reportId]:{...prev[reportId],currentPage:newPage}}));};const getPaginatedDiscrepancies=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};const startIndex=(pageInfo.currentPage-1)*pageInfo.itemsPerPage;const endIndex=startIndex+pageInfo.itemsPerPage;return discrepancies.slice(startIndex,endIndex);};const getTotalPages=(discrepancies,reportId)=>{const pageInfo=pagination[reportId]||{currentPage:1,itemsPerPage:25};return Math.ceil(discrepancies.length/pageInfo.itemsPerPage);};const downloadExcelReport=async report=>{const reportId=report.id;setDownloadingReports(prev=>new Set(prev).add(reportId));try{const response=await fetch(`${API_BASE}/reports/${reportId}/excel`,{method:'GET',headers:{'Authorization':`Bearer ${token}`}});if(!response.ok){throw new Error(`Failed to download report: ${response.statusText}`);}// Get the blob data\nconst blob=await response.blob();// Create download link\nconst url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=`inventory-report-${report.date}-${reportId}.xlsx`;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);}catch(error){console.error('Error downloading Excel report:',error);alert(`Failed to download report: ${error.message}`);}finally{setDownloadingReports(prev=>{const newSet=new Set(prev);newSet.delete(reportId);return newSet;});}};const renderPagination=(discrepancies,reportId)=>{var _pagination$reportId;const totalPages=getTotalPages(discrepancies,reportId);const currentPage=((_pagination$reportId=pagination[reportId])===null||_pagination$reportId===void 0?void 0:_pagination$reportId.currentPage)||1;if(totalPages<=1)return null;const pages=[];const maxVisiblePages=5;let startPage=Math.max(1,currentPage-Math.floor(maxVisiblePages/2));let endPage=Math.min(totalPages,startPage+maxVisiblePages-1);// Adjust start page if we're near the end\nif(endPage-startPage+1<maxVisiblePages){startPage=Math.max(1,endPage-maxVisiblePages+1);}return/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",style:{margin:'20px 0',display:'flex',justifyContent:'center',alignItems:'center',gap:'10px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"First\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage-1),disabled:currentPage===1,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===1?'#f5f5f5':'white',cursor:currentPage===1?'not-allowed':'pointer'},children:\"Previous\"}),Array.from({length:endPage-startPage+1},(_,i)=>startPage+i).map(page=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,page),style:{padding:'8px 12px',border:'1px solid #ddd',background:page===currentPage?'#007bff':'white',color:page===currentPage?'white':'black',cursor:'pointer'},children:page},page)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,currentPage+1),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Next\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>changePage(reportId,totalPages),disabled:currentPage===totalPages,style:{padding:'8px 12px',border:'1px solid #ddd',background:currentPage===totalPages?'#f5f5f5':'white',cursor:currentPage===totalPages?'not-allowed':'pointer'},children:\"Last\"}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'20px',fontSize:'14px',color:'#666'},children:[\"Page \",currentPage,\" of \",totalPages,\" (\",discrepancies.length,\" total discrepancies)\"]})]});};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading reports...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"reports\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Reports History (Last 30 Days)\"}),user&&user.role==='admin'&&reports.length>0&&/*#__PURE__*/_jsx(\"button\",{onClick:deleteAllReports,disabled:deletingAll,style:{padding:'10px 20px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingAll?'not-allowed':'pointer',fontSize:'14px',fontWeight:'bold',opacity:deletingAll?0.6:1},children:deletingAll?'ðŸ—‘ï¸ Deleting All...':`ðŸ—‘ï¸ Delete All Reports (${reports.length})`})]}),reports.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No reports available yet. Run your first comparison!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"reports-list\",children:reports.map((report,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"report-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-header\",style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'15px'},children:[/*#__PURE__*/_jsx(\"span\",{className:\"report-date\",children:report.date}),/*#__PURE__*/_jsxs(\"span\",{className:`discrepancies-badge ${report.total_discrepancies>0?'has-discrepancies':'no-discrepancies'}`,children:[report.total_discrepancies,\" discrepancies\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"report-time\",children:new Date(report.created_at).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>downloadExcelReport(report),disabled:downloadingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:downloadingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:downloadingReports.has(report.id)?0.6:1},children:downloadingReports.has(report.id)?'ðŸ“¥ Downloading...':'ðŸ“Š Download Excel'}),report.total_discrepancies>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleReportExpansion(report.id),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:expandedReports.has(report.id)?'â–¼ Hide Details':'â–¶ View Details'}),user&&user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteReport(report),disabled:deletingReports.has(report.id),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:deletingReports.has(report.id)?'not-allowed':'pointer',fontSize:'12px',opacity:deletingReports.has(report.id)?0.6:1},children:deletingReports.has(report.id)?'ðŸ—‘ï¸ Deleting...':'ðŸ—‘ï¸ Delete'})]})]}),report.total_discrepancies>0&&expandedReports.has(report.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"report-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"discrepancies-summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Inventory Discrepancies\"}),renderPagination(report.discrepancies,report.id),/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',margin:'10px 0'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'left'},children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Brightpearl\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Infoplus\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"Difference\"}),/*#__PURE__*/_jsx(\"th\",{style:{border:'1px solid #dee2e6',padding:'12px',textAlign:'right'},children:\"% Diff\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:getPaginatedDiscrepancies(report.discrepancies,report.id).map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:itemIndex%2===0?'white':'#f8f9fa'},children:[/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',fontWeight:'bold'},children:item.sku}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px'},children:item.productName||'N/A'}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.brightpearl_stock}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.infoplus_stock}),/*#__PURE__*/_jsxs(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right',color:item.difference<0?'red':'green',fontWeight:'bold'},children:[item.difference>0?'+':'',item.difference]}),/*#__PURE__*/_jsx(\"td\",{style:{border:'1px solid #dee2e6',padding:'10px',textAlign:'right'},children:item.percentage_diff?`${item.percentage_diff}%`:'N/A'})]},itemIndex))})]}),renderPagination(report.discrepancies,report.id)]})})]},report.id||index))})]});}// Enhanced Users Component - Replace your existing Users component with this:\nfunction Users(_ref5){let{token,user}=_ref5;const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[editingUser,setEditingUser]=useState(null);const[showAddUser,setShowAddUser]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);useEffect(()=>{if(user.role==='admin'){loadUsers();}},[user.role]);const loadUsers=async()=>{try{const response=await fetch(`${API_BASE}/users`,{headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();setUsers(data);}catch(error){console.error('Error loading users:',error);}finally{setLoading(false);}};const handleEditUser=userToEdit=>{setEditingUser({id:userToEdit.id,username:userToEdit.username,email:userToEdit.email||'',first_name:userToEdit.first_name||'',last_name:userToEdit.last_name||'',role:userToEdit.role,is_active:userToEdit.is_active,password:'',// Always start with empty password\nconfirmPassword:''});};const handleAddUser=()=>{setShowAddUser(true);setEditingUser({username:'',email:'',first_name:'',last_name:'',role:'user',is_active:true,password:'',confirmPassword:''});};const handleSaveUser=async e=>{e.preventDefault();setIsSubmitting(true);try{// Validation\nif(!editingUser.username.trim()){alert('Username is required');return;}if(!editingUser.email.trim()){alert('Email is required');return;}if(!editingUser.first_name.trim()){alert('First name is required');return;}if(!editingUser.last_name.trim()){alert('Last name is required');return;}// For new users, password is required\nif(showAddUser&&!editingUser.password){alert('Password is required for new users');return;}// If password is being changed, validate it\nif(editingUser.password){if(editingUser.password.length<6){alert('Password must be at least 6 characters long');return;}if(editingUser.password!==editingUser.confirmPassword){alert('Passwords do not match');return;}}const userData={username:editingUser.username.trim(),email:editingUser.email.trim(),first_name:editingUser.first_name.trim(),last_name:editingUser.last_name.trim(),role:editingUser.role,is_active:editingUser.is_active};// Only include password if it's being set\nif(editingUser.password){userData.password=editingUser.password;}const url=showAddUser?`${API_BASE}/users`:`${API_BASE}/users/${editingUser.id}`;const method=showAddUser?'POST':'PUT';const response=await fetch(url,{method:method,headers:{'Authorization':`Bearer ${token}`,'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();if(response.ok&&data.success){alert(showAddUser?'User created successfully!':'User updated successfully!');setEditingUser(null);setShowAddUser(false);await loadUsers();// Refresh the list\n}else{throw new Error(data.error||'Failed to save user');}}catch(error){console.error('Error saving user:',error);alert(`Error: ${error.message}`);}finally{setIsSubmitting(false);}};const handleDeleteUser=async userToDelete=>{if(userToDelete.id===user.id){alert('You cannot delete your own account');return;}const confirmMessage=`Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}try{const response=await fetch(`${API_BASE}/users/${userToDelete.id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});const data=await response.json();if(response.ok&&data.success){alert('User deleted successfully');await loadUsers();}else{throw new Error(data.error||'Failed to delete user');}}catch(error){console.error('Error deleting user:',error);alert(`Error: ${error.message}`);}};const cancelEdit=()=>{setEditingUser(null);setShowAddUser(false);};if(user.role!=='admin'){return/*#__PURE__*/_jsx(\"div\",{children:\"Access denied. Admin privileges required.\"});}if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading users...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"users\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUser,style:{padding:'10px 20px',backgroundColor:'#28a745',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'14px',fontWeight:'bold'},children:\"\\u2795 Add New User\"})]}),editingUser&&/*#__PURE__*/_jsx(\"div\",{className:\"user-form-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-form\",children:[/*#__PURE__*/_jsx(\"h3\",{children:showAddUser?'Add New User':`Edit User: ${editingUser.username}`}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveUser,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.username,onChange:e=>setEditingUser({...editingUser,username:e.target.value}),required:true,disabled:!showAddUser// Username can't be changed for existing users\n})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:editingUser.email,onChange:e=>setEditingUser({...editingUser,email:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"First Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.first_name,onChange:e=>setEditingUser({...editingUser,first_name:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Last Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingUser.last_name,onChange:e=>setEditingUser({...editingUser,last_name:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.role,onChange:e=>setEditingUser({...editingUser,role:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:editingUser.is_active,onChange:e=>setEditingUser({...editingUser,is_active:e.target.value==='true'}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:showAddUser?'Password *':'New Password (leave blank to keep current)'}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.password,onChange:e=>setEditingUser({...editingUser,password:e.target.value}),required:showAddUser,minLength:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:editingUser.confirmPassword,onChange:e=>setEditingUser({...editingUser,confirmPassword:e.target.value}),required:showAddUser||editingUser.password})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:cancelEdit,disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#6c757d',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',marginRight:'10px'},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,style:{padding:'10px 20px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:isSubmitting?'Saving...':showAddUser?'Create User':'Update User'})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"users-list\",children:users.map(u=>/*#__PURE__*/_jsxs(\"div\",{className:\"user-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-header\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[u.first_name,\" \",u.last_name]}),/*#__PURE__*/_jsx(\"span\",{className:`user-role ${u.role}`,children:u.role}),!u.is_active&&/*#__PURE__*/_jsx(\"span\",{className:\"user-status inactive\",children:\"Inactive\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-details\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Username:\"}),\" \",u.username]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",u.email||'Not set']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last login:\"}),\" \",u.last_login?new Date(u.last_login).toLocaleString():'Never']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Created:\"}),\" \",new Date(u.created_at).toLocaleDateString()]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditUser(u),style:{padding:'6px 12px',backgroundColor:'#007bff',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px',marginRight:'8px'},children:\"\\u270F\\uFE0F Edit\"}),u.id!==user.id&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(u),style:{padding:'6px 12px',backgroundColor:'#dc3545',color:'white',border:'none',borderRadius:'4px',cursor:'pointer',fontSize:'12px'},children:\"\\uD83D\\uDDD1\\uFE0F Delete\"})]})]},u.id))})]});}// Main App Component\nfunction App(){const[isAuthenticated,setIsAuthenticated]=useState(false);const[user,setUser]=useState(null);const[token,setToken]=useState(null);const[currentTab,setCurrentTab]=useState('dashboard');const[isLoading,setIsLoading]=useState(true);useEffect(()=>{// Check for existing authentication\nconst savedToken=localStorage.getItem('token');const savedUser=localStorage.getItem('user');if(savedToken&&savedUser){try{const userData=JSON.parse(savedUser);setToken(savedToken);setUser(userData);setIsAuthenticated(true);}catch(error){// If there's an error parsing the saved user data, clear it\nlocalStorage.removeItem('token');localStorage.removeItem('user');}}setIsLoading(false);},[]);const handleLogin=(userData,userToken)=>{setUser(userData);setToken(userToken);setIsAuthenticated(true);// Update localStorage with the new user data structure\nlocalStorage.setItem('user',JSON.stringify(userData));localStorage.setItem('token',userToken);};const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsAuthenticated(false);setUser(null);setToken(null);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Texon Invoicing Portal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Welcome, \",user.first_name||user.username]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"btn-logout\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{className:currentTab==='dashboard'?'active':'',onClick:()=>setCurrentTab('dashboard'),children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='settings'?'active':'',onClick:()=>setCurrentTab('settings'),children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:currentTab==='reports'?'active':'',onClick:()=>setCurrentTab('reports'),children:\"Reports\"}),user.role==='admin'&&/*#__PURE__*/_jsx(\"button\",{className:currentTab==='users'?'active':'',onClick:()=>setCurrentTab('users'),children:\"Users\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[currentTab==='dashboard'&&/*#__PURE__*/_jsx(Dashboard,{token:token}),currentTab==='settings'&&/*#__PURE__*/_jsx(Settings,{token:token,user:user}),currentTab==='reports'&&/*#__PURE__*/_jsx(Reports,{token:token,user:user}),currentTab==='users'&&/*#__PURE__*/_jsx(Users,{token:token,user:user})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","InvoiceDashboard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","Login","_ref","onLogin","credentials","setCredentials","username","password","isLoading","setIsLoading","error","setError","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","user","className","children","onSubmit","type","value","onChange","target","required","autoComplete","disabled","Dashboard","_ref2","Settings","_ref3","settings","setSettings","loading","setLoading","saving","setSaving","configStatus","setConfigStatus","testingEmail","setTestingEmail","defaultSettings","cron_enabled","cron_schedule","cron_timezone","email_notifications","email_recipients","email_on_zero_discrepancies","email_include_excel","report_retention_days","max_discrepancies_in_email","auto_cleanup_enabled","api_timeout_seconds","max_concurrent_requests","debug_logging","ignored_skus","loadSettings","loadConfigStatus","console","saveSettings","success","alert","Error","message","testEmailConfiguration","recipients","updateSetting","key","prev","formatCronDescription","cronExpression","descriptions","role","onClick","supabase_configured","brightpearl_configured","infoplus_configured","email_configured","overall_ready","checked","placeholder","parseInt","min","max","rows","trim","style","margin","paddingLeft","fontSize","split","map","sku","index","color","Reports","_ref4","reports","setReports","expandedReports","setExpandedReports","Set","pagination","setPagination","downloadingReports","setDownloadingReports","deletingReports","setDeletingReports","deletingAll","setDeletingAll","loadReports","parsedReports","report","discrepancies","parse","Array","isArray","id","initialPagination","forEach","currentPage","itemsPerPage","deleteReport","confirmMessage","date","window","confirm","reportId","add","filter","r","newSet","delete","deleteAllReports","length","doubleConfirm","deletedCount","failedCount","totalReports","toggleReportExpansion","newExpanded","has","changePage","newPage","getPaginatedDiscrepancies","pageInfo","startIndex","endIndex","slice","getTotalPages","Math","ceil","downloadExcelReport","statusText","blob","url","URL","createObjectURL","link","document","createElement","href","download","appendChild","click","removeChild","revokeObjectURL","renderPagination","_pagination$reportId","totalPages","pages","maxVisiblePages","startPage","floor","endPage","display","justifyContent","alignItems","gap","padding","border","background","cursor","from","_","i","page","marginLeft","marginBottom","backgroundColor","borderRadius","fontWeight","opacity","total_discrepancies","Date","created_at","toLocaleString","width","borderCollapse","textAlign","item","itemIndex","productName","brightpearl_stock","infoplus_stock","difference","percentage_diff","Users","_ref5","users","setUsers","editingUser","setEditingUser","showAddUser","setShowAddUser","isSubmitting","setIsSubmitting","loadUsers","handleEditUser","userToEdit","email","first_name","last_name","is_active","confirmPassword","handleAddUser","handleSaveUser","userData","handleDeleteUser","userToDelete","cancelEdit","minLength","marginRight","u","last_login","toLocaleDateString","App","isAuthenticated","setIsAuthenticated","setUser","setToken","currentTab","setCurrentTab","savedToken","getItem","savedUser","removeItem","handleLogin","userToken","handleLogout"],"sources":["/home/collegesportsdir/public_html/texon-invoicing-portal/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport InvoiceDashboard from './InvoiceDashboard';\nimport './InvoiceDashboard.css';\n\nconst API_BASE = '/texon-invoicing-portal/api';\n\n// Login Component\nfunction Login({ onLogin }) {\n  const [credentials, setCredentials] = useState({ username: '', password: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const response = await fetch(`${API_BASE}/auth/login`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(credentials)\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user', JSON.stringify(data.user));\n        onLogin(data.user, data.token);\n      } else {\n        setError(data.error || 'Login failed');\n      }\n    } catch (error) {\n      setError('Network error. Please try again.');\n    }\n\n    setIsLoading(false);\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h1>Texon Invoicing Portal</h1>\n        <p>Please log in to access the invoicing management system</p>\n        \n        {error && <div className=\"error-message\">{error}</div>}\n        \n        <form onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label>Username:</label>\n            <input\n              type=\"text\"\n              value={credentials.username}\n              onChange={(e) => setCredentials({...credentials, username: e.target.value})}\n              required\n              autoComplete=\"username\"\n            />\n          </div>\n          \n          <div className=\"form-group\">\n            <label>Password:</label>\n            <input\n              type=\"password\"\n              value={credentials.password}\n              onChange={(e) => setCredentials({...credentials, password: e.target.value})}\n              required\n              autoComplete=\"current-password\"\n            />\n          </div>\n          \n          <button type=\"submit\" disabled={isLoading} className=\"btn-primary\">\n            {isLoading ? 'Logging in...' : 'Login'}\n          </button>\n        </form>\n        \n        <div className=\"login-help\">\n          <p><strong>Default Admin Credentials:</strong></p>\n          <p>Username: <code>admin</code></p>\n          <p>Password: <code>changeme123</code></p>\n          <small>âš ï¸ Change these after first login!</small>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Dashboard Component - Now using InvoiceDashboard\nfunction Dashboard({ token }) {\n  return <InvoiceDashboard token={token} />;\n}\n\n// Enhanced Settings Component - Replace your existing Settings component with this:\n\nfunction Settings({ token, user }) {\n  const [settings, setSettings] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [configStatus, setConfigStatus] = useState(null);\n  const [testingEmail, setTestingEmail] = useState(false);\n\n  // Default settings structure\n  const defaultSettings = {\n    // Cron Job Settings\n    cron_enabled: true,\n    cron_schedule: '0 19 * * *', // 7:00 PM daily\n    cron_timezone: 'America/New_York',\n    \n    // Email Settings\n    email_notifications: true,\n    email_recipients: '',\n    email_on_zero_discrepancies: false,\n    email_include_excel: false,\n    \n    // Report Settings\n    report_retention_days: 30,\n    max_discrepancies_in_email: 20,\n    auto_cleanup_enabled: false,\n    \n    // System Settings\n    api_timeout_seconds: 30,\n    max_concurrent_requests: 5,\n    debug_logging: false,\n    \n    // SKU Filter Settings\n    ignored_skus: ''\n  };\n\n  useEffect(() => {\n    loadSettings();\n    loadConfigStatus();\n  }, []);\n\n  const loadSettings = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/settings`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Merge with defaults to ensure all settings exist\n      setSettings({ ...defaultSettings, ...data });\n    } catch (error) {\n      console.error('Error loading settings:', error);\n      setSettings(defaultSettings);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadConfigStatus = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/config-status`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      setConfigStatus(data);\n    } catch (error) {\n      console.error('Error loading config status:', error);\n    }\n  };\n\n  const saveSettings = async () => {\n    setSaving(true);\n    try {\n      const response = await fetch(`${API_BASE}/settings`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(settings)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('Settings saved successfully!');\n      } else {\n        throw new Error(data.error || 'Failed to save settings');\n      }\n    } catch (error) {\n      console.error('Error saving settings:', error);\n      alert(`Error saving settings: ${error.message}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const testEmailConfiguration = async () => {\n    setTestingEmail(true);\n    try {\n      const response = await fetch(`${API_BASE}/test-email`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          recipients: settings.email_recipients\n        })\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('Test email sent successfully! Check your inbox.');\n      } else {\n        throw new Error(data.error || 'Failed to send test email');\n      }\n    } catch (error) {\n      console.error('Error testing email:', error);\n      alert(`Error sending test email: ${error.message}`);\n    } finally {\n      setTestingEmail(false);\n    }\n  };\n\n  const updateSetting = (key, value) => {\n    setSettings(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n\n  const formatCronDescription = (cronExpression) => {\n    const descriptions = {\n      '0 19 * * *': 'Daily at 7:00 PM',\n      '0 18 * * *': 'Daily at 6:00 PM',\n      '0 20 * * *': 'Daily at 8:00 PM',\n      '0 17 * * *': 'Daily at 5:00 PM',\n      '0 12 * * *': 'Daily at 12:00 PM (Noon)',\n      '0 9 * * *': 'Daily at 9:00 AM',\n      '0 19 * * 1-5': 'Weekdays at 7:00 PM',\n      '0 0 * * 0': 'Weekly on Sunday at Midnight',\n      '0 19 * * 0': 'Weekly on Sunday at 7:00 PM'\n    };\n    return descriptions[cronExpression] || 'Custom schedule';\n  };\n\n  if (user.role !== 'admin') {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <div className=\"access-denied\">\n          <p>âš ï¸ Admin access required to modify system settings.</p>\n          <p>Contact your system administrator if you need to change settings.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"settings\">\n        <h2>Settings</h2>\n        <p>Loading settings...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"settings\">\n      <div className=\"settings-header\">\n        <h2>System Settings</h2>\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving...' : 'ðŸ’¾ Save Settings'}\n        </button>\n      </div>\n\n      {/* Configuration Status Overview */}\n      {configStatus && (\n        <div className=\"config-overview\">\n          <h3>ðŸ“Š System Configuration Status</h3>\n          <div className=\"status-grid\">\n            <div className={`status-item ${configStatus.supabase_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.supabase_configured ? 'âœ…' : 'âŒ'}</span>\n              <span>Database (Supabase)</span>\n            </div>\n            <div className={`status-item ${configStatus.brightpearl_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.brightpearl_configured ? 'âœ…' : 'âš ï¸'}</span>\n              <span>Brightpearl API</span>\n            </div>\n            <div className={`status-item ${configStatus.infoplus_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.infoplus_configured ? 'âœ…' : 'âš ï¸'}</span>\n              <span>Infoplus API</span>\n            </div>\n            <div className={`status-item ${configStatus.email_configured ? 'configured' : 'not-configured'}`}>\n              <span className=\"status-icon\">{configStatus.email_configured ? 'âœ…' : 'âš ï¸'}</span>\n              <span>Email Service</span>\n            </div>\n          </div>\n          {configStatus.overall_ready ? (\n            <p className=\"status-message success\">ðŸŽ‰ All systems configured and ready!</p>\n          ) : (\n            <p className=\"status-message warning\">âš ï¸ Some services need configuration. Check environment variables.</p>\n          )}\n        </div>\n      )}\n\n      {/* Scheduled Comparison Settings */}\n      <div className=\"settings-section\">\n        <h3>â° Scheduled Inventory Comparisons</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.cron_enabled}\n                onChange={(e) => updateSetting('cron_enabled', e.target.checked)}\n              />\n              Enable Automatic Daily Comparisons\n            </label>\n            <p className=\"setting-description\">\n              Automatically run inventory comparisons on a schedule\n            </p>\n          </div>\n\n          {settings.cron_enabled && (\n            <>\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Schedule</label>\n                <select\n                  value={settings.cron_schedule}\n                  onChange={(e) => updateSetting('cron_schedule', e.target.value)}\n                  className=\"setting-input\"\n                >\n                  <option value=\"0 9 * * *\">Daily at 9:00 AM</option>\n                  <option value=\"0 12 * * *\">Daily at 12:00 PM (Noon)</option>\n                  <option value=\"0 17 * * *\">Daily at 5:00 PM</option>\n                  <option value=\"0 18 * * *\">Daily at 6:00 PM</option>\n                  <option value=\"0 19 * * *\">Daily at 7:00 PM</option>\n                  <option value=\"0 20 * * *\">Daily at 8:00 PM</option>\n                  <option value=\"0 19 * * 1-5\">Weekdays at 7:00 PM</option>\n                  <option value=\"0 19 * * 0\">Weekly on Sunday at 7:00 PM</option>\n                </select>\n                <p className=\"setting-description\">\n                  Current: {formatCronDescription(settings.cron_schedule)}\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Timezone</label>\n                <select\n                  value={settings.cron_timezone}\n                  onChange={(e) => updateSetting('cron_timezone', e.target.value)}\n                  className=\"setting-input\"\n                >\n                  <option value=\"America/New_York\">Eastern Time (EST/EDT)</option>\n                  <option value=\"America/Chicago\">Central Time (CST/CDT)</option>\n                  <option value=\"America/Denver\">Mountain Time (MST/MDT)</option>\n                  <option value=\"America/Los_Angeles\">Pacific Time (PST/PDT)</option>\n                  <option value=\"UTC\">UTC (Universal Time)</option>\n                </select>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Email Notification Settings */}\n      <div className=\"settings-section\">\n        <h3>ðŸ“§ Email Notifications</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.email_notifications}\n                onChange={(e) => updateSetting('email_notifications', e.target.checked)}\n              />\n              Enable Email Notifications\n            </label>\n            <p className=\"setting-description\">\n              Send email reports when inventory comparisons complete\n            </p>\n          </div>\n\n          {settings.email_notifications && (\n            <>\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Email Recipients</label>\n                <input\n                  type=\"text\"\n                  value={settings.email_recipients}\n                  onChange={(e) => updateSetting('email_recipients', e.target.value)}\n                  placeholder=\"email1@company.com, email2@company.com\"\n                  className=\"setting-input\"\n                />\n                <p className=\"setting-description\">\n                  Comma-separated list of email addresses to receive reports\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.email_on_zero_discrepancies}\n                    onChange={(e) => updateSetting('email_on_zero_discrepancies', e.target.checked)}\n                  />\n                  Email even when no discrepancies found\n                </label>\n                <p className=\"setting-description\">\n                  Send confirmation emails even when inventory matches perfectly\n                </p>\n              </div>\n\n              <div className=\"setting-item\">\n                <label className=\"setting-label\">Max Discrepancies in Email</label>\n                <input\n                  type=\"number\"\n                  value={settings.max_discrepancies_in_email}\n                  onChange={(e) => updateSetting('max_discrepancies_in_email', parseInt(e.target.value))}\n                  min=\"5\"\n                  max=\"100\"\n                  className=\"setting-input\"\n                />\n                <p className=\"setting-description\">\n                  Maximum number of discrepancies to include in email body (others will be noted as \"see Excel\")\n                </p>\n              </div>\n\n              <div className=\"setting-item email-test\">\n                <button\n                  onClick={testEmailConfiguration}\n                  disabled={testingEmail || !settings.email_recipients}\n                  className=\"btn-secondary\"\n                >\n                  {testingEmail ? 'Sending...' : 'ðŸ“§ Send Test Email'}\n                </button>\n                <p className=\"setting-description\">\n                  Send a test email to verify configuration\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Report Management Settings */}\n      <div className=\"settings-section\">\n        <h3>ðŸ“Š Report Management</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Report Retention (Days)</label>\n            <input\n              type=\"number\"\n              value={settings.report_retention_days}\n              onChange={(e) => updateSetting('report_retention_days', parseInt(e.target.value))}\n              min=\"1\"\n              max=\"365\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              How many days to keep old reports before they can be cleaned up\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.auto_cleanup_enabled}\n                onChange={(e) => updateSetting('auto_cleanup_enabled', e.target.checked)}\n              />\n              Enable Automatic Report Cleanup\n            </label>\n            <p className=\"setting-description\">\n              Automatically delete reports older than retention period (keeps at least the most recent)\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* System Performance Settings */}\n      <div className=\"settings-section\">\n        <h3>âš™ï¸ System Performance</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">API Timeout (Seconds)</label>\n            <input\n              type=\"number\"\n              value={settings.api_timeout_seconds}\n              onChange={(e) => updateSetting('api_timeout_seconds', parseInt(e.target.value))}\n              min=\"10\"\n              max=\"300\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              How long to wait for API responses before timing out\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Max Concurrent Requests</label>\n            <input\n              type=\"number\"\n              value={settings.max_concurrent_requests}\n              onChange={(e) => updateSetting('max_concurrent_requests', parseInt(e.target.value))}\n              min=\"1\"\n              max=\"20\"\n              className=\"setting-input\"\n            />\n            <p className=\"setting-description\">\n              Maximum number of simultaneous API requests (higher = faster but more load)\n            </p>\n          </div>\n\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">\n              <input\n                type=\"checkbox\"\n                checked={settings.debug_logging}\n                onChange={(e) => updateSetting('debug_logging', e.target.checked)}\n              />\n              Enable Debug Logging\n            </label>\n            <p className=\"setting-description\">\n              Log detailed debugging information (may impact performance)\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* SKU Filter Settings */}\n      <div className=\"settings-section\">\n        <h3>ðŸ” SKU Filter Settings</h3>\n        <div className=\"setting-group\">\n          <div className=\"setting-item\">\n            <label className=\"setting-label\">Ignored SKUs</label>\n            <textarea\n              value={settings.ignored_skus || ''}\n              onChange={(e) => updateSetting('ignored_skus', e.target.value)}\n              rows=\"4\"\n              className=\"setting-input\"\n              placeholder=\"Enter SKUs to ignore during comparisons, one per line&#10;Example:&#10;LCLIPS&#10;MISC&#10;TEST170228\"\n            />\n            <p className=\"setting-description\">\n              SKUs listed here will be excluded from all inventory comparisons (both manual and scheduled).\n              Enter one SKU per line. Changes take effect on the next comparison.\n            </p>\n            {settings.ignored_skus && settings.ignored_skus.trim() && (\n              <div className=\"ignored-skus-preview\">\n                <strong>Currently ignored SKUs:</strong>\n                <ul style={{margin: '5px 0', paddingLeft: '20px', fontSize: '0.9em'}}>\n                  {settings.ignored_skus.trim().split('\\n').map((sku, index) => (\n                    <li key={index} style={{color: '#6c757d'}}>{sku.trim()}</li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Save Button at Bottom */}\n      <div className=\"settings-footer\">\n        <button\n          onClick={saveSettings}\n          disabled={saving}\n          className=\"btn-primary save-settings-btn\"\n        >\n          {saving ? 'Saving Settings...' : 'ðŸ’¾ Save All Settings'}\n        </button>\n        <p className=\"save-note\">\n          Changes take effect immediately. Some settings may require a server restart.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n// Replace the Reports component in your client/src/App.js with this enhanced version:\n\nfunction Reports({ token, user }) {\n  const [reports, setReports] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedReports, setExpandedReports] = useState(new Set());\n  const [pagination, setPagination] = useState({}); // Track pagination for each report\n  const [downloadingReports, setDownloadingReports] = useState(new Set());\n  const [deletingReports, setDeletingReports] = useState(new Set());\n  const [deletingAll, setDeletingAll] = useState(false);\n\n  useEffect(() => {\n    loadReports();\n  }, []);\n\n  const loadReports = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/reports`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      \n      // Parse discrepancies for each report\n      const parsedReports = data.map(report => ({\n        ...report,\n        discrepancies: (() => {\n          try {\n            if (typeof report.discrepancies === 'string') {\n              return JSON.parse(report.discrepancies);\n            } else if (Array.isArray(report.discrepancies)) {\n              return report.discrepancies;\n            } else {\n              return [];\n            }\n          } catch (e) {\n            console.error('Error parsing discrepancies for report:', report.id, e);\n            return [];\n          }\n        })()\n      }));\n      \n      setReports(parsedReports);\n      \n      // Initialize pagination for each report (start with page 1)\n      const initialPagination = {};\n      parsedReports.forEach(report => {\n        initialPagination[report.id] = { currentPage: 1, itemsPerPage: 25 };\n      });\n      setPagination(initialPagination);\n      \n    } catch (error) {\n      console.error('Error loading reports:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteReport = async (report) => {\n    const confirmMessage = `Are you sure you want to delete the report from ${report.date}?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    const reportId = report.id;\n    setDeletingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        // Remove the report from the local state\n        setReports(prev => prev.filter(r => r.id !== reportId));\n        \n        // Also remove from expanded reports if it was expanded\n        setExpandedReports(prev => {\n          const newSet = new Set(prev);\n          newSet.delete(reportId);\n          return newSet;\n        });\n\n        alert(`Report from ${report.date} has been deleted successfully.`);\n      } else {\n        throw new Error(data.error || 'Failed to delete report');\n      }\n    } catch (error) {\n      console.error('Error deleting report:', error);\n      alert(`Failed to delete report: ${error.message}`);\n    } finally {\n      setDeletingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const deleteAllReports = async () => {\n    if (reports.length === 0) {\n      alert('No reports to delete.');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete ALL ${reports.length} reports?\\n\\nThis will permanently delete all inventory comparison reports and cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    // Double confirmation for such a destructive action\n    const doubleConfirm = window.confirm(`FINAL CONFIRMATION:\\n\\nThis will delete ALL ${reports.length} reports permanently.\\n\\nClick OK to proceed with deletion.`);\n    \n    if (!doubleConfirm) {\n      return;\n    }\n\n    setDeletingAll(true);\n\n    try {\n      let deletedCount = 0;\n      let failedCount = 0;\n      const totalReports = reports.length;\n\n      // Delete reports one by one to handle any individual failures\n      for (const report of reports) {\n        try {\n          const response = await fetch(`${API_BASE}/reports/${report.id}`, {\n            method: 'DELETE',\n            headers: { 'Authorization': `Bearer ${token}` }\n          });\n\n          const data = await response.json();\n\n          if (response.ok && data.success) {\n            deletedCount++;\n          } else {\n            failedCount++;\n            console.error(`Failed to delete report ${report.id}:`, data.error);\n          }\n        } catch (error) {\n          failedCount++;\n          console.error(`Error deleting report ${report.id}:`, error);\n        }\n      }\n\n      // Refresh the reports list\n      await loadReports();\n\n      // Show results\n      if (deletedCount === totalReports) {\n        alert(`Successfully deleted all ${deletedCount} reports.`);\n      } else if (deletedCount > 0) {\n        alert(`Deleted ${deletedCount} reports successfully.\\n${failedCount} reports failed to delete.`);\n      } else {\n        alert(`Failed to delete any reports. Please try again or contact support.`);\n      }\n\n    } catch (error) {\n      console.error('Error during bulk deletion:', error);\n      alert(`Error during deletion: ${error.message}`);\n      // Refresh the list to see current state\n      await loadReports();\n    } finally {\n      setDeletingAll(false);\n    }\n  };\n\n  const toggleReportExpansion = (reportId) => {\n    const newExpanded = new Set(expandedReports);\n    if (newExpanded.has(reportId)) {\n      newExpanded.delete(reportId);\n    } else {\n      newExpanded.add(reportId);\n    }\n    setExpandedReports(newExpanded);\n  };\n\n  const changePage = (reportId, newPage) => {\n    setPagination(prev => ({\n      ...prev,\n      [reportId]: {\n        ...prev[reportId],\n        currentPage: newPage\n      }\n    }));\n  };\n\n  const getPaginatedDiscrepancies = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    const startIndex = (pageInfo.currentPage - 1) * pageInfo.itemsPerPage;\n    const endIndex = startIndex + pageInfo.itemsPerPage;\n    return discrepancies.slice(startIndex, endIndex);\n  };\n\n  const getTotalPages = (discrepancies, reportId) => {\n    const pageInfo = pagination[reportId] || { currentPage: 1, itemsPerPage: 25 };\n    return Math.ceil(discrepancies.length / pageInfo.itemsPerPage);\n  };\n\n  const downloadExcelReport = async (report) => {\n    const reportId = report.id;\n    setDownloadingReports(prev => new Set(prev).add(reportId));\n\n    try {\n      const response = await fetch(`${API_BASE}/reports/${reportId}/excel`, {\n        method: 'GET',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to download report: ${response.statusText}`);\n      }\n\n      // Get the blob data\n      const blob = await response.blob();\n      \n      // Create download link\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `inventory-report-${report.date}-${reportId}.xlsx`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n    } catch (error) {\n      console.error('Error downloading Excel report:', error);\n      alert(`Failed to download report: ${error.message}`);\n    } finally {\n      setDownloadingReports(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(reportId);\n        return newSet;\n      });\n    }\n  };\n\n  const renderPagination = (discrepancies, reportId) => {\n    const totalPages = getTotalPages(discrepancies, reportId);\n    const currentPage = pagination[reportId]?.currentPage || 1;\n\n    if (totalPages <= 1) return null;\n\n    const pages = [];\n    const maxVisiblePages = 5;\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\n\n    // Adjust start page if we're near the end\n    if (endPage - startPage + 1 < maxVisiblePages) {\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\n    }\n\n    return (\n      <div className=\"pagination\" style={{ margin: '20px 0', display: 'flex', justifyContent: 'center', alignItems: 'center', gap: '10px' }}>\n        <button \n          onClick={() => changePage(reportId, 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          First\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, currentPage - 1)}\n          disabled={currentPage === 1}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === 1 ? '#f5f5f5' : 'white', cursor: currentPage === 1 ? 'not-allowed' : 'pointer' }}\n        >\n          Previous\n        </button>\n\n        {Array.from({ length: endPage - startPage + 1 }, (_, i) => startPage + i).map(page => (\n          <button\n            key={page}\n            onClick={() => changePage(reportId, page)}\n            style={{\n              padding: '8px 12px',\n              border: '1px solid #ddd',\n              background: page === currentPage ? '#007bff' : 'white',\n              color: page === currentPage ? 'white' : 'black',\n              cursor: 'pointer'\n            }}\n          >\n            {page}\n          </button>\n        ))}\n\n        <button \n          onClick={() => changePage(reportId, currentPage + 1)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Next\n        </button>\n        \n        <button \n          onClick={() => changePage(reportId, totalPages)}\n          disabled={currentPage === totalPages}\n          style={{ padding: '8px 12px', border: '1px solid #ddd', background: currentPage === totalPages ? '#f5f5f5' : 'white', cursor: currentPage === totalPages ? 'not-allowed' : 'pointer' }}\n        >\n          Last\n        </button>\n\n        <span style={{ marginLeft: '20px', fontSize: '14px', color: '#666' }}>\n          Page {currentPage} of {totalPages} ({discrepancies.length} total discrepancies)\n        </span>\n      </div>\n    );\n  };\n\n  if (loading) {\n    return <div>Loading reports...</div>;\n  }\n\n  return (\n    <div className=\"reports\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>Reports History (Last 30 Days)</h2>\n        \n        {/* Delete All Reports Button - Only show for admin users and when there are reports */}\n        {user && user.role === 'admin' && reports.length > 0 && (\n          <button\n            onClick={deleteAllReports}\n            disabled={deletingAll}\n            style={{\n              padding: '10px 20px',\n              backgroundColor: '#dc3545',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: deletingAll ? 'not-allowed' : 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n              opacity: deletingAll ? 0.6 : 1\n            }}\n          >\n            {deletingAll ? 'ðŸ—‘ï¸ Deleting All...' : `ðŸ—‘ï¸ Delete All Reports (${reports.length})`}\n          </button>\n        )}\n      </div>\n\n      {reports.length === 0 ? (\n        <p>No reports available yet. Run your first comparison!</p>\n      ) : (\n        <div className=\"reports-list\">\n          {reports.map((report, index) => (\n            <div key={report.id || index} className=\"report-card\">\n              <div className=\"report-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <div style={{ display: 'flex', alignItems: 'center', gap: '15px' }}>\n                  <span className=\"report-date\">{report.date}</span>\n                  <span className={`discrepancies-badge ${report.total_discrepancies > 0 ? 'has-discrepancies' : 'no-discrepancies'}`}>\n                    {report.total_discrepancies} discrepancies\n                  </span>\n                  <span className=\"report-time\">{new Date(report.created_at).toLocaleString()}</span>\n                </div>\n                \n                <div style={{ display: 'flex', gap: '8px' }}>\n                  <button\n                    onClick={() => downloadExcelReport(report)}\n                    disabled={downloadingReports.has(report.id)}\n                    style={{\n                      padding: '6px 12px',\n                      backgroundColor: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      cursor: downloadingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                      fontSize: '12px',\n                      opacity: downloadingReports.has(report.id) ? 0.6 : 1\n                    }}\n                  >\n                    {downloadingReports.has(report.id) ? 'ðŸ“¥ Downloading...' : 'ðŸ“Š Download Excel'}\n                  </button>\n                  \n                  {report.total_discrepancies > 0 && (\n                    <button\n                      onClick={() => toggleReportExpansion(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#007bff',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '12px'\n                      }}\n                    >\n                      {expandedReports.has(report.id) ? 'â–¼ Hide Details' : 'â–¶ View Details'}\n                    </button>\n                  )}\n\n                  {/* Delete Individual Report Button - Only show for admin users */}\n                  {user && user.role === 'admin' && (\n                    <button\n                      onClick={() => deleteReport(report)}\n                      disabled={deletingReports.has(report.id)}\n                      style={{\n                        padding: '6px 12px',\n                        backgroundColor: '#dc3545',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: deletingReports.has(report.id) ? 'not-allowed' : 'pointer',\n                        fontSize: '12px',\n                        opacity: deletingReports.has(report.id) ? 0.6 : 1\n                      }}\n                    >\n                      {deletingReports.has(report.id) ? 'ðŸ—‘ï¸ Deleting...' : 'ðŸ—‘ï¸ Delete'}\n                    </button>\n                  )}\n                </div>\n              </div>\n\n              {report.total_discrepancies > 0 && expandedReports.has(report.id) && (\n                <div className=\"report-details\">\n                  <div className=\"discrepancies-summary\">\n                    <h4>Inventory Discrepancies</h4>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                    \n                    <table style={{ width: '100%', borderCollapse: 'collapse', margin: '10px 0' }}>\n                      <thead>\n                        <tr style={{ backgroundColor: '#f8f9fa' }}>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>SKU</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'left' }}>Product</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Brightpearl</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Infoplus</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>Difference</th>\n                          <th style={{ border: '1px solid #dee2e6', padding: '12px', textAlign: 'right' }}>% Diff</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {getPaginatedDiscrepancies(report.discrepancies, report.id).map((item, itemIndex) => (\n                          <tr key={itemIndex} style={{ backgroundColor: itemIndex % 2 === 0 ? 'white' : '#f8f9fa' }}>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', fontWeight: 'bold' }}>{item.sku}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px' }}>{item.productName || 'N/A'}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.brightpearl_stock}</td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>{item.infoplus_stock}</td>\n                            <td style={{ \n                              border: '1px solid #dee2e6', \n                              padding: '10px', \n                              textAlign: 'right',\n                              color: item.difference < 0 ? 'red' : 'green',\n                              fontWeight: 'bold'\n                            }}>\n                              {item.difference > 0 ? '+' : ''}{item.difference}\n                            </td>\n                            <td style={{ border: '1px solid #dee2e6', padding: '10px', textAlign: 'right' }}>\n                              {item.percentage_diff ? `${item.percentage_diff}%` : 'N/A'}\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                    \n                    {renderPagination(report.discrepancies, report.id)}\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Enhanced Users Component - Replace your existing Users component with this:\n\nfunction Users({ token, user }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [editingUser, setEditingUser] = useState(null);\n  const [showAddUser, setShowAddUser] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (user.role === 'admin') {\n      loadUsers();\n    }\n  }, [user.role]);\n\n  const loadUsers = async () => {\n    try {\n      const response = await fetch(`${API_BASE}/users`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await response.json();\n      setUsers(data);\n    } catch (error) {\n      console.error('Error loading users:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditUser = (userToEdit) => {\n    setEditingUser({\n      id: userToEdit.id,\n      username: userToEdit.username,\n      email: userToEdit.email || '',\n      first_name: userToEdit.first_name || '',\n      last_name: userToEdit.last_name || '',\n      role: userToEdit.role,\n      is_active: userToEdit.is_active,\n      password: '', // Always start with empty password\n      confirmPassword: ''\n    });\n  };\n\n  const handleAddUser = () => {\n    setShowAddUser(true);\n    setEditingUser({\n      username: '',\n      email: '',\n      first_name: '',\n      last_name: '',\n      role: 'user',\n      is_active: true,\n      password: '',\n      confirmPassword: ''\n    });\n  };\n\n  const handleSaveUser = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      // Validation\n      if (!editingUser.username.trim()) {\n        alert('Username is required');\n        return;\n      }\n\n      if (!editingUser.email.trim()) {\n        alert('Email is required');\n        return;\n      }\n\n      if (!editingUser.first_name.trim()) {\n        alert('First name is required');\n        return;\n      }\n\n      if (!editingUser.last_name.trim()) {\n        alert('Last name is required');\n        return;\n      }\n\n      // For new users, password is required\n      if (showAddUser && !editingUser.password) {\n        alert('Password is required for new users');\n        return;\n      }\n\n      // If password is being changed, validate it\n      if (editingUser.password) {\n        if (editingUser.password.length < 6) {\n          alert('Password must be at least 6 characters long');\n          return;\n        }\n\n        if (editingUser.password !== editingUser.confirmPassword) {\n          alert('Passwords do not match');\n          return;\n        }\n      }\n\n      const userData = {\n        username: editingUser.username.trim(),\n        email: editingUser.email.trim(),\n        first_name: editingUser.first_name.trim(),\n        last_name: editingUser.last_name.trim(),\n        role: editingUser.role,\n        is_active: editingUser.is_active\n      };\n\n      // Only include password if it's being set\n      if (editingUser.password) {\n        userData.password = editingUser.password;\n      }\n\n      const url = showAddUser \n        ? `${API_BASE}/users`\n        : `${API_BASE}/users/${editingUser.id}`;\n      \n      const method = showAddUser ? 'POST' : 'PUT';\n\n      const response = await fetch(url, {\n        method: method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert(showAddUser ? 'User created successfully!' : 'User updated successfully!');\n        setEditingUser(null);\n        setShowAddUser(false);\n        await loadUsers(); // Refresh the list\n      } else {\n        throw new Error(data.error || 'Failed to save user');\n      }\n    } catch (error) {\n      console.error('Error saving user:', error);\n      alert(`Error: ${error.message}`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleDeleteUser = async (userToDelete) => {\n    if (userToDelete.id === user.id) {\n      alert('You cannot delete your own account');\n      return;\n    }\n\n    const confirmMessage = `Are you sure you want to delete user \"${userToDelete.username}\"?\\n\\nThis action cannot be undone.`;\n    \n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n\n    try {\n      const response = await fetch(`${API_BASE}/users/${userToDelete.id}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        alert('User deleted successfully');\n        await loadUsers();\n      } else {\n        throw new Error(data.error || 'Failed to delete user');\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      alert(`Error: ${error.message}`);\n    }\n  };\n\n  const cancelEdit = () => {\n    setEditingUser(null);\n    setShowAddUser(false);\n  };\n\n  if (user.role !== 'admin') {\n    return <div>Access denied. Admin privileges required.</div>;\n  }\n\n  if (loading) {\n    return <div>Loading users...</div>;\n  }\n\n  return (\n    <div className=\"users\">\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px' }}>\n        <h2>User Management</h2>\n        <button\n          onClick={handleAddUser}\n          style={{\n            padding: '10px 20px',\n            backgroundColor: '#28a745',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            fontSize: '14px',\n            fontWeight: 'bold'\n          }}\n        >\n          âž• Add New User\n        </button>\n      </div>\n\n      {/* Edit/Add User Form */}\n      {editingUser && (\n        <div className=\"user-form-overlay\">\n          <div className=\"user-form\">\n            <h3>{showAddUser ? 'Add New User' : `Edit User: ${editingUser.username}`}</h3>\n            \n            <form onSubmit={handleSaveUser}>\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Username *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.username}\n                    onChange={(e) => setEditingUser({...editingUser, username: e.target.value})}\n                    required\n                    disabled={!showAddUser} // Username can't be changed for existing users\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Email *</label>\n                  <input\n                    type=\"email\"\n                    value={editingUser.email}\n                    onChange={(e) => setEditingUser({...editingUser, email: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>First Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.first_name}\n                    onChange={(e) => setEditingUser({...editingUser, first_name: e.target.value})}\n                    required\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Last Name *</label>\n                  <input\n                    type=\"text\"\n                    value={editingUser.last_name}\n                    onChange={(e) => setEditingUser({...editingUser, last_name: e.target.value})}\n                    required\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>Role</label>\n                  <select\n                    value={editingUser.role}\n                    onChange={(e) => setEditingUser({...editingUser, role: e.target.value})}\n                  >\n                    <option value=\"user\">User</option>\n                    <option value=\"admin\">Admin</option>\n                  </select>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Status</label>\n                  <select\n                    value={editingUser.is_active}\n                    onChange={(e) => setEditingUser({...editingUser, is_active: e.target.value === 'true'})}\n                  >\n                    <option value=\"true\">Active</option>\n                    <option value=\"false\">Inactive</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label>{showAddUser ? 'Password *' : 'New Password (leave blank to keep current)'}</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.password}\n                    onChange={(e) => setEditingUser({...editingUser, password: e.target.value})}\n                    required={showAddUser}\n                    minLength=\"6\"\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>Confirm Password</label>\n                  <input\n                    type=\"password\"\n                    value={editingUser.confirmPassword}\n                    onChange={(e) => setEditingUser({...editingUser, confirmPassword: e.target.value})}\n                    required={showAddUser || editingUser.password}\n                  />\n                </div>\n              </div>\n\n              <div className=\"form-actions\">\n                <button\n                  type=\"button\"\n                  onClick={cancelEdit}\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#6c757d',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    marginRight: '10px'\n                  }}\n                >\n                  Cancel\n                </button>\n                \n                <button\n                  type=\"submit\"\n                  disabled={isSubmitting}\n                  style={{\n                    padding: '10px 20px',\n                    backgroundColor: '#007bff',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  {isSubmitting ? 'Saving...' : (showAddUser ? 'Create User' : 'Update User')}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Users List */}\n      <div className=\"users-list\">\n        {users.map(u => (\n          <div key={u.id} className=\"user-card\">\n            <div className=\"user-info\">\n              <div className=\"user-header\">\n                <strong>{u.first_name} {u.last_name}</strong>\n                <span className={`user-role ${u.role}`}>{u.role}</span>\n                {!u.is_active && <span className=\"user-status inactive\">Inactive</span>}\n              </div>\n              \n              <div className=\"user-details\">\n                <div><strong>Username:</strong> {u.username}</div>\n                <div><strong>Email:</strong> {u.email || 'Not set'}</div>\n                <div><strong>Last login:</strong> {u.last_login ? new Date(u.last_login).toLocaleString() : 'Never'}</div>\n                <div><strong>Created:</strong> {new Date(u.created_at).toLocaleDateString()}</div>\n              </div>\n            </div>\n            \n            <div className=\"user-actions\">\n              <button\n                onClick={() => handleEditUser(u)}\n                style={{\n                  padding: '6px 12px',\n                  backgroundColor: '#007bff',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '4px',\n                  cursor: 'pointer',\n                  fontSize: '12px',\n                  marginRight: '8px'\n                }}\n              >\n                âœï¸ Edit\n              </button>\n              \n              {u.id !== user.id && (\n                <button\n                  onClick={() => handleDeleteUser(u)}\n                  style={{\n                    padding: '6px 12px',\n                    backgroundColor: '#dc3545',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontSize: '12px'\n                  }}\n                >\n                  ðŸ—‘ï¸ Delete\n                </button>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// Main App Component\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  const [currentTab, setCurrentTab] = useState('dashboard');\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    // Check for existing authentication\n    const savedToken = localStorage.getItem('token');\n    const savedUser = localStorage.getItem('user');\n    \n    if (savedToken && savedUser) {\n      try {\n        const userData = JSON.parse(savedUser);\n        setToken(savedToken);\n        setUser(userData);\n        setIsAuthenticated(true);\n      } catch (error) {\n        // If there's an error parsing the saved user data, clear it\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n      }\n    }\n    \n    setIsLoading(false);\n  }, []);\n\n  const handleLogin = (userData, userToken) => {\n    setUser(userData);\n    setToken(userToken);\n    setIsAuthenticated(true);\n    \n    // Update localStorage with the new user data structure\n    localStorage.setItem('user', JSON.stringify(userData));\n    localStorage.setItem('token', userToken);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsAuthenticated(false);\n    setUser(null);\n    setToken(null);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading\">\n          Loading...\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"app-header\">\n        <div className=\"header-content\">\n          <h1>Texon Invoicing Portal</h1>\n          <div className=\"user-info\">\n            <span>Welcome, {user.first_name || user.username}</span>\n            <button onClick={handleLogout} className=\"btn-logout\">\n              Logout\n            </button>\n          </div>\n        </div>\n        <nav>\n          <button \n            className={currentTab === 'dashboard' ? 'active' : ''} \n            onClick={() => setCurrentTab('dashboard')}\n          >\n            Dashboard\n          </button>\n          <button \n            className={currentTab === 'settings' ? 'active' : ''} \n            onClick={() => setCurrentTab('settings')}\n          >\n            Settings\n          </button>\n          <button \n            className={currentTab === 'reports' ? 'active' : ''} \n            onClick={() => setCurrentTab('reports')}\n          >\n            Reports\n          </button>\n          {user.role === 'admin' && (\n            <button \n              className={currentTab === 'users' ? 'active' : ''} \n              onClick={() => setCurrentTab('users')}\n            >\n              Users\n            </button>\n          )}\n        </nav>\n      </header>\n\n      <main className=\"main-content\">\n        {currentTab === 'dashboard' && <Dashboard token={token} />}\n        {currentTab === 'settings' && <Settings token={token} user={user} />}\n        {currentTab === 'reports' && <Reports token={token} user={user} />}\n        {currentTab === 'users' && <Users token={token} user={user} />}\n      </main>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}